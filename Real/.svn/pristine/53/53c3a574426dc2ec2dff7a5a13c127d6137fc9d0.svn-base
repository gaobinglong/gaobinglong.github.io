cc.game.onStart=function(){!cc.sys.isNative&&document.getElementById("cocosLoading")&&document.body.removeChild(document.getElementById("cocosLoading"));cc.sys.os==cc.sys.OS_IOS?cc.view.enableRetina(!0):cc.view.enableRetina(!1);cc.view.adjustViewPort(!0);cc.view.setDesignResolutionSize(750,1226,cc.ResolutionPolicy.FIXED_WIDTH);cc.view.resizeWithBrowserSize(!0);contentNumber?SceneController.instance().gotoScene(contentNumber):SceneController.instance().gotoScene(GAME_TYPE.MajorityVote);if(1!=window.sessionStorage.getItem("firstStart"))window.sessionStorage.setItem("firstStart",
1),History.pushState({state:1},"\u4fbf\u5229\u5c4b","?state\x3dbenriya");else{var a=History.getPageUrl(),b=a.length;"/"===a.substr(b-1,1)&&(a=a.substr(0,b-1),b=a.length);"?state\x3dbenriya"!=a.substr(b-14,14)&&History.pushState({state:1},"\u4fbf\u5229\u5c4b","?state\x3dbenriya")}window.addEventListener("popstate",function(a){null==a.state&&window.changeState_cb&&window.changeState_cb(window.changeState_context)},!1)};cc.game.run();var GlobalRes={addition_btn:"res/Global/common/addition_btn.png",addition_d:"res/Global/common/addition_d.png",delete_png:"res/Global/common/delete.png",history_delete_btn:"res/Global/common/history_delete_btn.png",history_line:"res/Global/common/history_line.png",history_replay_btn:"res/Global/common/history_replay_btn.png",line_8:"res/Global/common/line_8.png",line_50:"res/Global/common/line_50.png",navi_selected_btn:"res/Global/common/navi_selected_btn.png",popup:"res/Global/common/popup.png",
arrow_left2:"res/Global/common/pre_arrow_2.png",arrow_right2:"res/Global/common/next_arrow_2.png",arrow_left:"res/Global/common/arrow_left.png",arrow_right:"res/Global/common/arrow_right.png",top_menu:"res/Global/common/home.png",top_navi_btn:"res/Global/common/top_navi_btn.png",color_6fcdc1:"res/Global/color_6fcdc1.png",color_c8c8c8:"res/Global/color_c8c8c8.png",color_b0e2cf:"res/Global/color_b0e2cf.png",color_eeeeee:"res/Global/color_eeeeee.png",cha_thumb_random:"res/Global/cha_pop/cha_thumb_random.png",
radius1:"res/Global/radius1.png",dot:"res/Global/dot.png"},g_GlobalRes=[],i;for(i in GlobalRes)g_GlobalRes.push(GlobalRes[i]);var MainRes={},g_MainRes=[{type:"font",name:"\u30a6\u30ba\u30e9\u30d5\u30a9\u30f3\u30c8",srcs:["resource/font/azukifont.ttf"]}];for(i in MainRes)g_MainRes.push(MainRes[i]);
var GroupingRes={start_btn:"res/Scene/Grouping/start_btn.png",simple_play_btn:"res/Scene/Grouping/simple_play_btn.png",simple_list_btn:"res/Scene/Grouping/simple_list_btn.png",setting_play_btn:"res/Scene/Grouping/setting_play_btn.png",setting_list_btn:"res/Scene/Grouping/setting_list_btn.png",cha_thumb_random:"res/Scene/Grouping/cha_thumb_random.png",cha_block:"res/Scene/Grouping/cha_block.png",bg:"res/Scene/Grouping/bg.png",top_001:"res/Scene/Grouping/top_001.png",top_002:"res/Scene/Grouping/top_002.png",
top_003:"res/Scene/Grouping/top_003.png",top_004:"res/Scene/Grouping/top_004.png",top_005:"res/Scene/Grouping/top_005.png",top_006:"res/Scene/Grouping/top_006.png",top_007:"res/Scene/Grouping/top_007.png",top_008:"res/Scene/Grouping/top_008.png",top_009:"res/Scene/Grouping/top_009.png",cha_pop_01_off:"res/Global/cha_pop/cha_pop_01_off.png",cha_pop_01_on:"res/Global/cha_pop/cha_pop_01_on.png",cha_pop_02_off:"res/Global/cha_pop/cha_pop_02_off.png",cha_pop_02_on:"res/Global/cha_pop/cha_pop_02_on.png",
cha_pop_03_off:"res/Global/cha_pop/cha_pop_03_off.png",cha_pop_03_on:"res/Global/cha_pop/cha_pop_03_on.png",cha_pop_04_off:"res/Global/cha_pop/cha_pop_04_off.png",cha_pop_04_on:"res/Global/cha_pop/cha_pop_04_on.png",cha_pop_05_off:"res/Global/cha_pop/cha_pop_05_off.png",cha_pop_05_on:"res/Global/cha_pop/cha_pop_05_on.png",cha_pop_06_off:"res/Global/cha_pop/cha_pop_06_off.png",cha_pop_06_on:"res/Global/cha_pop/cha_pop_06_on.png",cha_pop_07_off:"res/Global/cha_pop/cha_pop_07_off.png",cha_pop_07_on:"res/Global/cha_pop/cha_pop_07_on.png",
cha_pop_08_off:"res/Global/cha_pop/cha_pop_08_off.png",cha_pop_08_on:"res/Global/cha_pop/cha_pop_08_on.png",cha_pop_09_off:"res/Global/cha_pop/cha_pop_09_off.png",cha_pop_09_on:"res/Global/cha_pop/cha_pop_09_on.png",cha_pop_10_off:"res/Global/cha_pop/cha_pop_10_off.png",cha_pop_10_on:"res/Global/cha_pop/cha_pop_10_on.png",cha_pop_11_off:"res/Global/cha_pop/cha_pop_11_off.png",cha_pop_11_on:"res/Global/cha_pop/cha_pop_11_on.png",cha_pop_12_off:"res/Global/cha_pop/cha_pop_12_off.png",cha_pop_12_on:"res/Global/cha_pop/cha_pop_12_on.png",
cha_pop_13_off:"res/Global/cha_pop/cha_pop_13_off.png",cha_pop_13_on:"res/Global/cha_pop/cha_pop_13_on.png",cha_pop_14_off:"res/Global/cha_pop/cha_pop_14_off.png",cha_pop_14_on:"res/Global/cha_pop/cha_pop_14_on.png",cha_pop_15_off:"res/Global/cha_pop/cha_pop_15_off.png",cha_pop_15_on:"res/Global/cha_pop/cha_pop_15_on.png",cha_pop_16_off:"res/Global/cha_pop/cha_pop_16_off.png",cha_pop_16_on:"res/Global/cha_pop/cha_pop_16_on.png",cha_thumb_01:"res/Global/cha_pop/cha_thumb_01.png",cha_thumb_02:"res/Global/cha_pop/cha_thumb_02.png",
cha_thumb_03:"res/Global/cha_pop/cha_thumb_03.png",cha_thumb_04:"res/Global/cha_pop/cha_thumb_04.png",cha_thumb_05:"res/Global/cha_pop/cha_thumb_05.png",cha_thumb_06:"res/Global/cha_pop/cha_thumb_06.png",cha_thumb_07:"res/Global/cha_pop/cha_thumb_07.png",cha_thumb_08:"res/Global/cha_pop/cha_thumb_08.png",cha_thumb_09:"res/Global/cha_pop/cha_thumb_09.png",cha_thumb_10:"res/Global/cha_pop/cha_thumb_10.png",cha_thumb_11:"res/Global/cha_pop/cha_thumb_11.png",cha_thumb_12:"res/Global/cha_pop/cha_thumb_12.png",
cha_thumb_13:"res/Global/cha_pop/cha_thumb_13.png",cha_thumb_14:"res/Global/cha_pop/cha_thumb_14.png",cha_thumb_15:"res/Global/cha_pop/cha_thumb_15.png",cha_thumb_01_b:"res/Global/cha_pop/cha_thumb_01_b.png",cha_thumb_02_b:"res/Global/cha_pop/cha_thumb_02_b.png",cha_thumb_03_b:"res/Global/cha_pop/cha_thumb_03_b.png",cha_thumb_04_b:"res/Global/cha_pop/cha_thumb_04_b.png",cha_thumb_05_b:"res/Global/cha_pop/cha_thumb_05_b.png",cha_thumb_06_b:"res/Global/cha_pop/cha_thumb_06_b.png",cha_thumb_07_b:"res/Global/cha_pop/cha_thumb_07_b.png",
cha_thumb_08_b:"res/Global/cha_pop/cha_thumb_08_b.png",cha_thumb_09_b:"res/Global/cha_pop/cha_thumb_09_b.png",cha_thumb_10_b:"res/Global/cha_pop/cha_thumb_10_b.png",cha_thumb_11_b:"res/Global/cha_pop/cha_thumb_11_b.png",cha_thumb_12_b:"res/Global/cha_pop/cha_thumb_12_b.png",cha_thumb_13_b:"res/Global/cha_pop/cha_thumb_13_b.png",cha_thumb_14_b:"res/Global/cha_pop/cha_thumb_14_b.png",cha_thumb_15_b:"res/Global/cha_pop/cha_thumb_15_b.png",motion_01_1:"res/Global/motion/motion_01_1.png",motion_01_2:"res/Global/motion/motion_01_2.png",
motion_01_3:"res/Global/motion/motion_01_3.png",motion_02_1:"res/Global/motion/motion_02_1.png",motion_02_2:"res/Global/motion/motion_02_2.png",motion_02_3:"res/Global/motion/motion_02_3.png",motion_03_1:"res/Global/motion/motion_03_1.png",motion_03_2:"res/Global/motion/motion_03_2.png",motion_03_3:"res/Global/motion/motion_03_3.png",motion_04_1:"res/Global/motion/motion_04_1.png",motion_04_2:"res/Global/motion/motion_04_2.png",motion_04_3:"res/Global/motion/motion_04_3.png",motion_05_1:"res/Global/motion/motion_05_1.png",
motion_05_2:"res/Global/motion/motion_05_2.png",motion_05_3:"res/Global/motion/motion_05_3.png",motion_06_1:"res/Global/motion/motion_06_1.png",motion_06_2:"res/Global/motion/motion_06_2.png",motion_06_3:"res/Global/motion/motion_06_3.png",motion_07_1:"res/Global/motion/motion_07_1.png",motion_07_2:"res/Global/motion/motion_07_2.png",motion_07_3:"res/Global/motion/motion_07_3.png",motion_08_1:"res/Global/motion/motion_08_1.png",motion_08_2:"res/Global/motion/motion_08_2.png",motion_08_3:"res/Global/motion/motion_08_3.png",
motion_09_1:"res/Global/motion/motion_09_1.png",motion_09_2:"res/Global/motion/motion_09_2.png",motion_09_3:"res/Global/motion/motion_09_3.png",motion_10_1:"res/Global/motion/motion_10_1.png",motion_10_2:"res/Global/motion/motion_10_2.png",motion_10_3:"res/Global/motion/motion_10_3.png",motion_11_1:"res/Global/motion/motion_11_1.png",motion_11_2:"res/Global/motion/motion_11_2.png",motion_11_3:"res/Global/motion/motion_11_3.png",motion_12_1:"res/Global/motion/motion_12_1.png",motion_12_2:"res/Global/motion/motion_12_2.png",
motion_12_3:"res/Global/motion/motion_12_3.png",motion_13_1:"res/Global/motion/motion_13_1.png",motion_13_2:"res/Global/motion/motion_13_2.png",motion_13_3:"res/Global/motion/motion_13_3.png",motion_14_1:"res/Global/motion/motion_14_1.png",motion_14_2:"res/Global/motion/motion_14_2.png",motion_14_3:"res/Global/motion/motion_14_3.png",motion_15_1:"res/Global/motion/motion_15_1.png",motion_15_2:"res/Global/motion/motion_15_2.png",motion_15_3:"res/Global/motion/motion_15_3.png",motion_01_b_1:"res/Global/motion/motion_01_b_1.png",
motion_01_b_2:"res/Global/motion/motion_01_b_2.png",motion_01_b_3:"res/Global/motion/motion_01_b_3.png",motion_02_b_1:"res/Global/motion/motion_02_b_1.png",motion_02_b_2:"res/Global/motion/motion_02_b_2.png",motion_02_b_3:"res/Global/motion/motion_02_b_3.png",motion_03_b_1:"res/Global/motion/motion_03_b_1.png",motion_03_b_2:"res/Global/motion/motion_03_b_2.png",motion_03_b_3:"res/Global/motion/motion_03_b_3.png",motion_04_b_1:"res/Global/motion/motion_04_b_1.png",motion_04_b_2:"res/Global/motion/motion_04_b_2.png",
motion_04_b_3:"res/Global/motion/motion_04_b_3.png",motion_05_b_1:"res/Global/motion/motion_05_b_1.png",motion_05_b_2:"res/Global/motion/motion_05_b_2.png",motion_05_b_3:"res/Global/motion/motion_05_b_3.png",motion_06_b_1:"res/Global/motion/motion_06_b_1.png",motion_06_b_2:"res/Global/motion/motion_06_b_2.png",motion_06_b_3:"res/Global/motion/motion_06_b_3.png",motion_07_b_1:"res/Global/motion/motion_07_b_1.png",motion_07_b_2:"res/Global/motion/motion_07_b_2.png",motion_07_b_3:"res/Global/motion/motion_07_b_3.png",
motion_08_b_1:"res/Global/motion/motion_08_b_1.png",motion_08_b_2:"res/Global/motion/motion_08_b_2.png",motion_08_b_3:"res/Global/motion/motion_08_b_3.png",motion_09_b_1:"res/Global/motion/motion_09_b_1.png",motion_09_b_2:"res/Global/motion/motion_09_b_2.png",motion_09_b_3:"res/Global/motion/motion_09_b_3.png",motion_10_b_1:"res/Global/motion/motion_10_b_1.png",motion_10_b_2:"res/Global/motion/motion_10_b_2.png",motion_10_b_3:"res/Global/motion/motion_10_b_3.png",motion_11_b_1:"res/Global/motion/motion_11_b_1.png",
motion_11_b_2:"res/Global/motion/motion_11_b_2.png",motion_11_b_3:"res/Global/motion/motion_11_b_3.png",motion_12_b_1:"res/Global/motion/motion_12_b_1.png",motion_12_b_2:"res/Global/motion/motion_12_b_2.png",motion_12_b_3:"res/Global/motion/motion_12_b_3.png",motion_13_b_1:"res/Global/motion/motion_13_b_1.png",motion_13_b_2:"res/Global/motion/motion_13_b_2.png",motion_13_b_3:"res/Global/motion/motion_13_b_3.png",motion_14_b_1:"res/Global/motion/motion_14_b_1.png",motion_14_b_2:"res/Global/motion/motion_14_b_2.png",
motion_14_b_3:"res/Global/motion/motion_14_b_3.png",motion_15_b_1:"res/Global/motion/motion_15_b_1.png",motion_15_b_2:"res/Global/motion/motion_15_b_2.png",motion_15_b_3:"res/Global/motion/motion_15_b_3.png",laughjingle:"res/Sound/laughjingle.mp3",laugh_1:"res/Sound/laugh_1.mp3",laugh_2:"res/Sound/laugh_2.mp3",laugh_3:"res/Sound/laugh_3.mp3",laugh_4:"res/Sound/laugh_4.mp3",sound_normal_1:"res/Sound/normal_1.mp3"},g_GroupingRes=[];for(i in GroupingRes)g_GroupingRes.push(GroupingRes[i]);
var LoveRedLineRes={table4_json:"res/Scene/LoveRedLine/Tables/Table4.json",table6_json:"res/Scene/LoveRedLine/Tables/Table6.json",table8_json:"res/Scene/LoveRedLine/Tables/Table8.json",table10_json:"res/Scene/LoveRedLine/Tables/Table10.json",table12_json:"res/Scene/LoveRedLine/Tables/Table12.json",table14_json:"res/Scene/LoveRedLine/Tables/Table14.json",table16_json:"res/Scene/LoveRedLine/Tables/Table16.json",table18_json:"res/Scene/LoveRedLine/Tables/Table18.json",table20_json:"res/Scene/LoveRedLine/Tables/Table20.json",
table22_json:"res/Scene/LoveRedLine/Tables/Table22.json",table24_json:"res/Scene/LoveRedLine/Tables/Table24.json",table26_json:"res/Scene/LoveRedLine/Tables/Table26.json",table28_json:"res/Scene/LoveRedLine/Tables/Table28.json",table30_json:"res/Scene/LoveRedLine/Tables/Table30.json",table5_json:"res/Scene/LoveRedLine/Tables/Table5.json",table7_json:"res/Scene/LoveRedLine/Tables/Table7.json",table9_json:"res/Scene/LoveRedLine/Tables/Table9.json",table11_json:"res/Scene/LoveRedLine/Tables/Table11.json",
table13_json:"res/Scene/LoveRedLine/Tables/Table13.json",table15_json:"res/Scene/LoveRedLine/Tables/Table15.json",table17_json:"res/Scene/LoveRedLine/Tables/Table17.json",table19_json:"res/Scene/LoveRedLine/Tables/Table19.json",table21_json:"res/Scene/LoveRedLine/Tables/Table21.json",table23_json:"res/Scene/LoveRedLine/Tables/Table23.json",table25_json:"res/Scene/LoveRedLine/Tables/Table25.json",table27_json:"res/Scene/LoveRedLine/Tables/Table27.json",table29_json:"res/Scene/LoveRedLine/Tables/Table29.json",
table2X_json:"res/Scene/LoveRedLine/Tables/Table2X.json",table3X_json:"res/Scene/LoveRedLine/Tables/Table3X.json",table4X_json:"res/Scene/LoveRedLine/Tables/Table4X.json",table6X_json:"res/Scene/LoveRedLine/Tables/Table6X.json",member_json:"res/Scene/LoveRedLine/Tables/member.json",start_btn:"res/Scene/LoveRedLine/start_btn.png",love_play_btn:"res/Scene/LoveRedLine/love_play_btn.png",seat_play_btn:"res/Scene/LoveRedLine/seat_play_btn.png",love_list_btn:"res/Scene/LoveRedLine/love_list_btn.png",seat_list_btn:"res/Scene/LoveRedLine/seat_list_btn.png",
cha_thumb_random:"res/Scene/LoveRedLine/cha_thumb_random.png",bg:"res/Scene/LoveRedLine/bg.png",roundrect:"res/Scene/LoveRedLine/roundrect.png",selected_popup:"res/Scene/LoveRedLine/selected_popup.png",selected_self:"res/Scene/LoveRedLine/selected_self.png",arrow_head:"res/Scene/LoveRedLine/arrow_head.png",arrow_line:"res/Scene/LoveRedLine/arrow_line.png",line_dot:"res/Scene/LoveRedLine/line_dot.png",heart:"res/Scene/LoveRedLine/heart.png",top001:"res/Scene/LoveRedLine/top1.png",top002:"res/Scene/LoveRedLine/top2.png",
top003:"res/Scene/LoveRedLine/top3.png",top004:"res/Scene/LoveRedLine/top4.png",top005:"res/Scene/LoveRedLine/top5.png",top006:"res/Scene/LoveRedLine/top6.png",top007:"res/Scene/LoveRedLine/top7.png",top008:"res/Scene/LoveRedLine/top8.png",top009:"res/Scene/LoveRedLine/top9.png",top010:"res/Scene/LoveRedLine/top10.png",top011:"res/Scene/LoveRedLine/top11.png",top012:"res/Scene/LoveRedLine/top12.png",cha_pop_01_off:"res/Global/cha_pop/cha_pop_01_off.png",cha_pop_01_on:"res/Global/cha_pop/cha_pop_01_on.png",
cha_pop_02_off:"res/Global/cha_pop/cha_pop_02_off.png",cha_pop_02_on:"res/Global/cha_pop/cha_pop_02_on.png",cha_pop_03_off:"res/Global/cha_pop/cha_pop_03_off.png",cha_pop_03_on:"res/Global/cha_pop/cha_pop_03_on.png",cha_pop_04_off:"res/Global/cha_pop/cha_pop_04_off.png",cha_pop_04_on:"res/Global/cha_pop/cha_pop_04_on.png",cha_pop_05_off:"res/Global/cha_pop/cha_pop_05_off.png",cha_pop_05_on:"res/Global/cha_pop/cha_pop_05_on.png",cha_pop_06_off:"res/Global/cha_pop/cha_pop_06_off.png",cha_pop_06_on:"res/Global/cha_pop/cha_pop_06_on.png",
cha_pop_07_off:"res/Global/cha_pop/cha_pop_07_off.png",cha_pop_07_on:"res/Global/cha_pop/cha_pop_07_on.png",cha_pop_08_off:"res/Global/cha_pop/cha_pop_08_off.png",cha_pop_08_on:"res/Global/cha_pop/cha_pop_08_on.png",cha_pop_09_off:"res/Global/cha_pop/cha_pop_09_off.png",cha_pop_09_on:"res/Global/cha_pop/cha_pop_09_on.png",cha_pop_10_off:"res/Global/cha_pop/cha_pop_10_off.png",cha_pop_10_on:"res/Global/cha_pop/cha_pop_10_on.png",cha_pop_11_off:"res/Global/cha_pop/cha_pop_11_off.png",cha_pop_11_on:"res/Global/cha_pop/cha_pop_11_on.png",
cha_pop_12_off:"res/Global/cha_pop/cha_pop_12_off.png",cha_pop_12_on:"res/Global/cha_pop/cha_pop_12_on.png",cha_pop_13_off:"res/Global/cha_pop/cha_pop_13_off.png",cha_pop_13_on:"res/Global/cha_pop/cha_pop_13_on.png",cha_pop_14_off:"res/Global/cha_pop/cha_pop_14_off.png",cha_pop_14_on:"res/Global/cha_pop/cha_pop_14_on.png",cha_pop_15_off:"res/Global/cha_pop/cha_pop_15_off.png",cha_pop_15_on:"res/Global/cha_pop/cha_pop_15_on.png",cha_pop_16_off:"res/Global/cha_pop/cha_pop_16_off.png",cha_pop_16_on:"res/Global/cha_pop/cha_pop_16_on.png",
cha_thumb_01:"res/Global/cha_pop/cha_thumb_01.png",cha_thumb_02:"res/Global/cha_pop/cha_thumb_02.png",cha_thumb_03:"res/Global/cha_pop/cha_thumb_03.png",cha_thumb_04:"res/Global/cha_pop/cha_thumb_04.png",cha_thumb_05:"res/Global/cha_pop/cha_thumb_05.png",cha_thumb_06:"res/Global/cha_pop/cha_thumb_06.png",cha_thumb_07:"res/Global/cha_pop/cha_thumb_07.png",cha_thumb_08:"res/Global/cha_pop/cha_thumb_08.png",cha_thumb_09:"res/Global/cha_pop/cha_thumb_09.png",cha_thumb_10:"res/Global/cha_pop/cha_thumb_10.png",
cha_thumb_11:"res/Global/cha_pop/cha_thumb_11.png",cha_thumb_12:"res/Global/cha_pop/cha_thumb_12.png",cha_thumb_13:"res/Global/cha_pop/cha_thumb_13.png",cha_thumb_14:"res/Global/cha_pop/cha_thumb_14.png",cha_thumb_15:"res/Global/cha_pop/cha_thumb_15.png",cha_thumb_16:"res/Global/cha_pop/cha_thumb_16.png",cha_thumb_17:"res/Global/cha_pop/cha_thumb_17.png",cha_thumb_18:"res/Global/cha_pop/cha_thumb_18.png",cha_thumb_19:"res/Global/cha_pop/cha_thumb_19.png",cha_thumb_20:"res/Global/cha_pop/cha_thumb_20.png",
cha_thumb_21:"res/Global/cha_pop/cha_thumb_21.png",cha_thumb_22:"res/Global/cha_pop/cha_thumb_22.png",cha_thumb_23:"res/Global/cha_pop/cha_thumb_23.png",cha_thumb_24:"res/Global/cha_pop/cha_thumb_24.png",cha_thumb_25:"res/Global/cha_pop/cha_thumb_25.png",cha_thumb_26:"res/Global/cha_pop/cha_thumb_26.png",cha_thumb_27:"res/Global/cha_pop/cha_thumb_27.png",cha_thumb_28:"res/Global/cha_pop/cha_thumb_28.png",cha_thumb_29:"res/Global/cha_pop/cha_thumb_29.png",cha_thumb_30:"res/Global/cha_pop/cha_thumb_30.png",
cha_thumb_01_b:"res/Global/cha_pop/cha_thumb_01_b.png",cha_thumb_02_b:"res/Global/cha_pop/cha_thumb_02_b.png",cha_thumb_03_b:"res/Global/cha_pop/cha_thumb_03_b.png",cha_thumb_04_b:"res/Global/cha_pop/cha_thumb_04_b.png",cha_thumb_05_b:"res/Global/cha_pop/cha_thumb_05_b.png",cha_thumb_06_b:"res/Global/cha_pop/cha_thumb_06_b.png",cha_thumb_07_b:"res/Global/cha_pop/cha_thumb_07_b.png",cha_thumb_08_b:"res/Global/cha_pop/cha_thumb_08_b.png",cha_thumb_09_b:"res/Global/cha_pop/cha_thumb_09_b.png",cha_thumb_10_b:"res/Global/cha_pop/cha_thumb_10_b.png",
cha_thumb_11_b:"res/Global/cha_pop/cha_thumb_11_b.png",cha_thumb_12_b:"res/Global/cha_pop/cha_thumb_12_b.png",cha_thumb_13_b:"res/Global/cha_pop/cha_thumb_13_b.png",cha_thumb_14_b:"res/Global/cha_pop/cha_thumb_14_b.png",cha_thumb_15_b:"res/Global/cha_pop/cha_thumb_15_b.png",cha_thumb_16_b:"res/Global/cha_pop/cha_thumb_16_b.png",cha_thumb_17_b:"res/Global/cha_pop/cha_thumb_17_b.png",cha_thumb_18_b:"res/Global/cha_pop/cha_thumb_18_b.png",cha_thumb_19_b:"res/Global/cha_pop/cha_thumb_19_b.png",cha_thumb_20_b:"res/Global/cha_pop/cha_thumb_20_b.png",
cha_thumb_21_b:"res/Global/cha_pop/cha_thumb_21_b.png",cha_thumb_22_b:"res/Global/cha_pop/cha_thumb_22_b.png",cha_thumb_23_b:"res/Global/cha_pop/cha_thumb_23_b.png",cha_thumb_24_b:"res/Global/cha_pop/cha_thumb_24_b.png",cha_thumb_25_b:"res/Global/cha_pop/cha_thumb_25_b.png",cha_thumb_26_b:"res/Global/cha_pop/cha_thumb_26_b.png",cha_thumb_27_b:"res/Global/cha_pop/cha_thumb_27_b.png",cha_thumb_28_b:"res/Global/cha_pop/cha_thumb_28_b.png",cha_thumb_29_b:"res/Global/cha_pop/cha_thumb_29_b.png",cha_thumb_30_b:"res/Global/cha_pop/cha_thumb_30_b.png",
motion_01_1:"res/Global/motion/motion_01_1.png",motion_01_2:"res/Global/motion/motion_01_2.png",motion_01_3:"res/Global/motion/motion_01_3.png",motion_02_1:"res/Global/motion/motion_02_1.png",motion_02_2:"res/Global/motion/motion_02_2.png",motion_02_3:"res/Global/motion/motion_02_3.png",motion_03_1:"res/Global/motion/motion_03_1.png",motion_03_2:"res/Global/motion/motion_03_2.png",motion_03_3:"res/Global/motion/motion_03_3.png",motion_04_1:"res/Global/motion/motion_04_1.png",motion_04_2:"res/Global/motion/motion_04_2.png",
motion_04_3:"res/Global/motion/motion_04_3.png",motion_05_1:"res/Global/motion/motion_05_1.png",motion_05_2:"res/Global/motion/motion_05_2.png",motion_05_3:"res/Global/motion/motion_05_3.png",motion_06_1:"res/Global/motion/motion_06_1.png",motion_06_2:"res/Global/motion/motion_06_2.png",motion_06_3:"res/Global/motion/motion_06_3.png",motion_07_1:"res/Global/motion/motion_07_1.png",motion_07_2:"res/Global/motion/motion_07_2.png",motion_07_3:"res/Global/motion/motion_07_3.png",motion_08_1:"res/Global/motion/motion_08_1.png",
motion_08_2:"res/Global/motion/motion_08_2.png",motion_08_3:"res/Global/motion/motion_08_3.png",motion_09_1:"res/Global/motion/motion_09_1.png",motion_09_2:"res/Global/motion/motion_09_2.png",motion_09_3:"res/Global/motion/motion_09_3.png",motion_10_1:"res/Global/motion/motion_10_1.png",motion_10_2:"res/Global/motion/motion_10_2.png",motion_10_3:"res/Global/motion/motion_10_3.png",motion_11_1:"res/Global/motion/motion_11_1.png",motion_11_2:"res/Global/motion/motion_11_2.png",motion_11_3:"res/Global/motion/motion_11_3.png",
motion_12_1:"res/Global/motion/motion_12_1.png",motion_12_2:"res/Global/motion/motion_12_2.png",motion_12_3:"res/Global/motion/motion_12_3.png",motion_13_1:"res/Global/motion/motion_13_1.png",motion_13_2:"res/Global/motion/motion_13_2.png",motion_13_3:"res/Global/motion/motion_13_3.png",motion_14_1:"res/Global/motion/motion_14_1.png",motion_14_2:"res/Global/motion/motion_14_2.png",motion_14_3:"res/Global/motion/motion_14_3.png",motion_15_1:"res/Global/motion/motion_15_1.png",motion_15_2:"res/Global/motion/motion_15_2.png",
motion_15_3:"res/Global/motion/motion_15_3.png",motion_01_b_1:"res/Global/motion/motion_01_b_1.png",motion_01_b_2:"res/Global/motion/motion_01_b_2.png",motion_01_b_3:"res/Global/motion/motion_01_b_3.png",motion_02_b_1:"res/Global/motion/motion_02_b_1.png",motion_02_b_2:"res/Global/motion/motion_02_b_2.png",motion_02_b_3:"res/Global/motion/motion_02_b_3.png",motion_03_b_1:"res/Global/motion/motion_03_b_1.png",motion_03_b_2:"res/Global/motion/motion_03_b_2.png",motion_03_b_3:"res/Global/motion/motion_03_b_3.png",
motion_04_b_1:"res/Global/motion/motion_04_b_1.png",motion_04_b_2:"res/Global/motion/motion_04_b_2.png",motion_04_b_3:"res/Global/motion/motion_04_b_3.png",motion_05_b_1:"res/Global/motion/motion_05_b_1.png",motion_05_b_2:"res/Global/motion/motion_05_b_2.png",motion_05_b_3:"res/Global/motion/motion_05_b_3.png",motion_06_b_1:"res/Global/motion/motion_06_b_1.png",motion_06_b_2:"res/Global/motion/motion_06_b_2.png",motion_06_b_3:"res/Global/motion/motion_06_b_3.png",motion_07_b_1:"res/Global/motion/motion_07_b_1.png",
motion_07_b_2:"res/Global/motion/motion_07_b_2.png",motion_07_b_3:"res/Global/motion/motion_07_b_3.png",motion_08_b_1:"res/Global/motion/motion_08_b_1.png",motion_08_b_2:"res/Global/motion/motion_08_b_2.png",motion_08_b_3:"res/Global/motion/motion_08_b_3.png",motion_09_b_1:"res/Global/motion/motion_09_b_1.png",motion_09_b_2:"res/Global/motion/motion_09_b_2.png",motion_09_b_3:"res/Global/motion/motion_09_b_3.png",motion_10_b_1:"res/Global/motion/motion_10_b_1.png",motion_10_b_2:"res/Global/motion/motion_10_b_2.png",
motion_10_b_3:"res/Global/motion/motion_10_b_3.png",motion_11_b_1:"res/Global/motion/motion_11_b_1.png",motion_11_b_2:"res/Global/motion/motion_11_b_2.png",motion_11_b_3:"res/Global/motion/motion_11_b_3.png",motion_12_b_1:"res/Global/motion/motion_12_b_1.png",motion_12_b_2:"res/Global/motion/motion_12_b_2.png",motion_12_b_3:"res/Global/motion/motion_12_b_3.png",motion_13_b_1:"res/Global/motion/motion_13_b_1.png",motion_13_b_2:"res/Global/motion/motion_13_b_2.png",motion_13_b_3:"res/Global/motion/motion_13_b_3.png",
motion_14_b_1:"res/Global/motion/motion_14_b_1.png",motion_14_b_2:"res/Global/motion/motion_14_b_2.png",motion_14_b_3:"res/Global/motion/motion_14_b_3.png",motion_15_b_1:"res/Global/motion/motion_15_b_1.png",motion_15_b_2:"res/Global/motion/motion_15_b_2.png",motion_15_b_3:"res/Global/motion/motion_15_b_3.png",sadness_1:"res/Scene/LoveRedLine/sadness_1.png",sadness_2:"res/Scene/LoveRedLine/sadness_2.png",sadness_3:"res/Scene/LoveRedLine/sadness_3.png",triangle_green:"res/Scene/LoveRedLine/triangle_green.png",
triangle_beige:"res/Scene/LoveRedLine/triangle_beige.png",couple:"res/Sound/couple.mp3",single:"res/Sound/single.mp3",sound_normal_1:"res/Sound/normal_1.mp3"},g_LoveRedLineRes=[];for(i in LoveRedLineRes)g_LoveRedLineRes.push(LoveRedLineRes[i]);
var RussianRouletteRes={main_bullet:"res/Scene/RussianRoulette/main/bullet.png",main_bullet_marking:"res/Scene/RussianRoulette/main/bullet_marking.png",main_tutorial_top:"res/Scene/RussianRoulette/main/main_tutorial_top.png",main_tutorial_bottom:"res/Scene/RussianRoulette/main/main_tutorial_bottom.png",main_start_btn:"res/Scene/RussianRoulette/main/start_btn.png",main_info:"res/Scene/RussianRoulette/main/info.png",setting_bullet:"res/Scene/RussianRoulette/setting/bullet_108.png",setting_bullet_empty:"res/Scene/RussianRoulette/setting/bullet_empty_104.png",
setting_magazine_bg:"res/Scene/RussianRoulette/setting/magazine_bg.png",setting_tutorial_top:"res/Scene/RussianRoulette/setting/setting_tutorial_top.png",animation_shot_dim1:"res/Scene/RussianRoulette/animation/shot_dim_1.png",animation_shot_dim2:"res/Scene/RussianRoulette/animation/shot_dim_2.png",animation_shot_dim3:"res/Scene/RussianRoulette/animation/shot_dim_3.png",animation_shot_dim4:"res/Scene/RussianRoulette/animation/shot_dim_4.png",animation_shot_gun1:"res/Scene/RussianRoulette/animation/shot_gun_1.png",
animation_shot_gun2:"res/Scene/RussianRoulette/animation/shot_gun_2.png",animation_shot_gun3:"res/Scene/RussianRoulette/animation/shot_gun_3.png",animation_shot_gun4:"res/Scene/RussianRoulette/animation/shot_gun_4.png",animation_shot_gun4_1:"res/Scene/RussianRoulette/animation/shot_gun_4_1.png",animation_clear1:"res/Scene/RussianRoulette/animation/clear01.png",animation_clear2:"res/Scene/RussianRoulette/animation/clear02.png",animation_clear3:"res/Scene/RussianRoulette/animation/clear03.png",animation_clear4:"res/Scene/RussianRoulette/animation/clear04.png",
animation_clear5:"res/Scene/RussianRoulette/animation/clear05.png",animation_clear6:"res/Scene/RussianRoulette/animation/clear06.png",animation_clear7:"res/Scene/RussianRoulette/animation/clear07.png",animation_clear8:"res/Scene/RussianRoulette/animation/clear08.png",animation_clear9:"res/Scene/RussianRoulette/animation/clear09.png",animation_clear10:"res/Scene/RussianRoulette/animation/clear10.png",animation_clear11:"res/Scene/RussianRoulette/animation/clear11.png",animation_clear12:"res/Scene/RussianRoulette/animation/clear12.png",
animation_clear13:"res/Scene/RussianRoulette/animation/clear13.png",animation_clear14:"res/Scene/RussianRoulette/animation/clear14.png",animation_clear15:"res/Scene/RussianRoulette/animation/clear15.png",animation_clear16:"res/Scene/RussianRoulette/animation/clear16.png",animation_clear17:"res/Scene/RussianRoulette/animation/clear17.png",animation_clear18:"res/Scene/RussianRoulette/animation/clear18.png",animation_clear19:"res/Scene/RussianRoulette/animation/clear19.png",animation_clear20:"res/Scene/RussianRoulette/animation/clear20.png",
animation_clear21:"res/Scene/RussianRoulette/animation/clear21.png",animation_out1:"res/Scene/RussianRoulette/animation/out01.png",animation_out2:"res/Scene/RussianRoulette/animation/out02.png",animation_out3:"res/Scene/RussianRoulette/animation/out03.png",animation_down7:"res/Scene/RussianRoulette/animation/down_007.png",animation_down8:"res/Scene/RussianRoulette/animation/down_008.png",animation_down9:"res/Scene/RussianRoulette/animation/down_009.png",animation_down10:"res/Scene/RussianRoulette/animation/down_010.png",
animation_down11:"res/Scene/RussianRoulette/animation/down_011.png",animation_down12:"res/Scene/RussianRoulette/animation/down_012.png",animation_down13:"res/Scene/RussianRoulette/animation/down_013.png",animation_down14:"res/Scene/RussianRoulette/animation/down_014.png",animation_down15:"res/Scene/RussianRoulette/animation/down_015.png",animation_up7:"res/Scene/RussianRoulette/animation/up_007.png",animation_up8:"res/Scene/RussianRoulette/animation/up_008.png",animation_up9:"res/Scene/RussianRoulette/animation/up_009.png",
animation_up10:"res/Scene/RussianRoulette/animation/up_010.png",animation_up11:"res/Scene/RussianRoulette/animation/up_011.png",animation_up12:"res/Scene/RussianRoulette/animation/up_012.png",animation_up13:"res/Scene/RussianRoulette/animation/up_013.png",animation_up14:"res/Scene/RussianRoulette/animation/up_014.png",animation_up15:"res/Scene/RussianRoulette/animation/up_015.png",sound_magazine_on_off:"res/Sound/magazine_on_off.mp3",sound_revolver_shuffle:"res/Sound/revolver_shuffle.mp3",sound_bang:"res/Sound/bang.mp3",
sound_no_bang:"res/Sound/no_bang.mp3",sound_empty_gun:"res/Sound/empty_gun.mp3",sound_clear:"res/Sound/clear.mp3",sound_sorry:"res/Sound/sorry.mp3"},g_RussianRouletteRes=[];for(i in RussianRouletteRes)g_RussianRouletteRes.push(RussianRouletteRes[i]);
var SortilegeRes={icon_bom_off:"res/Scene/Sortilege/main/bom_off.png",icon_bom_on:"res/Scene/Sortilege/main/bom_on.png",icon_kuji_off:"res/Scene/Sortilege/main/kuji_off.png",icon_kuji_on:"res/Scene/Sortilege/main/kuji_on.png",icon_gacha_off:"res/Scene/Sortilege/main/gacha_off.png",icon_gacha_on:"res/Scene/Sortilege/main/gacha_on.png",anim_bomb:"res/Scene/Sortilege/animation/bomb.png",anim_kuji:"res/Scene/Sortilege/animation/kuji.png",result_atari_bg:"res/Scene/Sortilege/result/atari_bg.png",result_atari_txt:"res/Scene/Sortilege/result/atari_txt.png",
result_gacha_ball_off:"res/Scene/Sortilege/result/gacha_ball_off.png",result_gacha_ball_on:"res/Scene/Sortilege/result/gacha_ball_on.png",result_shaking:"res/Scene/Sortilege/result/shaking.png",animation_bomb_out001:"res/Scene/Sortilege/animation/bomb_out_001.png",animation_bomb_out002:"res/Scene/Sortilege/animation/bomb_out_002.png",animation_bomb_out003:"res/Scene/Sortilege/animation/bomb_out_003.png",animation_bomb_out004:"res/Scene/Sortilege/animation/bomb_out_004.png",animation_bomb_out005:"res/Scene/Sortilege/animation/bomb_out_005.png",
animation_bomb_out006:"res/Scene/Sortilege/animation/bomb_out_006.png",animation_bomb_out007:"res/Scene/Sortilege/animation/bomb_out_007.png",animation_bomb_out008:"res/Scene/Sortilege/animation/bomb_out_008.png",animation_bomb_out009:"res/Scene/Sortilege/animation/bomb_out_009.png",animation_bomb_out010:"res/Scene/Sortilege/animation/bomb_out_010.png",animation_bomb_out011:"res/Scene/Sortilege/animation/bomb_out_011.png",animation_bomb_out012:"res/Scene/Sortilege/animation/bomb_out_012.png",animation_bomb_out013:"res/Scene/Sortilege/animation/bomb_out_013.png",
animation_bomb_out014:"res/Scene/Sortilege/animation/bomb_out_014.png",animation_bomb_out015:"res/Scene/Sortilege/animation/bomb_out_015.png",animation_bomb_safe001:"res/Scene/Sortilege/animation/bomb_safe_001.png",animation_bomb_safe002:"res/Scene/Sortilege/animation/bomb_safe_002.png",animation_bomb_safe003:"res/Scene/Sortilege/animation/bomb_safe_003.png",animation_bomb_safe004:"res/Scene/Sortilege/animation/bomb_safe_004.png",animation_bomb_safe005:"res/Scene/Sortilege/animation/bomb_safe_005.png",
animation_bomb_safe006:"res/Scene/Sortilege/animation/bomb_safe_006.png",animation_bomb_safe007:"res/Scene/Sortilege/animation/bomb_safe_007.png",animation_bomb_safe008:"res/Scene/Sortilege/animation/bomb_safe_008.png",animation_bomb_safe009:"res/Scene/Sortilege/animation/bomb_safe_009.png",animation_bomb_safe010:"res/Scene/Sortilege/animation/bomb_safe_010.png",animation_bomb_safe011:"res/Scene/Sortilege/animation/bomb_safe_011.png",animation_bomb_safe012:"res/Scene/Sortilege/animation/bomb_safe_012.png",
animation_bomb_safe013:"res/Scene/Sortilege/animation/bomb_safe_013.png",animation_bomb_safe014:"res/Scene/Sortilege/animation/bomb_safe_014.png",animation_bomb_safe015:"res/Scene/Sortilege/animation/bomb_safe_015.png",animation_bomb_safe016:"res/Scene/Sortilege/animation/bomb_safe_016.png",animation_kuji001:"res/Scene/Sortilege/animation/kuji_001.png",animation_kuji002:"res/Scene/Sortilege/animation/kuji_002.png",animation_kuji003:"res/Scene/Sortilege/animation/kuji_003.png",animation_kuji004:"res/Scene/Sortilege/animation/kuji_004.png",
animation_kuji005:"res/Scene/Sortilege/animation/kuji_005.png",animation_kuji006:"res/Scene/Sortilege/animation/kuji_006.png",animation_kuji007:"res/Scene/Sortilege/animation/kuji_007.png",animation_kuji008:"res/Scene/Sortilege/animation/kuji_008.png",animation_kuji009:"res/Scene/Sortilege/animation/kuji_009.png",animation_kuji010:"res/Scene/Sortilege/animation/kuji_010.png",animation_gacha001:"res/Scene/Sortilege/animation/gacha_001.png",animation_gacha002:"res/Scene/Sortilege/animation/gacha_002.png",
animation_gacha003:"res/Scene/Sortilege/animation/gacha_003.png",animation_gacha004:"res/Scene/Sortilege/animation/gacha_004.png",animation_gacha005:"res/Scene/Sortilege/animation/gacha_005.png",animation_gacha006:"res/Scene/Sortilege/animation/gacha_006.png",animation_gacha007:"res/Scene/Sortilege/animation/gacha_007.png",animation_gacha008:"res/Scene/Sortilege/animation/gacha_008.png",animation_gacha009:"res/Scene/Sortilege/animation/gacha_009.png",animation_gacha010:"res/Scene/Sortilege/animation/gacha_010.png",
animation_gacha011:"res/Scene/Sortilege/animation/gacha_011.png",animation_gacha012:"res/Scene/Sortilege/animation/gacha_012.png",animation_gacha013:"res/Scene/Sortilege/animation/gacha_013.png",animation_gacha014:"res/Scene/Sortilege/animation/gacha_014.png",animation_gacha015:"res/Scene/Sortilege/animation/gacha_015.png",animation_gacha016:"res/Scene/Sortilege/animation/gacha_016.png",animation_gacha017:"res/Scene/Sortilege/animation/gacha_017.png",animation_gacha018:"res/Scene/Sortilege/animation/gacha_018.png",
animation_gacha019:"res/Scene/Sortilege/animation/gacha_019.png",sound_kuji_seleted:"res/Sound/kuji_seleted.mp3",sound_kuji_shaking:"res/Sound/kuji_shaking.mp3",sound_kuji_popup:"res/Sound/kuji_popup.mp3",sound_bomb:"res/Sound/bomb.mp3",sound_kuji_safe:"res/Sound/kuji_safe.mp3",sound_arrow_pointing:"res/Sound/arrow_pointing.mp3",sound_lever_gacha_ball:"res/Sound/lever_gacha_ball.mp3"},g_SortilegeRes=[];for(i in SortilegeRes)g_SortilegeRes.push(SortilegeRes[i]);
var MajorityVoteRes={main_vote_bg:"res/Scene/MajorityVote/main/bg.png",main_vote001:"res/Scene/MajorityVote/main/vote_001.png",main_vote002:"res/Scene/MajorityVote/main/vote_002.png",main_vote003:"res/Scene/MajorityVote/main/vote_003.png",main_vote004:"res/Scene/MajorityVote/main/vote_004.png",main_vote005:"res/Scene/MajorityVote/main/vote_005.png",main_vote006:"res/Scene/MajorityVote/main/vote_006.png",main_vote007:"res/Scene/MajorityVote/main/vote_007.png",main_vote008:"res/Scene/MajorityVote/main/vote_008.png",
main_vote009:"res/Scene/MajorityVote/main/vote_009.png",main_vote010:"res/Scene/MajorityVote/main/vote_010.png",main_vote011:"res/Scene/MajorityVote/main/vote_011.png",main_vote012:"res/Scene/MajorityVote/main/vote_012.png",main_vote013:"res/Scene/MajorityVote/main/vote_013.png",setting_camera:"res/Scene/MajorityVote/setting/camera1.png",setting_gallery:"res/Scene/MajorityVote/setting/gallery1.png",setting_image_btn:"res/Scene/MajorityVote/setting/image_btn.png",common_start_btn:"res/Scene/MajorityVote/common/start_btn.png",
common_photo_play_btn:"res/Scene/MajorityVote/common/photo_play_btn.png",common_text_play_btn:"res/Scene/MajorityVote/common/text_play_btn.png",common_text_list_btn:"res/Scene/MajorityVote/common/text_list_btn.png",common_photo_list_btn:"res/Scene/MajorityVote/common/photo_list_btn.png",common_delete_p:"res/Scene/MajorityVote/common/delete_p.png",common_img_cover:"res/Scene/MajorityVote/common/img_cover.png",common_user_icon:"res/Scene/MajorityVote/common/user_icon.png"},g_MajorityVoteRes=[];for(i in MajorityVoteRes)g_MajorityVoteRes.push(MajorityVoteRes[i]);
var GhostLegRes={cha_block:"res/Scene/Grouping/cha_block.png",main_start_btn:"res/Scene/GhostLeg/main/start_btn.png",main_simple_play_btn:"res/Scene/GhostLeg/main/simple_play_btn.png",main_setting_play_btn:"res/Scene/GhostLeg/main/setting_play_btn.png",main_simple_list_btn:"res/Scene/GhostLeg/main/simple_list_btn.png",main_setting_list_btn:"res/Scene/GhostLeg/main/setting_list_btn.png",main_bg:"res/Scene/GhostLeg/main/bg.png",main_001:"res/Scene/GhostLeg/main/001.png",main_002:"res/Scene/GhostLeg/main/002.png",
main_003:"res/Scene/GhostLeg/main/003.png",main_004:"res/Scene/GhostLeg/main/004.png",main_005:"res/Scene/GhostLeg/main/005.png",main_006:"res/Scene/GhostLeg/main/006.png",main_007:"res/Scene/GhostLeg/main/007.png",main_008:"res/Scene/GhostLeg/main/008.png",main_009:"res/Scene/GhostLeg/main/009.png",main_010:"res/Scene/GhostLeg/main/010.png",main_011:"res/Scene/GhostLeg/main/011.png",setting_atari_160:"res/Scene/GhostLeg/setting/atari_160.png",setting_delete_off:"res/Scene/GhostLeg/setting/delete_off.png",
setting_delete_on:"res/Scene/GhostLeg/setting/delete_on.png",setting_draw_off:"res/Scene/GhostLeg/setting/draw_off.png",setting_draw_on:"res/Scene/GhostLeg/setting/draw_on.png",setting_random_off:"res/Scene/GhostLeg/setting/random_off.png",setting_random_on:"res/Scene/GhostLeg/setting/random_on.png",setting_reset_off:"res/Scene/GhostLeg/setting/reset_off.png",setting_reset_on:"res/Scene/GhostLeg/setting/reset_on.png",result_amd_selected:"res/Scene/GhostLeg/result/amd_selected.png",result_amd_01_off:"res/Scene/GhostLeg/result/amd_01_off.png",
result_amd_02_off:"res/Scene/GhostLeg/result/amd_02_off.png",result_amd_03_off:"res/Scene/GhostLeg/result/amd_03_off.png",result_amd_04_off:"res/Scene/GhostLeg/result/amd_04_off.png",result_amd_05_off:"res/Scene/GhostLeg/result/amd_05_off.png",result_amd_06_off:"res/Scene/GhostLeg/result/amd_06_off.png",result_amd_07_off:"res/Scene/GhostLeg/result/amd_07_off.png",result_amd_08_off:"res/Scene/GhostLeg/result/amd_08_off.png",result_amd_09_off:"res/Scene/GhostLeg/result/amd_09_off.png",result_amd_10_off:"res/Scene/GhostLeg/result/amd_10_off.png",
result_amd_11_off:"res/Scene/GhostLeg/result/amd_11_off.png",result_amd_12_off:"res/Scene/GhostLeg/result/amd_12_off.png",result_amd_13_off:"res/Scene/GhostLeg/result/amd_13_off.png",result_amd_14_off:"res/Scene/GhostLeg/result/amd_14_off.png",result_amd_15_off:"res/Scene/GhostLeg/result/amd_15_off.png",result_amd_01_on:"res/Scene/GhostLeg/result/amd_01_on.png",result_amd_02_on:"res/Scene/GhostLeg/result/amd_02_on.png",result_amd_03_on:"res/Scene/GhostLeg/result/amd_03_on.png",result_amd_04_on:"res/Scene/GhostLeg/result/amd_04_on.png",
result_amd_05_on:"res/Scene/GhostLeg/result/amd_05_on.png",result_amd_06_on:"res/Scene/GhostLeg/result/amd_06_on.png",result_amd_07_on:"res/Scene/GhostLeg/result/amd_07_on.png",result_amd_08_on:"res/Scene/GhostLeg/result/amd_08_on.png",result_amd_09_on:"res/Scene/GhostLeg/result/amd_09_on.png",result_amd_10_on:"res/Scene/GhostLeg/result/amd_10_on.png",result_amd_11_on:"res/Scene/GhostLeg/result/amd_11_on.png",result_amd_12_on:"res/Scene/GhostLeg/result/amd_12_on.png",result_amd_13_on:"res/Scene/GhostLeg/result/amd_13_on.png",
result_amd_14_on:"res/Scene/GhostLeg/result/amd_14_on.png",result_amd_15_on:"res/Scene/GhostLeg/result/amd_15_on.png",cha_pop_01_off:"res/Global/cha_pop/cha_pop_01_off.png",cha_pop_01_on:"res/Global/cha_pop/cha_pop_01_on.png",cha_pop_02_off:"res/Global/cha_pop/cha_pop_02_off.png",cha_pop_02_on:"res/Global/cha_pop/cha_pop_02_on.png",cha_pop_03_off:"res/Global/cha_pop/cha_pop_03_off.png",cha_pop_03_on:"res/Global/cha_pop/cha_pop_03_on.png",cha_pop_04_off:"res/Global/cha_pop/cha_pop_04_off.png",cha_pop_04_on:"res/Global/cha_pop/cha_pop_04_on.png",
cha_pop_05_off:"res/Global/cha_pop/cha_pop_05_off.png",cha_pop_05_on:"res/Global/cha_pop/cha_pop_05_on.png",cha_pop_06_off:"res/Global/cha_pop/cha_pop_06_off.png",cha_pop_06_on:"res/Global/cha_pop/cha_pop_06_on.png",cha_pop_07_off:"res/Global/cha_pop/cha_pop_07_off.png",cha_pop_07_on:"res/Global/cha_pop/cha_pop_07_on.png",cha_pop_08_off:"res/Global/cha_pop/cha_pop_08_off.png",cha_pop_08_on:"res/Global/cha_pop/cha_pop_08_on.png",cha_pop_09_off:"res/Global/cha_pop/cha_pop_09_off.png",cha_pop_09_on:"res/Global/cha_pop/cha_pop_09_on.png",
cha_pop_10_off:"res/Global/cha_pop/cha_pop_10_off.png",cha_pop_10_on:"res/Global/cha_pop/cha_pop_10_on.png",cha_pop_11_off:"res/Global/cha_pop/cha_pop_11_off.png",cha_pop_11_on:"res/Global/cha_pop/cha_pop_11_on.png",cha_pop_12_off:"res/Global/cha_pop/cha_pop_12_off.png",cha_pop_12_on:"res/Global/cha_pop/cha_pop_12_on.png",cha_pop_13_off:"res/Global/cha_pop/cha_pop_13_off.png",cha_pop_13_on:"res/Global/cha_pop/cha_pop_13_on.png",cha_pop_14_off:"res/Global/cha_pop/cha_pop_14_off.png",cha_pop_14_on:"res/Global/cha_pop/cha_pop_14_on.png",
cha_pop_15_off:"res/Global/cha_pop/cha_pop_15_off.png",cha_pop_15_on:"res/Global/cha_pop/cha_pop_15_on.png",cha_pop_16_off:"res/Global/cha_pop/cha_pop_16_off.png",cha_pop_16_on:"res/Global/cha_pop/cha_pop_16_on.png",cha_thumb_01:"res/Global/cha_pop/cha_thumb_01.png",cha_thumb_02:"res/Global/cha_pop/cha_thumb_02.png",cha_thumb_03:"res/Global/cha_pop/cha_thumb_03.png",cha_thumb_04:"res/Global/cha_pop/cha_thumb_04.png",cha_thumb_05:"res/Global/cha_pop/cha_thumb_05.png",cha_thumb_06:"res/Global/cha_pop/cha_thumb_06.png",
cha_thumb_07:"res/Global/cha_pop/cha_thumb_07.png",cha_thumb_08:"res/Global/cha_pop/cha_thumb_08.png",cha_thumb_09:"res/Global/cha_pop/cha_thumb_09.png",cha_thumb_10:"res/Global/cha_pop/cha_thumb_10.png",cha_thumb_11:"res/Global/cha_pop/cha_thumb_11.png",cha_thumb_12:"res/Global/cha_pop/cha_thumb_12.png",cha_thumb_13:"res/Global/cha_pop/cha_thumb_13.png",cha_thumb_14:"res/Global/cha_pop/cha_thumb_14.png",cha_thumb_15:"res/Global/cha_pop/cha_thumb_15.png",cha_thumb_16:"res/Global/cha_pop/cha_thumb_16.png",
cha_thumb_17:"res/Global/cha_pop/cha_thumb_17.png",cha_thumb_18:"res/Global/cha_pop/cha_thumb_18.png",cha_thumb_19:"res/Global/cha_pop/cha_thumb_19.png",cha_thumb_20:"res/Global/cha_pop/cha_thumb_20.png",cha_thumb_21:"res/Global/cha_pop/cha_thumb_21.png",cha_thumb_22:"res/Global/cha_pop/cha_thumb_22.png",cha_thumb_23:"res/Global/cha_pop/cha_thumb_23.png",cha_thumb_24:"res/Global/cha_pop/cha_thumb_24.png",cha_thumb_25:"res/Global/cha_pop/cha_thumb_25.png",cha_thumb_26:"res/Global/cha_pop/cha_thumb_26.png",
cha_thumb_27:"res/Global/cha_pop/cha_thumb_27.png",cha_thumb_28:"res/Global/cha_pop/cha_thumb_28.png",cha_thumb_29:"res/Global/cha_pop/cha_thumb_29.png",cha_thumb_30:"res/Global/cha_pop/cha_thumb_30.png",sound_normal_1:"res/Sound/normal_1.mp3",sound_character_moving:"res/Sound/character_moving.mp3",sound_result_selected:"res/Sound/result_selected.mp3"},g_GhostLegRes=[];for(i in GhostLegRes)g_GhostLegRes.push(GhostLegRes[i]);
var PolygraphRes={azusa:{type:"font",name:"AzusaHyuga",srcs:["res/Font/AzusaHyuga.eot","res/Font/AzusaHyuga.ttf"]},prossece:"res/Scene/Polygraph/prossece_bar.png",maininfo:"res/Scene/Polygraph/main_info.png",thumbprint:"res/Scene/Polygraph/thumbprint.png",lie_result01:"res/Scene/Polygraph/151215_lie_result01.png",lie_result02:"res/Scene/Polygraph/151215_lie_result02.png",lie_result03:"res/Scene/Polygraph/151215_lie_result03.png",lie_result04:"res/Scene/Polygraph/151215_lie_result04.png",lie_result05:"res/Scene/Polygraph/151215_lie_result05.png",
lie_result06:"res/Scene/Polygraph/151215_lie_result06.png",lie_result07:"res/Scene/Polygraph/151215_lie_result07.png",lie_result08:"res/Scene/Polygraph/151215_lie_result08.png",lie_result09:"res/Scene/Polygraph/151215_lie_result09.png",lie_result10:"res/Scene/Polygraph/151215_lie_result10.png",lie_result11:"res/Scene/Polygraph/151215_lie_result11.png",lie_result12:"res/Scene/Polygraph/151215_lie_result12.png",lie_result13:"res/Scene/Polygraph/151215_lie_result13.png",process:"res/Sound/process.mp3",
true_1:"res/Sound/true_1.mp3",true_2:"res/Sound/true_2.mp3",true_3:"res/Sound/true_3.mp3",normal_1:"res/Sound/normal_1.mp3",normal_3:"res/Sound/normal_3.mp3",lie_1:"res/Sound/lie_1.mp3",lie_2:"res/Sound/lie_2.mp3",lie_3:"res/Sound/lie_3.mp3"},g_PolygraphRes=[];for(i in PolygraphRes)g_PolygraphRes.push(PolygraphRes[i]);
var ADDutchpayRes={bg:"res/Scene/ADDutchpay/main_bg.png",start_btn:"res/Scene/ADDutchpay/start_btn.png",angel_button:"res/Scene/ADDutchpay/angel_button.png",angel_popup:"res/Scene/ADDutchpay/angel_popup.png",normal_button:"res/Scene/ADDutchpay/normal_button.png",normal_popup:"res/Scene/ADDutchpay/normal_popup.png",devil_button:"res/Scene/ADDutchpay/devil_button.png",devil_popup:"res/Scene/ADDutchpay/devil_popup.png",angel_list_btn:"res/Scene/ADDutchpay/angel_list_btn.png",angel_play_btn:"res/Scene/ADDutchpay/angel_play_btn.png",
equal_list_btn:"res/Scene/ADDutchpay/equal_list_btn.png",equal_play_btn:"res/Scene/ADDutchpay/equal_play_btn.png",random_list_btn:"res/Scene/ADDutchpay/random_list_btn.png",random_play_btn:"res/Scene/ADDutchpay/random_play_btn.png",roundrect_mask_640X700:"res/Scene/ADDutchpay/roundrect_mask_640X700.png",roundrect_mask_640X960:"res/Scene/ADDutchpay/roundrect_mask_640X960.png",top_1:"res/Scene/ADDutchpay/top_1.png",top_2:"res/Scene/ADDutchpay/top_2.png",top_3:"res/Scene/ADDutchpay/top_3.png",top_4:"res/Scene/ADDutchpay/top_4.png",
top_5:"res/Scene/ADDutchpay/top_5.png",top_6:"res/Scene/ADDutchpay/top_6.png",top_7:"res/Scene/ADDutchpay/top_7.png",top_8:"res/Scene/ADDutchpay/top_8.png",top_9:"res/Scene/ADDutchpay/top_9.png",top_10:"res/Scene/ADDutchpay/top_10.png",top_11:"res/Scene/ADDutchpay/top_11.png",top_12:"res/Scene/ADDutchpay/top_12.png",top_13:"res/Scene/ADDutchpay/top_13.png",top_14:"res/Scene/ADDutchpay/top_14.png",top_15:"res/Scene/ADDutchpay/top_15.png",angel_popup_sound:"res/Sound/angel_popup.mp3",human_popup_sound:"res/Sound/human_popup.mp3",
devil_popup_sound:"res/Sound/devil_popup.mp3"},g_ADDutchpayRes=[];for(i in ADDutchpayRes)g_ADDutchpayRes.push(ADDutchpayRes[i]);var HistorysListView=cc.Node.extend({listView:null,ctor:function(a,b,c,d,e,f,g){this._super();var h=this;this.listView=new ccui.ListView;this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);this.listView.setTouchEnabled(!0);this.listView.setBounceEnabled(!0);this.listView.setContentSize(cc.size(cc.winSize.width,a));this.listView.setAnchorPoint(0,1);this.listView.setPosition(0,a);this.listView.setBreakPoint(100);this.addChild(this.listView);if(a=DataManager.instance().getHistory(b)){for(var k=
a.size()-1;-1<k;k--){var m=new ccui.Layout,l=new ccui.Layout;l.setTouchEnabled(!0);l.setContentSize(cc.winSize.width,156);l.setUserData(a.get(k));m.setContentSize(cc.winSize.width,l.getContentSize().height);m.addChild(l);var p=new ccui.Layout;p.setContentSize(cc.winSize.width+302,1);p.setAnchorPoint(0,0);p.setPosition(0,0);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color(255,243,191,255));l.addChild(p);p=new ccui.Layout;p.setContentSize(cc.winSize.width,156);p.setAnchorPoint(0,
0);p.setPosition(302,0);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color(111,205,193,255));p.setTag(99);p.setVisible(!1);l.addChild(p);var n=(l.getContentSize().height-80)/2,p=1===a.get(k).data.mode?c:d,p=new cc.Sprite(p);p.setAnchorPoint(0,1);p.setPosition(30,l.getContentSize().height-n);l.addChild(p);p=new cc.LabelTTF(""+a.get(k).month+"."+a.get(k).day);p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(30);p.setFontFillColor(cc.color(255,243,191));p.setScanPhixelRGB();
p.setAnchorPoint(1,1);p.setPosition(l.getContentSize().width-30,l.getContentSize().height-n);l.addChild(p);var r=new cc.LabelTTF(a.get(k).data.title);r.setFontName(GAME_FONT.PRO_W6);r.setFontSize(40);r.setFontFillColor(cc.color(255,243,191));r.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);r.setScanPhixelRGB();r.setContentSize(l.getContentSize().width-55-30-30-30-30-p.getContentSize().width,r.getContentSize().height);r.setAnchorPoint(0,1);r.setPosition(115,l.getContentSize().height-n);r.setTextWidth(l.getContentSize().width-
55-30-30-30-30-p.getContentSize().width);l.addChild(r);str="";for(j=n=0;j<a.get(k).data.groups.length;j++)for(var q=n=0;q<a.get(k).data.groups[j].members.length;q++){if(1==a.get(k).data.mode&&1==g){var s=DataManager.instance().getPhotoHistory(a.get(k).data.groups[j].members[q].name,q);null!=s&&""!=s&&(this.setPhotoView(s,55,l,n,r.getPositionY()-r.getFontSize()-10),n++)}s=a.get(k).data.groups[j].members[q];if(s.rStr){if(1==a.get(k).data.mode){for(var t=[],w=0;w<a.get(k).data.groups.length;w++)for(var u=
0;u<a.get(k).data.groups[w].members.length;u++)t.push(a.get(k).data.groups[w].members[u].rStr);if(j==a.get(k).data.groups.length-1&&q==a.get(k).data.groups[j].members.length-1){str+=t[s.rStrWithP];t=null;break}str+=t[s.rStrWithP]+"\u3001"}}else{if(j==a.get(k).data.groups.length-1&&q==a.get(k).data.groups[j].members.length-1){str+=s.name;break}str+=s.name+"\u3001"}}1==a.get(k).data.mode&&1==g||(n=new cc.LabelTTF(str),n.setFontName(GAME_FONT.PRO_W3),n.setFontSize(30),n.setFontFillColor(cc.color(255,
243,191)),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),n.setScanPhixelRGB(),n.setContentSize(l.getContentSize().width-55-30-30-30-30-p.getContentSize().width,n.getContentSize().height),n.setAnchorPoint(0,1),n.setPosition(115,r.getPositionY()-r.getFontSize()-10),n.setTextWidth(l.getContentSize().width-55-30-30-30-30-p.getContentSize().width),l.addChild(n));p=new ccui.Layout;p.setContentSize(150,l.getContentSize().height-1);p.setAnchorPoint(0,0);p.setPosition(l.getContentSize().width,1);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);
p.setBackGroundColor(cc.color(72,133,146,255));l.addChild(p);n=new ccui.Button(GlobalRes.history_replay_btn,GlobalRes.history_replay_btn);n.setAnchorPoint(0.5,1);n.setPosition(p.getContentSize().width/2,p.getContentSize().height-40);q=a.get(k).data.mode;s=[];for(j=0;j<a.get(k).data.groups.length;j++)s=s.concat(a.get(k).data.groups[j].members);n.setUserData({members:s,mode:q});n.addClickEventListener(function(a){e(l.getUserData().data.groups,a.getUserData().mode)});p.addChild(n);q=new cc.LabelTTF("\u3084\u308a\u76f4\u3057");
q.setFontName(GAME_FONT.PRO_W3);q.setFontSize(22);q.setFontFillColor(cc.color(255,243,191));q.setScanPhixelRGB();q.setAnchorPoint(0.5,1);q.setPosition(n.getPosition().x,n.getPosition().y-n.getContentSize().height-10);p.addChild(q);n=new ccui.Layout;n.setContentSize(2,l.getContentSize().height-1);n.setAnchorPoint(0,0.5);n.setPosition(l.getContentSize().width+p.getContentSize().width,l.getContentSize().height/2);n.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);n.setBackGroundColor(cc.color(72,133,
146,255));l.addChild(n);q=new cc.Sprite(GlobalRes.history_line);q.setAnchorPoint(0,0.5);q.setPosition(l.getContentSize().width+p.getContentSize().width,l.getContentSize().height/2);l.addChild(q);n=new ccui.Layout;n.setContentSize(150,l.getContentSize().height-1);n.setAnchorPoint(0,0);n.setPosition(l.getContentSize().width+p.getContentSize().width+q.getContentSize().width,1);n.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);n.setBackGroundColor(cc.color(72,133,146,255));l.addChild(n);p=new ccui.Button(GlobalRes.history_delete_btn,
GlobalRes.history_delete_btn);p.setAnchorPoint(0.5,1);p.setPosition(n.getContentSize().width/2,n.getContentSize().height-40);p.setUserData({time:a.get(k).time,item:m,mode:a.get(k).data.mode,name:a.get(k).data.groups[0].members[0].name});p.addClickEventListener(function(a){DataManager.instance().deleteHistory(b,a.getUserData().time);h.listView.removeLastItem();h.listView.removeItem(h.listView.getIndex(a.getUserData().item));var c=new ccui.Layout;c.setContentSize(cc.winSize.width,3<=h.listView.getItems().length?
250:0);h.listView.pushBackCustomItem(c);1==a.getUserData().mode&&1==g&&DataManager.instance().deletePhotoHistory(a.getUserData().name)});n.addChild(p);q=new cc.LabelTTF("\u524a\u9664");q.setFontName(GAME_FONT.PRO_W3);q.setFontSize(22);q.setFontFillColor(cc.color(255,243,191));q.setScanPhixelRGB();q.setAnchorPoint(0.5,1);q.setPosition(p.getPosition().x,p.getPosition().y-p.getContentSize().height-10);n.addChild(q);l.setAnchorPoint(0,0);l.setPosition(0,0);l.addTouchEventListener(function(a,b){switch(b){case ccui.Widget.TOUCH_BEGAN:a.isMoved=
!1;break;case ccui.Widget.TOUCH_MOVED:if(-100>a.getTouchBeganPosition().x-a.getTouchMovePosition().x){if(1==a.pos&&!a.isAction){a.isAction=!0;var c=function(){a.isAction=!1;a.pos=0},c=new cc.Sequence(new cc.MoveTo(0.2,{x:0,y:a.getPosition().y}),new cc.CallFunc(c));a.runAction(c);a.getChildByTag(99).setVisible(!1)}}else 100<a.getTouchBeganPosition().x-a.getTouchMovePosition().x&&(0==a.pos&&!a.isAction)&&(a.isAction=!0,c=function(){a.isAction=!1;a.pos=1;a.getChildByTag(99).setVisible(!0)},c=new cc.Sequence(new cc.MoveTo(0.2,
{x:-302,y:a.getPosition().y}),new cc.CallFunc(c)),a.runAction(c));break;case ccui.Widget.TOUCH_ENDED:if(!a.isMoved&&0==a.pos){var c=a.getUserData().data.groups,d=a.getUserData().year,e=a.getUserData().month,g=a.getUserData().day,d=d+","+e+","+g+" "+r.getString();f(c,d,a.getUserData().data.mode)}}});l.pos=0;l.isAction=!1;this.listView.pushBackDefaultItem();this.listView.pushBackCustomItem(m)}c=new ccui.Layout;c.setContentSize(cc.winSize.width,3<=a.size()?250:0);this.listView.pushBackCustomItem(c)}return!0},
setPhotoView:function(a,b,c,d,e){cc.loader.loadImg(a,{isCrossOrigin:!1},function(f,g){if(!(""==a||null==a)){var h=new cc.Texture2D;h.initWithElement(g);h.handleLoadedTexture();var k=new cc.Sprite;k.initWithTexture(h);k.setAnchorPoint(cc.p(0,1));k.setPosition(b+30+30+80*d,e);k.setScale(50/g.width,50/g.height);c.addChild(k)}})}});cc.LoadClientDataDelegate=cc.Class.extend({loadClientDataChanged:function(a,b,c,d){}});
cc.LoadClientData=cc.ControlButton.extend({_domInputSprite:null,_delegate:null,_maxFileCount:4,_text:"",_textColor:null,_maxLength:50,_adjustHeight:18,_edTxt:null,_edFontSize:14,_edFontName:"Arial",_tooltip:!1,_className:"LoadClientData",_canvas:null,_ctx:null,_this:null,ctor:function(a,b,c,d,e){cc.ControlButton.prototype.ctor.call(this);this.setContentSize(a);var f=this._domInputSprite=new cc.Sprite;f.draw=function(){};this.addChild(f);var g=this,h=this._edTxt=cc.newElement("input");h.type="file";
h.accept="image/*";g._maxFileCount=b;1<b&&(h.multiple="multiple");h.style.opacity=0;h.style.zIndex=1;h.style.width="100%";h.style.height="100%";cc._addEventListener(h,"touchmove",function(a){a.preventDefault()});cc._addEventListener(h,"change",function(){for(var a=0,b=[],c=[],d=this.files.length,e,f,h=0;h<d;h++){var s=new FileReader;e=this.files[h].type;f=this.files[h].size;s.onload=function(h){a++;var w=100,w=1E6>f?100:5E6>f?50:1E7>f?30:5E7>f?20:10;g.compress(h.target.result,d,a,b,c,e,w)};s.readAsDataURL(this.files[h])}});
cc.DOM.convert(f);f.dom.appendChild(h);f.dom.showTooltipDiv=!1;f.dom.style.left="-6px";f.dom.style.bottom="-6px";f.dom.style.width=a.width+"px";f.dom.style.height=a.height+"px";this._canvas=f.canvas;f.canvas.remove();this.initWithSizeAndBackgroundSprite(a,c)&&(d&&this.setBackgroundSpriteForState(d,cc.CONTROL_STATE_HIGHLIGHTED),e&&this.setBackgroundSpriteForState(e,cc.CONTROL_STATE_DISABLED))},compress:function(a,b,c,d,e,f,g){var h=this,k="image/jpeg";void 0!=f&&"image/png"==f&&(k="image/png");c=new Image;
c.onload=function(){var a=h.ifPhoto(this),c=0,f=0,n=this.width*(g/100),r=this.height*(g/100);if(1==a){var q=this.height,n=this.height*(g/100),r=this.width*(g/100);this.width>this.height?(n=Math.round(q*this.height/this.width),r=q,c=-Math.round((n-q)/2)):(r=Math.round(q*this.width/this.height),n=q,f=-Math.round((r-q)/2))}var s=90*a*Math.PI/180,q=h._canvas;q.width=n;q.height=r;var t=q.getContext("2d");t.clearRect(0,0,n,r);switch(a){case 0:t.drawImage(this,0,0,n,r);break;case 1:t.rotate(s);t.drawImage(this,
0,0,n+2*c,-r+2*c);break;case 2:t.rotate(s);t.drawImage(this,c,f,-n,-r);break;case 3:t.rotate(s),t.drawImage(this,c,f,-n,r)}var a=q.toDataURL(k,g/100),w={canvas:q,image:this};e.push(a);cc.loader.loadImg(a,{isCrossOrigin:!1},function(a,c){d.push(c);b==d.length&&h._delegate&&h._delegate.loadClientDataChanged&&h._delegate.loadClientDataChanged(h,d,e,w)})};c.src=a;c=null},ifPhoto:function(a){var b=0;if(a.width>a.height)for(var c=[4224,3168,3264,2448,2594,1936,1280,960],d=0;d<c.length/2;d++)if(a.width==
c[2*d]&&a.height==c[2*d+1]){b=1;break}return b},setFont:function(a,b){this._edFontSize=b;this._edFontName=a;this._setFontToEditBox()},_setFont:function(a){if(a=cc.LabelTTF._fontStyleRE.exec(a))this._edFontSize=parseInt(a[1]),this._edFontName=a[2],this._setFontToEditBox()},setFontName:function(a){this._edFontName=a;this._setFontToEditBox()},setFontSize:function(a){this._edFontSize=a;this._setFontToEditBox()},_setFontToEditBox:function(){this._edTxt.style.fontFamily=this._edFontName;this._edTxt.style.fontSize=
this._edFontSize+"px"},setText:function(a){cc.log("Please use the setString");this.setString(a)},setString:function(a){null!=a&&(this._edTxt.value=a,this._edTxt.style.color=cc.colorToHex(this._textColor))},setFontColor:function(a){this._textColor=a},getText:function(){cc.log("Please use the getString");return this._edTxt.value},getString:function(){return this._edTxt.value},initWithSizeAndBackgroundSprite:function(a,b){return this.initWithBackgroundSprite(b)?(this._domInputSprite.x=3,this._domInputSprite.y=
3,this.setZoomOnTouchDown(!1),this.setPreferredSize(a),this.y=this.x=0,this._addTargetWithActionForControlEvent(this,this.touchDownAction,cc.CONTROL_EVENT_TOUCH_UP_INSIDE),!0):!1},setDelegate:function(a){this._delegate=a},setMaxImageCount:function(a){this._maxFileCount=a},touchDownAction:function(a,b){},initWithBackgroundColor:function(a,b){this._edWidth=a.width;this.dom.style.width=this._edWidth.toString()+"px";this._edHeight=a.height;this.dom.style.height=this._edHeight.toString()+"px";this.dom.style.backgroundColor=
cc.colorToHex(b)}});var _p=cc.LoadClientData.prototype;cc.defineGetterSetter(_p,"font",null,_p._setFont);cc.defineGetterSetter(_p,"fontName",null,_p.setFontName);cc.defineGetterSetter(_p,"fontSize",null,_p.setFontSize);cc.defineGetterSetter(_p,"fontColor",null,_p.setFontColor);cc.defineGetterSetter(_p,"string",_p.getString,_p.setString);cc.defineGetterSetter(_p,"delegate",null,_p.setDelegate);cc.defineGetterSetter(_p,"maxImageCount",null,_p.setMaxImageCount);_p=null;
cc.LoadClientData.getRect=function(a){var b=a.getContentSize(),b=cc.rect(0,0,b.width,b.height);return cc.rectApplyAffineTransform(b,a.getNodeToWorldTransform())};cc.LoadClientData.create=function(a,b,c,d,e){return new cc.LoadClientData(a,b,c,d,e)};cc.LabelP=cc.ControlButton.extend({_domInputSprite:null,_text:"",_textColor:null,_maxLength:50,_adjustHeight:18,_edTxt:null,_edFontSize:14,_edFontName:"Arial",_tooltip:!1,_className:"LabelP",ctor:function(a,b,c,d,e){cc.ControlButton.prototype.ctor.call(this);this._edFontSize=b;this._textColor=cc.color.WHITE;a||(a="");var f=cc.size(a.length*this._edFontSize,b);this.setContentSize(f);var g=this._domInputSprite=new cc.Sprite;g.draw=function(){};this.addChild(g,-100);var h=this._edTxt=cc.newElement("p");
h.innerText=a;h.align=e==cc.TEXT_ALIGNMENT_LEFT?"left":e==cc.TEXT_ALIGNMENT_RIGHT?"right":"center";h.style.fontSize=this._edFontSize+"px";h.style.color="#000000";h.style.border=0;h.style.background="transparent";h.style.width="100%";h.style.height="100%";h.style.active=0;h.style.padding="0px";h.style.marginLeft="0px";h.style.marginRight="0px";h.style.marginTop=-(b/4)+"px";h.style.marginBottom="0px";c&&(this._textColor=c,this._edTxt.style.color=cc.colorToHex(c));d&&(this._edFontName=d,this._setFontToLavelP());
cc.DOM.convert(g);g.dom.appendChild(h);g.dom.showTooltipDiv=!1;g.dom.style.width=f.width+"px";g.dom.style.height=f.height+"px";g.canvas.remove()},setFont:function(a,b){this._edFontSize=b;this._edFontName=a;this._setFontToLavelP()},_setFont:function(a){if(a=cc.LabelTTF._fontStyleRE.exec(a))this._edFontSize=parseInt(a[1]),this._edFontName=a[2],this._setFontToLavelP()},setFontName:function(a){this._edFontName=a;this._setFontToLavelP()},setFontSize:function(a){this._edFontSize=a;this.setContentSize(cc.size((this._edTxt.innerText.length+
1)*this._edFontSize,this._edFontSize));this._setFontToLavelP()},getFontSize:function(){return this._edFontSize},_setFontToLavelP:function(){this._edTxt.style.fontFamily=this._edFontName;this._edTxt.style.fontSize=this._edFontSize+"px"},setText:function(a){cc.log("Please use the setString");this.setString(a)},setString:function(a){this._edTxt.innerText=a;this._edTxt.style.color=cc.colorToHex(this._textColor)},setFontColor:function(a){this._textColor=a;this._edTxt.style.color=cc.colorToHex(a)},getMaxLength:function(){return this._maxLength},
getText:function(){cc.log("Please use the getString");return this._edTxt.innerText},getString:function(){return this._edTxt.innerText},setTextWidth:function(a){var b=!1;for(this.getContentSize();this.getContentSize().width>a;){b=!0;break}b&&(a=parseInt(a/this._edFontSize),this.setString(this.getString().substring(0,a)+"..."))}});_p=cc.LabelP.prototype;cc.defineGetterSetter(_p,"font",null,_p._setFont);cc.defineGetterSetter(_p,"fontName",null,_p.setFontName);
cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize);cc.defineGetterSetter(_p,"fontColor",null,_p.setFontColor);cc.defineGetterSetter(_p,"string",_p.getString,_p.setString);_p=null;cc.LabelP.getRect=function(a){var b=a.getContentSize(),b=cc.rect(0,0,b.width,b.height);return cc.rectApplyAffineTransform(b,a.getNodeToWorldTransform())};cc.LabelP.create=function(a,b,c,d,e){return new cc.LabelP(a,b,c,d,e)};var MainModeBtn=cc.Node.extend({TAG_MASK:1,TAG_Sim:2,TAG_Setting:3,SimText:null,SimTextSub:null,SimSelector:null,SettingText:null,SettingTextSub:null,SettingSelector:null,ResSimple:null,ResSetting:null,ctor:function(a,b,c,d,e,f,g,h,k){this._super();this.SimText=g;this.SimTextSub=h;this.SettingText=d;this.SettingTextSub=e;this.SimSelector=a;this.SettingSelector=b;this.ResSimple=k;this.ResSetting=f;var m=new Mask;m.setTag(this.TAG_MASK);m.close();this.addChild(m);var l=new ccui.Layout;l.setContentSize(cc.winSize.width,
cc.winSize.height);l.setAnchorPoint(0,0);l.setTag(4);l.setTouchEnabled(!1);l.addTouchEventListener(function(){if(0!=p.getChildrenCount()){var a=p.getChildByTag(1),b=p.getChildByTag(2);a.runAction(new cc.Sequence(new cc.MoveBy(0.2,cc.p(0,-380)),new cc.callFunc(function(){p.removeAllChildrenWithCleanup(!0);m.close()},this)));b.runAction(new cc.MoveBy(0.2,cc.p(0,-222)));l.setTouchEnabled(!1)}});this.addChild(l);var p=new ccui.Button(c,c);p.setAnchorPoint(cc.p(1,0));p.setPosition(cc.p(cc.winSize.width-
22,30));var n=this;p.addClickEventListener(function(){n.settingBtnAnim(p)});this.addChild(p);return!0},settingBtnAnim:function(a){var b,c,d=a.getBoundingBox().width,e=a.getBoundingBox().height;if(0==a.getChildrenCount()){a.getParent().getChildByTag(4).setTouchEnabled(!0);a.setTouchEnabled(!1);this.getChildByTag(this.TAG_MASK).open();b=new ccui.Button(this.ResSimple);b.setTag(1);b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(d/2,e/2);b.addClickEventListener(this.SimSelector);c=new cc.LabelTTF(this.SimText);
c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,b.getContentSize().height/2);b.addChild(c);c=new cc.LabelTTF(this.SimTextSub);c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(28);c.setFontFillColor(cc.color("#6fcdc1"));c.setScanPhixelRGB();c.setAnchorPoint(1,1);c.setPosition(-20,b.getContentSize().height/2);b.addChild(c);var f=new cc.Sequence(new cc.MoveBy(0.2,cc.p(0,380)),new cc.callFunc(function(){a.setTouchEnabled(!0)},
this));b.runAction(f);a.addChild(b);c=new ccui.Button(this.ResSetting);c.setAnchorPoint(cc.p(0.5,0.5));c.setTag(2);c.setPosition(d/2,e/2);c.addClickEventListener(this.SettingSelector);b=new cc.LabelTTF(this.SettingText);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(36);b.setFontFillColor(cc.color(255,243,191));b.setScanPhixelRGB();b.setAnchorPoint(1,0);b.setPosition(-20,c.getContentSize().height/2);c.addChild(b);b=new cc.LabelTTF(this.SettingTextSub);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(28);
b.setFontFillColor(cc.color("#6fcdc1"));b.setScanPhixelRGB();b.setAnchorPoint(1,1);b.setPosition(-20,c.getContentSize().height/2);c.addChild(b);f=new cc.MoveBy(0.2,cc.p(0,222));c.runAction(f);a.addChild(c)}else b=a.getChildByTag(1),c=a.getChildByTag(2),b.runAction(new cc.Sequence(new cc.MoveBy(0.2,cc.p(0,-190)),new cc.callFunc(function(){a.removeAllChildrenWithCleanup(!0);a.getParent().getChildByTag(a.getParent().TAG_MASK).close()},this))),c.runAction(new cc.MoveBy(0.2,cc.p(0,-111))),a.getParent().getChildByTag(4).setTouchEnabled(!1)}});var Toolbar=cc.Node.extend({m_tabs:[],m_isRunning:!1,label_layout:null,ctor:function(a){var b=this;this._super();this.setContentSize(cc.winSize);var c=new ccui.Layout;c.setContentSize(this.getContentSize().width,100);c.setAnchorPoint(0,1);c.setPosition(0,this.getContentSize().height);c.setTouchEnabled(!0);c.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);c.setBackGroundColor(cc.color(111,205,193,255));this.addChild(c,99);var d=new Mask;d.close();this.addChild(d);var e=new ccui.Layout;e.setContentSize(this.getContentSize().width,
this.getContentSize().height-100);e.setAnchorPoint(0,1);e.setPosition(0,this.getContentSize().height-100);e.setTouchEnabled(!0);e.setTag(100);e.setVisible(!1);this.addChild(e,100);e.addClickEventListener(function(){if(!b.m_isRunning&&d.isVisible()){for(var a=0;a<b.m_tabs.length;a++){var c=new cc.MoveTo(0.2,cc.p(0,b.m_tabs[a].getParent().getContentSize().height));a==b.m_tabs.length-1&&(c=new cc.Sequence(new cc.MoveTo(0.2,cc.p(0,b.m_tabs[a].getParent().getContentSize().height)),new cc.CallFunc(function(){d.close();
b.removeChildByTag(999,!0);b.removeChildByTag(1E3,!0);b.m_isRunning=!1;b.m_tabs=[]})));b.m_tabs[a].runAction(c);b.m_isRunning=!0}e.setVisible(!1)}});var f=new ccui.Button(GlobalRes.top_menu);f.setAnchorPoint(0,0.5);f.setPosition(30,c.getContentSize().height/2);f.addClickEventListener(function(){var a=window.location.href;-1!=a.indexOf("alpha-")?window.location.href="http://alpha-game.touch.hangame.co.jp/benriya/index.nhn":-1!=a.indexOf("beta-")?window.location.href="http://beta-game.touch.hangame.co.jp/benriya/index.nhn":
-1!=a.indexOf("Bennriya")?window.location.href="http://alpha-game.touch.hangame.co.jp/benriya/index.nhn":window.location.href="http://game.touch.hangame.co.jp/benriya/index.nhn"});c.addChild(f);this.label_layout=new ccui.Layout;this.label_layout.setContentSize(400,c.getContentSize().height);this.label_layout.setAnchorPoint(0.5,0.5);this.label_layout.setPosition(c.getContentSize().width>>1,c.getContentSize().height/2);this.label_layout.setTouchEnabled(!0);c.addChild(this.label_layout,1);f=new cc.LabelTTF(a.name);
f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(36);f.setFontFillColor(cc.color(255,243,191,255));f.setScanPhixelRGB();f.setAnchorPoint(0.5,0.5);f.setPosition(this.label_layout.getContentSize().width>>1,this.label_layout.getContentSize().height/2);this.label_layout.addChild(f);var g=new ccui.Button(GlobalRes.top_navi_btn,GlobalRes.top_navi_btn);g.setAnchorPoint(0,0.5);g.setPosition(this.label_layout.getPosition().x+f.getContentSize().width/2+15,c.getContentSize().height/2);c.addChild(g);this.label_layout.addClickEventListener(function(){if(!b.m_isRunning)if(d.isVisible()){for(var e=
0;e<b.m_tabs.length;e++){var f=new cc.MoveTo(0.2,cc.p(0,b.m_tabs[e].getParent().getContentSize().height));e==b.m_tabs.length-1&&(f=function(){d.close();b.removeChildByTag(999,!0);b.removeChildByTag(1E3,!0);b.m_isRunning=!1;b.m_tabs=[]},f=new cc.Sequence(new cc.MoveTo(0.2,cc.p(0,b.m_tabs[e].getParent().getContentSize().height)),new cc.CallFunc(f)));b.m_tabs[e].runAction(f);b.m_isRunning=!0}b.getChildByTag(100).setVisible(!1)}else{d.open();var g=[];for(e in GAME_TYPE)g.push(GAME_TYPE[e]);b.getChildByTag(100).setVisible(!0);
var l=new cc.Sprite(GlobalRes.popup);l.setAnchorPoint(0.5,0);l.setPosition(b.getContentSize().width/2,b.getContentSize().height-c.getContentSize().height);l.setTag(1E3);b.addChild(l,999);e=new ccui.ListView;e.setDirection(ccui.ScrollView.DIR_VERTICAL);e.setTouchEnabled(!0);e.setBounceEnabled(!1);e.setContentSize(cc.size(430,101*g.length<=cc.winSize.height-c.getContentSize().height?101*g.length:cc.winSize.height-c.getContentSize().height));e.setAnchorPoint(0.5,1);e.setPosition(b.getContentSize().width/
2,b.getContentSize().height-c.getContentSize().height);e.setTag(999);b.addChild(e,999);l=new ccui.Layout;l.setContentSize(430,101*g.length);e.pushBackDefaultItem();e.pushBackCustomItem(l);for(e=0;e<g.length;e++){var p=new ccui.Layout;p.setContentSize(l.getContentSize().width,101);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color(255,255,255,255));p.setAnchorPoint(0,1);p.setPosition(0,l.getContentSize().height);l.addChild(p);f=new ccui.Layout;f.setContentSize(p.getContentSize().width,
1);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color(220,220,220,255));f.setAnchorPoint(0,0);p.addChild(f);f=new cc.LabelTTF(g[e].name);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(30);f.setFontFillColor(g[e].enable?g[e].name===a.name?cc.color(111,205,193,255):cc.color(50,51,52,255):cc.color(200,200,200,255));g[e].enable&&g[e].name===a.name&&f.setScanPhixelRGB();f.setAnchorPoint(0,0.5);f.setPosition(40,(p.getContentSize().height-1)/2);p.addChild(f);g[e].name===a.name?
(f=new cc.Sprite(GlobalRes.navi_selected_btn),f.setAnchorPoint(1,0.5),f.setPosition(p.getContentSize().width-40,(p.getContentSize().height-1)/2),p.addChild(f)):(p.addClickEventListener(function(a){SceneController.instance().gotoScene(a.getUserData())}),p.setTouchEnabled(!0),p.setUserData(g[e]));f=new cc.MoveTo(0.2,cc.p(0,l.getContentSize().height-101*e));e==g.length-1&&(f=function(){b.m_isRunning=!1},f=new cc.Sequence(new cc.MoveTo(0.2,cc.p(0,l.getContentSize().height-101*e)),new cc.CallFunc(f)));
p.runAction(f);b.m_isRunning=!0;b.m_tabs[e]=p}}});return!0},setToolbarTouchEnable:function(a){this.label_layout.setTouchEnabled(a)},getToolbarTouchEnable:function(a){return this.label_layout.isTouchEnabled()?!0:!1}});var Mask=cc.LayerColor.extend({masklistener1:null,ctor:function(){this._super(cc.color(0,0,0,191));this.masklistener1=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){return!0},onTouchMoved:function(a,b){return!0},onTouchEnded:function(a,b){return!0},onTouchCancelled:function(a,b){return!0}})},setTouchable:function(a){a?cc.eventManager.removeListener(this.masklistener1,this):cc.eventManager.addListener(this.masklistener1,this)},open:function(){this.setVisible(!0);
this.setTouchable(!1)},close:function(){this.setVisible(!1);this.setTouchable(!0)}});var ScrollNum=cc.Node.extend({listView:null,selectNum:null,contentSize:null,selWidth:null,selWidth1:null,minNum:null,maxNum:null,numViewArray:null,isStart:null,type:null,ctor:function(a,b,c,d){this._super();this.init(a,b,c,d);this.listView=new ccui.ListView;this.listView.setDirection(ccui.ScrollView.DIR_HORIZONTAL);this.listView.setAnchorPoint(cc.p(0.5,0.5));this.listView.setTouchEnabled(!0);this.listView.setBounceEnabled(!1);1==d?this.listView.setBackGroundColor(cc.color(111,205,192,255)):this.listView.setBackGroundColor(cc.color.WHITE);
this.listView.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);this.listView.setContentSize(this.contentSize);this.listView.addEventListener(this.selectedItemEvent,this);for(a=this.minNum;a<this.maxNum;++a)this.listView.pushBackDefaultItem();for(a=this.minNum;a<this.maxNum;++a){b=new ccui.Button;b.setName("TextButton");b.setTouchEnabled(!1);b.setScale9Enabled(!0);c=this.selWidth;100<=a?c=this.selWidth+this.selWidth1:10<=a&&(c=this.selWidth+this.selWidth1/2);b.setContentSize(cc.size(c,this.contentSize.height));
var e=new ccui.Text;e.setTag(this.TAG_NUMBER);e.attr({textAlign:cc.TEXT_ALIGNMENT_CENTER,string:a.toString(),x:b.width/2,y:b.height/2});a==this.selectNum?this.setBigFont(e):this.setSmailFont(e);(a==this.minNum||a==this.minNum+1||a==this.maxNum-1||a==this.maxNum-2)&&e.setString("");this.numViewArray.push(e);var f=new ccui.Layout;f.setContentSize(cc.size(c,this.contentSize.height));b.x=f.width/2;b.y=f.height/2;b.addChild(e);f.addChild(b);this.listView.pushBackCustomItem(f)}this.listView.setVisible(!1);
this.addChild(this.listView);b=GlobalRes.arrow_left;a=GlobalRes.arrow_right;1==d&&(b=GlobalRes.arrow_left2,a=GlobalRes.arrow_right2);d=new ccui.Button(b);d.setPosition(-this.contentSize.width/2-10,3);d.setName("Btn_Left");d.addTouchEventListener(this.touchEvent,this);d.setTouchEnabled(!1);this.addChild(d);d=new ccui.Button(a);d.setPosition(this.contentSize.width/2+10,3);d.setName("Btn_Right");d.addTouchEventListener(this.touchEvent,this);d.setTouchEnabled(!1);this.addChild(d);this.schedule(this.setTimer,
0);return!0},init:function(a,b,c,d){this.isStart=!0;this.selectNum=c;this.selWidth1=1==d?this.selWidth=80:this.selWidth=90;this.contentSize=cc.size(5*this.selWidth,100);this.type=d;this.minNum=a-2;this.maxNum=b+2;this.numViewArray=[]},setTimer:function(){this.isStart?this.seVisibleListView():this.setSelectPersonNumber(this.listView,this.numViewArray)},seVisibleListView:function(){var a=0,b=0,c;for(c in this.numViewArray)if(2<c){if(a==this.selectNum-this.minNum-2)break;a++;b+=this.numViewArray[c].getParent().getContentSize().width}this.listView.setContainerPosition(-b,
0);this.listView.setVisible(!0);this.isStart=!1},setSelectPersonNumber:function(a,b){if(null==a)return-1;this.setFontColor(a,b);return!a.isScroll()?this.autoScrollToNumber(a,b):-1},selectedItemEvent:function(a,b){},setFontColor:function(a,b){var c=this.numViewArray[2].getParent().getContentSize().width,d=this.numViewArray[b.length-2].getParent().getContentSize().width,e=0,f;for(f in b)2<f&&f<b.length-2&&(e+=this.numViewArray[f].getParent().getContentSize().width);if(a.getContainerPosition().x<c/2&&
a.getContainerPosition().x>-(e+d/2)){c=0;d=this.selWidth;100<=this.selectNum?d=this.selWidth+this.selWidth1:10<=this.selectNum&&(d=this.selWidth+this.selWidth1/2);d=a.getContainerPosition().x-d/2;for(f in b)if(2<f)if(d+=this.numViewArray[f].getParent().getContentSize().width,0<=d)break;else c++;c+=2;for(f=0;f<b.length;f++)c==f?this.setBigFont(b[f]):this.setSmailFont(b[f])}},autoScrollToNumber:function(a,b){var c=0,d=0,e=a.getContainerPosition().x,f=this.selWidth,g;for(g in b)if(2<g)if(e+=this.numViewArray[g].getParent().getContentSize().width,
0<=e){d=parseInt(Math.abs(e-this.numViewArray[g].getParent().getContentSize().width));f=this.numViewArray[g].getParent().getContentSize().width;break}else c++;e=5+this.minNum;d>e&&d<f/2?this.setNumber(this.listView,c,0.5):d>=f/2&&(c+=1,d<f-e&&this.setNumber(this.listView,c,0.5));return c+this.minNum+2},setBigFont:function(a){a.getFontName()!==GAME_FONT.PRO_W6&&(1==this.type?a.setColor(cc.color(255,244,189,255)):a.setColor(cc.color(107,205,194,255)),a.setFontSize(60),a.setFontName(GAME_FONT.PRO_W6),
this.selectNum=parseInt(a.getString()))},setSmailFont:function(a){a.getFontName()!==GAME_FONT.PRO_W3&&(1==this.type?a.setColor(cc.color(205,230,190,255)):a.setColor(cc.color(213,227,228,255)),a.setFontSize(50),a.setFontName(GAME_FONT.PRO_W3))},touchEvent:function(a,b){switch(b){case ccui.Widget.TOUCH_ENDED:cc.log("touchEvent "+a.getName());if("Btn_Left"==a.getName()){if(this.selectNum-2==this.minNum)break;this.selectNum--}else if("Btn_Right"==a.getName()){if(this.selectNum==this.maxNum-3)break;this.selectNum++}this.setNumber(this.listView,
this.selectNum-2-this.minNum,0.2)}},getNumber:function(){return this.selectNum},setNumber:function(a,b,c){if(3==arguments.length){var d=0,e=0,f;for(f in this.numViewArray)if(2<f&&f<this.numViewArray.length-2){if(d==b)break;d++;e+=this.numViewArray[f].getParent().getContentSize().width}100<=this.selectNum?e-=this.selWidth1/2:10<=this.selectNum&&(e-=this.selWidth1/4);a.scrollToWidthHorizontal(e,c,!0)}else{e=d=0;for(f in this.numViewArray)if(2<f&&f<this.numViewArray.length-2){if(d==arguments[0])break;
d++;e+=this.numViewArray[f].getParent().getContentSize().width}100<=this.selectNum?e-=this.selWidth1/2:10<=this.selectNum&&(e-=this.selWidth1/4);this.listView.jumpToPercentHorizontal(e)}}});var TextFiledAddList=cc.Node.extend({titleInput:null,listView:null,isAddChanged:!1,_maxList:null,_selectedCha:!1,_type:null,_addBtn:null,_addStr:null,_addIconIdx:null,ctor:function(a,b,c){this._super();this.initData(a,c);var d=cc.director.getWinSize();a=d.height-b;d=new cc.LayerColor(cc.color(255,255,255,255),d.width-0,a);d.setPosition(0,b);this.addChild(d);var e="\u53c2\u52a0\u8005\u767b\u9332",f=180;b=0;switch(c){case 1:e="\u7f70\u30b2\u30fc\u30e0\u306e\u5185\u5bb9\u3092\u6c7a\u3081\u308b";f=120;
break;case 2:e="\u591a\u6570\u6c7a\u9805\u76ee\u767b\u9332",f=120,b=128}var g=new cc.LayerColor(cc.color("#6fcdc1"),d.getContentSize().width,100);g.setPosition(0,d.getContentSize().height-g.getContentSize().height);d.addChild(g);e=new cc.LabelTTF(e,GAME_FONT.PRO_W3);e.setFontSize(36);e.setFontFillColor(cc.color("#fff3bf"));e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(g.getContentSize().width>>1,g.getContentSize().height>>1));g.addChild(e);switch(c){case 2:e=new cc.LayerColor(cc.color("#ffffff"),
d.getContentSize().width,b);e.setPosition(0,d.getContentSize().height-g.getContentSize().height-e.getContentSize().height);d.addChild(e);var h=new cc.EditBox(cc.size(e.getContentSize().width-70,100),new cc.Scale9Sprite);h.setPlaceholderFontSize(36);h.setPlaceHolder("     \u8cea\u554f\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044");h.setPosition(30,(e.getContentSize().height-8)/2);h.setMaxLength(16);h.setPlaceholderFontColor(cc.color.GRAY);h.setAnchorPoint(cc.p(0,0.5));h.setDelegate(this);h.setName("textFiled1");
h.setFontName(GAME_FONT.PRO_W3);h.setFontColor(cc.color(111,205,193,255));h.setFontSize(36);h.setAdd(!0);e.addChild(h);this.titleInput=h;h=new cc.Sprite(GlobalRes.line_8);h.setAnchorPoint(cc.p(0,0));h.setPosition(0,a-g.getContentSize().height-e.getContentSize().height);h.setScaleX(d.getContentSize().width);d.addChild(h)}e=new cc.LayerColor(cc.color("#ffffff"),d.getContentSize().width,f);e.setPosition(0,d.getContentSize().height-g.getContentSize().height-e.getContentSize().height-b);d.addChild(e);
h=new ccui.Button(GlobalRes.cha_thumb_random,GlobalRes.cha_thumb_random);h.setAnchorPoint(0,0.5);h.setPosition(30,e.getContentSize().height/2);h.setName("SelectCharacter");h.addClickEventListener(this.chaRandomBtnEvent);e.addChild(h);var k=new ccui.Layout;k.setContentSize(150,e.getContentSize().height);k.setAnchorPoint(1,0);k.setName("addToList");k.setPosition(e.getContentSize().width,0);k.setTouchEnabled(!0);k.addClickEventListener(this.additionBtnEvent);k.setVisible(!1);e.addChild(k);this._addBtn=
k;var m=new cc.Sprite(GlobalRes.addition_btn);m.setAnchorPoint(0.5,0.5);m.setPosition(k.getContentSize().width>>1,k.getContentSize().height>>1);k.addChild(m);switch(c){case 1:h.setVisible(!1);f=new cc.EditBox(cc.size(e.getContentSize().width-40-k.getContentSize().width,f),new cc.Scale9Sprite);f.setPlaceholderFontSize(36);f.setPlaceHolder("     \u7f70\u5247\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");f.setPosition(30,e.getContentSize().height/2);f.setMaxLength(16);this._selectedCha=
!0;f.setAdd(!0);h=new cc.LabelTTF("\u7f70\u5247\u5165\u529b\u5b8c\u4e86");h.setFontName(GAME_FONT.PRO_W3);h.setName("fieldLavel");h.setFontSize(36);h.setFontFillColor(cc.color("#c8c8c8"));h.setAnchorPoint(0,0.5);h.setPosition(30,e.getContentSize().height/2);e.addChild(h);h.setVisible(!1);break;case 2:h.setVisible(!1);f=new cc.EditBox(cc.size(e.getContentSize().width-40-k.getContentSize().width,f),new cc.Scale9Sprite);f.setPlaceholderFontSize(36);f.setPlaceHolder("     \u9078\u629e\u80a2\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044");
f.setPosition(30,e.getContentSize().height/2);f.setMaxLength(16);this._selectedCha=!0;f.setAdd(!0);h=new cc.LabelTTF("\u540d\u524d\u5165\u529b\u5b8c\u4e86");h.setFontName(GAME_FONT.PRO_W3);h.setName("fieldLavel");h.setFontSize(36);h.setFontFillColor(cc.color("#c8c8c8"));h.setAnchorPoint(0,0.5);h.setPosition(30,e.getContentSize().height/2);e.addChild(h);h.setVisible(!1);break;case 0:m=new cc.LayerColor(cc.color("#ffffff"),e.getContentSize().width-50-h.getContentSize().width-k.getContentSize().width,
e.getContentSize().height);m.setPosition(h.getPosition().x+h.getContentSize().width+20,0);m.setName("textFiledLavel");e.addChild(m);var l=new cc.LabelTTF("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(36);l.setFontFillColor(cc.color("#c8c8c8"));l.setAnchorPoint(0,0.5);l.setPosition(0,e.getContentSize().height/2);m.addChild(l);this.setInputListener();f=new cc.EditBox(cc.size(e.getContentSize().width-50-h.getContentSize().width-
k.getContentSize().width,f),new cc.Scale9Sprite);f.setPlaceholderFontSize(36);f.setPlaceHolder("");f.setPosition(h.getPosition().x+h.getContentSize().width+20,e.getContentSize().height/2);f.setMaxLength(12);f.setVisible(!1);break;default:f=new cc.EditBox(cc.size(e.getContentSize().width-100-h.getContentSize().width-k.getContentSize().width,f),new cc.Scale9Sprite),f.setPlaceholderFontSize(36),f.setPlaceHolder("     \u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),f.setPosition(h.getPosition().x+
h.getContentSize().width+30+30,e.getContentSize().height/2),f.setMaxLength(12),f.setAdd(!0)}f.setPlaceholderFontColor(cc.color.GRAY);f.setAnchorPoint(cc.p(0,0.5));f.setDelegate(this);f.setName("textFiled");f.setFontName(GAME_FONT.PRO_W3);f.setFontColor(cc.color(111,205,193,255));f.setFontSize(36);e.addChild(f);switch(c){case 2:c=new cc.Sprite(GlobalRes.line_50);c.setAnchorPoint(cc.p(0,0));c.setPosition(0,a-g.getContentSize().height-e.getContentSize().height-b-c.getContentSize().height);c.setScaleX(d.getContentSize().width);
d.addChild(c);f=new cc.LabelTTF("\u9078\u629e\u80a2\u306e\u6570\uff1a\uff12\uff5e10\u500b\u767b\u9332\u53ef\u80fd");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color(153,153,153,255));f.setAnchorPoint(0.5,0.5);f.setPosition(c.getPositionX()+d.getContentSize().width/2,c.getPositionY()+c.getContentSize().height/2);d.addChild(f);break;default:c=new cc.Sprite(GlobalRes.line_8),c.setAnchorPoint(cc.p(0,0.5)),c.setPosition(0,a-g.getContentSize().height-e.getContentSize().height-
b),c.setScaleX(d.getContentSize().width),d.addChild(c)}this.listView=new ccui.ListView;this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);this.listView.setAnchorPoint(cc.p(0,1));this.listView.setPosition(0,a-g.getContentSize().height-e.getContentSize().height-c.getContentSize().height-b);this.listView.setTouchEnabled(!0);this.listView.setBounceEnabled(!1);this.listView.setBackGroundColor(cc.color.WHITE);this.listView.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);this.listView.setName("listView");
this.listView.setContentSize(cc.size(d.getContentSize().width,a-g.getContentSize().height-e.getContentSize().height-c.getContentSize().height-b));d.addChild(this.listView);a=new Mask;a.setTag(3);a.close();this.addChild(a);return!0},initData:function(a,b){this._maxList=a;this._selectedCha=!1;this._type=b},editBoxEditingDidBegin:function(a){cc.log("editBox "+a.getString()+" DidBegin !")},editBoxEditingDidEnd:function(a){if("textFiled"==a.getName()&&0==a.getString().length){var b=a.getParent().getChildByName("textFiledLavel");
b&&(b.setVisible(!0),a.setVisible(!1))}cc.log("editBox "+a.getString()+" DidEnd !")},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()));"textFiled1"!=a.getName()&&(0==b.length?a.getParent().getChildByName("addToList").setVisible(!1):this._selectedCha&&a.getParent().getChildByName("addToList").setVisible(!0))},editBoxReturn:function(a){cc.log("editBox "+a.getString()+" was returned !")},chaRandomBtnEvent:function(a){var b=
"\u30d6\u30cb\u30e3 \u3070\u306b\u3089 \u30b8\u30a7\u30b9\u30bf \u304b\u3071\u3071 \u304f\u3089\u306e\u3059\u3051 \u304f\u308d\u307e\u308b \u30b3\u30a2\u3089\u3093 \u30dc\u30b9 \u306e\u3076\u3053 \u3074\u3087\u3053 \u3068\u308a\u3056\u3048\u3082\u3093 \u3060\u3044\u306a\u305d\u30fc \u30b9\u30ad\u30e3\u30c3\u30c8 \u30ad\u30ce\u30b3\u306e\u5b50 \u3046\u3055\u307d\u3093 random".split(" "),c=a.getParent().getParent().getParent(),d=a.getParent(),e=a.getParent().getChildByName("textFiled"),f=a.getParent().getChildByName("SelectCharacter"),
g=a.getParent().getChildByName("addToList"),h=a.getParent().getChildByName("textFiledLavel");e.setVisible(!1);var k=new ccui.Layout;k.setContentSize(cc.winSize.width,cc.winSize.height);k.setAnchorPoint(0,0);k.setTag(4);k.setTouchEnabled(!0);k.addClickEventListener(function(){f.loadTextureNormal(GlobalRes.cha_thumb_random);f.loadTexturePressed(GlobalRes.cha_thumb_random);g.setVisible(!1);c._selectedCha=!1;h.setVisible(!0);c.getChildByTag(3).close();k.removeFromParent()});c.addChild(k);var m=new ccui.Layout;
m.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);m.setBackGroundColor(cc.color(255,255,255,255));m.setContentSize(570,680);m.setAnchorPoint(0.5,0.5);m.setTouchEnabled(!0);m.setPosition(cc.winSize.width/2,cc.winSize.height/2);k.addChild(m);var l={},p=function(a,b){for(var c=[],d=0;d<a.getItems().length;d++)a.getItem(d).getUserData().index==b&&c.push(a.getItem(d));return c},n=0,r=2;0==c._type&&(r=1);for(var q=0;16>q;q++){var s=p(c.listView,q).length,t="res/Global/cha_pop/cha_pop_"+PAD(q+1,2)+"_off.png",
t=new ccui.Button(t,t);t.setAnchorPoint(0,1);t.setPosition(55+125*parseInt(q%4),m.getContentSize().height-60-125*parseInt(q/4));t.setUserData({icon:""+PAD(q+1,2),name:b[q],index:q});var w=function(a){if(l.current){if(l.current.getUserData().icon===a.getUserData().icon)return;l.current.loadTextureNormal("res/Global/cha_pop/cha_pop_"+l.current.getUserData().icon+"_off.png");l.current.loadTexturePressed("res/Global/cha_pop/cha_pop_"+l.current.getUserData().icon+"_off.png")}a.loadTextureNormal("res/Global/cha_pop/cha_pop_"+
a.getUserData().icon+"_on.png");a.loadTexturePressed("res/Global/cha_pop/cha_pop_"+a.getUserData().icon+"_on.png");l.current=a;SoundManager.instance().playEffect(GhostLegRes.sound_normal_1)};15==q&&15==n&&(s=r);s<r&&t.addClickEventListener(w);m.addChild(t);s>=r&&(n++,s=new cc.Sprite("res/Scene/Grouping/cha_block.png"),s.setAnchorPoint(0,1),s.setPosition(55+(t.getContentSize().width+40)*parseInt(q%4),m.getContentSize().height-60-(t.getContentSize().height+40)*parseInt(q/4)),m.addChild(s))}n=new ccui.Layout;
n.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);n.setBackGroundColor(cc.color(111,205,193,255));n.setContentSize(570,100);n.setAnchorPoint(0,0);m.addChild(n);var u=new ccui.Button;u.setContentSize(n.getContentSize().width,n.getContentSize().height);u.setTouchEnabled(!0);u.setScale9Enabled(!0);u.setTitleText("\u78ba\u8a8d");u.setTitleFontName(GAME_FONT.PRO_W3);u.setTitleFontSize(36);u.setAnchorPoint(0.5,0.5);u.setPosition(n.getContentSize().width/2,n.getContentSize().height/2);u.addClickEventListener(function(){if(l.current){var n=
{};if("random"===l.current.getUserData().name){for(var v=Math.floor(15*Math.random());p(c.listView,v).length==r;)v=Math.floor(15*Math.random());1==r?n.icon=""+PAD(v+1,2):1==p(c.listView,v).length?-1==p(c.listView,v)[0].getUserData().icon.indexOf("_b")?n.icon=""+PAD(v+1,2)+"_b":n.icon=""+PAD(v+1,2):n.icon=0==p(c.listView,v).length?""+PAD(v+1,2):""+PAD(v+1,2)+"_b";n.name=b[v];n.index=v}else n.index=l.current.getUserData().index,1==r?n.icon=""+PAD(n.index+1,2):1==p(c.listView,n.index).length?-1==p(c.listView,
n.index)[0].getUserData().icon.indexOf("_b")?n.icon=""+PAD(n.index+1,2)+"_b":n.icon=""+PAD(n.index+1,2):n.icon=0==p(c.listView,n.index).length?""+PAD(n.index+1,2):""+PAD(n.index+1,2)+"_b",n.name=l.current.getUserData().name;a.loadTextureNormal("res/Global/cha_pop/cha_thumb_"+n.icon+".png");a.loadTexturePressed("res/Global/cha_pop/cha_thumb_"+n.icon+".png");a.setUserData(n);g.setVisible(!0);e.removeFromParent();e=new cc.EditBox(cc.size(d.getContentSize().width-80-f.getContentSize().width-g.getContentSize().width,
80),new cc.Scale9Sprite,null,null,!0);e.setBodyStyle(1);e.setPlaceholderFontColor(cc.color.GRAY);e.setPlaceholderFontSize(36);e.setPlaceHolder("");e.setAnchorPoint(cc.p(0,0.5));e.setPosition(f.getPosition().x+f.getContentSize().width+20,d.getContentSize().height/2);e.setDelegate(c);e.setName("textFiled");e.setFontName(GAME_FONT.PRO_W3);e.setFontColor(cc.color(111,205,193,255));e.setFontSize(36);e.setMaxLength(12);e.setString(n.name);e.setUserData(n.name);d.addChild(e);u=new ccui.Button;u.setTitleText("\u78ba\u8a8d");
h.setVisible(!1);c._selectedCha=!0}else a.loadTextureNormal(GlobalRes.cha_thumb_random),a.loadTexturePressed(GlobalRes.cha_thumb_random),g.setVisible(!1),c._selectedCha=!1,h.setVisible(!0);m.removeFromParent();k.removeFromParent();c.getChildByTag(3).close()});n.addChild(u);c.getChildByTag(3).open()},additionBtnEvent:function(a){var b=a.getParent().getParent().getParent(),c=a.getParent(),d=a.getParent().getChildByName("textFiled"),e=a.getParent().getChildByName("SelectCharacter"),f=a.getParent().getChildByName("addToList"),
g=a.getParent().getChildByName("textFiledLavel"),h=a.getParent().getChildByName("fieldLavel");if(b.listView.getItems().length>b._maxList-1)alert("\u5236\u9650\u3092\u8d85\u904e\u3057\u307e\u3057\u305f");else if(d.getString()&&""==d.getString()&&!b._addStr&&!b._addIconIdx)alert("\u540d\u524d\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else if(!b._selectedCha&&!b._addIconIdx)alert("\u30c1\u30fc\u30e0\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044");else if(1==b._type||2==b._type){var k=
new ccui.Layout;k.setContentSize(750,122);g=d.getString();b._addStr&&(g=b._addStr);g=new cc.LabelTTF(g);g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(36);g.setTag(1);g.setFontFillColor(cc.color(111,205,193,255));g.setAnchorPoint(0,0.5);g.setPosition(30,k.getContentSize().height/2);k.addChild(g);a=new ccui.Button(GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(k.getContentSize().width-30,k.getContentSize().height/2);a.addClickEventListener(function(){b.listView.removeItem(b.listView.getIndex(k));
b.isAddChanged=!0;h&&(h.setVisible(!1),d.setVisible(!0))});k.addChild(a);g=new cc.DrawNode;a=[cc.p(0,0),cc.p(k.getContentSize().width,0)];k.addChild(g);g.drawPoly(a,null,2,cc.color(200,200,200,77));b.listView.pushBackDefaultItem();b.listView.pushBackCustomItem(k);d.removeFromParent();d=new cc.EditBox(cc.size(c.getContentSize().width-40-f.getContentSize().width,c.getContentSize().height),new cc.Scale9Sprite);d.setPlaceholderFontSize(36);1==b._type?d.setPlaceHolder("     \u7f70\u5247\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):
d.setPlaceHolder("     \u8cea\u554f\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");d.setPosition(30,c.getContentSize().height/2);d.setMaxLength(16);d.setAdd(!0);d.setPlaceholderFontColor(cc.color.GRAY);d.setAnchorPoint(cc.p(0,0.5));d.setDelegate(b);d.setName("textFiled");d.setFontName(GAME_FONT.PRO_W3);d.setFontColor(cc.color(111,205,193,255));d.setFontSize(36);c.addChild(d);f.setVisible(!1);b.isAddChanged=!0;h&&b.listView.getItems().length==b._maxList&&(h.setVisible(!0),d.setVisible(!1))}else a=
{},a.icon=b._addIconIdx?b._addIconIdx:e.getUserData().icon,a.index=b._addIconIdx?Number(a.icon)-1:e.getUserData().index,a.name=b._addStr?b._addStr:d.getString(),k=new ccui.Layout,k.setUserData(a),k.setContentSize(750,182),c=new cc.Sprite("res/Global/cha_pop/cha_thumb_"+a.icon+".png"),c.setTag(2),c.setName(a.icon.toString()),c.setAnchorPoint(0,0.5),c.setPosition(30,k.getContentSize().height-90),k.addChild(c),a=new cc.LabelTTF(a.name),a.setFontName(GAME_FONT.PRO_W6),a.setTag(1),a.setFontSize(36),a.setFontFillColor(cc.color(111,
205,193,255)),a.setAnchorPoint(0,0.5),a.setPosition(c.getPosition().x+124+30,c.getPosition().y),k.addChild(a),a=new ccui.Button(GlobalRes.delete_png),a.setAnchorPoint(1,0.5),a.setPosition(k.getContentSize().width-30,c.getPosition().y),a.addClickEventListener(function(){b.listView.removeItem(b.listView.getIndex(k));b.isAddChanged=!0;b.listView.getItems().length==b._maxList-1&&(e.setTouchEnabled(!0),b.setInputListener())}),k.addChild(a),c=new cc.Sprite(GlobalRes.line_8),c.setAnchorPoint(0,0),c.setScaleX(k.getContentSize().width),
c.setScaleY(0.25),k.addChild(c),b.listView.pushBackDefaultItem(),b.listView.pushBackCustomItem(k),g.setVisible(!0),d.setInputblur(),d.setVisible(!1),f.setVisible(!1),e.loadTextureNormal(GlobalRes.cha_thumb_random),e.loadTexturePressed(GlobalRes.cha_thumb_random),e.setUserData(""),b._selectedCha=!1,b.isAddChanged=!0,b.listView.getItems().length==b._maxList&&(e.setTouchEnabled(!1),cc.eventManager.removeListeners(g));b._addStr=null;b._addIconIdx=null},setInputListener:function(){var a=this,b=this._addBtn.getParent(),
c=b.getChildByName("textFiledLavel");a.listView&&a.listView.getItems().length==a._maxList||cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(c,e){var f=e.getCurrentTarget(),g=f.convertToNodeSpace(c.getLocation()),f=f.getContentSize(),f=cc.rect(0,0,f.width,f.height);return cc.rectContainsPoint(f,g)?(a.chaRandomBtnEvent(b.getChildByName("SelectCharacter")),!0):!1}}),c)},getListChildernIcon:function(a){return this.listView.getItem(a).getChildByTag(2).getName()},
getListChildern:function(a){return this.listView.getItem(a).getChildByTag(1).getString()},setListChildern:function(a,b){this._addStr=a;b&&(this._addIconIdx=b);this.additionBtnEvent(this._addBtn)},getTitleString:function(){if(2==this._type)return this.titleInput.getString()},setTitleString:function(a){if(2==this._type)return this.titleInput.setString(a)}});var RoundRect=cc.Node.extend({ctor:function(a,b){this._super();this.setContentSize(a,b);var c=new cc.Scale9Sprite(GlobalRes.radius1,cc.rect(0,0,20,20),cc.rect(9,9,2,2));c.setPreferredSize(cc.size(a,b));c.setAnchorPoint(0,0);var d=new ccui.Layout;d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);d.setBackGroundColor(cc.color(255,255,255,255));d.setTouchEnabled(!0);d.setContentSize(a,b);d.setAnchorPoint(0,0);c=new cc.ClippingNode(c);c.setAnchorPoint(0,0);c.setPosition(0,0);c.addChild(d);this.addChild(c);
this.addChild=function(a,b){b?d.addChild(a,b):d.addChild(a)}}});var ScaleMotionNode=cc.Node.extend({m_multiTouch:!1,m_dis:0,m_zoomOut:null,m_zoomIn:null,m_onEnter:null,m_touchCount:0,ctor:function(){this._super();var a=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this.checkTouches.bind(this),onTouchEnded:this._onTouchEnded.bind(this)});cc.eventManager.addListener(a,-1);a=cc.EventListener.create({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:this._onTouchesBegan.bind(this),onTouchesMoved:this._onTouchesMoved.bind(this),
onTouchesEnded:this._onTouchesEnded.bind(this),onTouchesCancelled:this._onTouchesCancelled.bind(this)});cc.eventManager.addListener(a,this)},checkTouches:function(a,b){0<a.getID()?this.m_multiTouch=!0:this.m_multiTouch=!1;this.m_touchCount++;2<=this.m_touchCount?this.m_onEnter(!0):this.m_onEnter(!1);return!0},_onTouchEnded:function(a,b){this.m_touchCount--;2>this.m_touchCount&&this.m_onEnter(!1)},_onTouchesBegan:function(a,b){if(2==a.length&&0==this.m_dis){var c=a[0].getLocation(),d=a[1].getLocation();
this.m_dis=cc.pDistance(c,d)}return!0},_onTouchesMoved:function(a,b){if(0!=this.m_dis){var c=a[0].getLocation(),d=a[1].getLocation(),c=cc.pDistance(c,d);c>this.m_dis?this.m_zoomOut():this.m_zoomIn();this.m_dis=c}},_onTouchesEnded:function(a,b){2>a&&(this.m_dis=0)},_onTouchesCancelled:function(a,b){return this.m_multiTouch},setZoomOut:function(a){this.m_zoomOut=a},setZoomIn:function(a){this.m_zoomIn=a},setOnEnter:function(a){this.m_onEnter=a}});var LoveRedLineLayer=cc.LayerColor.extend({m_male:null,m_women:null,m_sex:null,m_tableMode:null,m_groupMode:null,m_state:-1,STATE_MAIN:0,STATE_MEMBERSETTING:1,STATE_ENVIRONMENTSETTING:2,STATE_TAGBELRESULT:3,STATE_CHOOSEVIEW:4,STATE_REDLINERESULTVIEW:5,STATE_REDLINERESULTVIEW2:6,m_history:!1,m_func_isbacktomain:null,ctor:function(){this._super(cc.color(255,0,255,255));this.m_male=new ArrayList;this.m_women=new ArrayList;this.m_groupMode=this.m_tableMode=this.m_sex=0;ADD_CHANGESTATE_CALLBACK(this.stateBack,
this);this.loadMainView();return!0},loadMainView:function(){this.m_state=this.STATE_MAIN;this.m_male.clear();this.m_women.clear();this.m_groupMode=this.m_tableMode=this.m_sex=0;this.removeAllChildren();var a=new Toolbar(GAME_TYPE.LoveRedLine);a.setTag(4);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,9999);a=new cc.Sprite(LoveRedLineRes.bg);a.setAnchorPoint(cc.p(0,0));a.setPosition(cc.p(0,0));this.addChild(a);var b=new cc.Sprite;b.setAnchorPoint(0,1);b.setPosition(0,
cc.winSize.height-100);for(var c=[],a=0;11>a;a++)c.push(new cc.SpriteFrame("res/Scene/LoveRedLine/top"+(a+1)+".png",new cc.Rect(0,0,750,450)));c=new cc.Animation(c,0.2);a=cc.animate(c);c=[];c.push(new cc.SpriteFrame("res/Scene/LoveRedLine/top12.png",new cc.Rect(0,0,750,450)));c=new cc.Animation(c,1);c=cc.animate(c);b.runAction((new cc.Sequence(a,c)).repeatForever());this.addChild(b);var d=new ccui.ListView;d.setDirection(ccui.ScrollView.DIR_VERTICAL);d.setTouchEnabled(!0);d.setBounceEnabled(!0);d.setContentSize(cc.size(cc.winSize.width,
cc.winSize.height-100-450));d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100-450);d.setBreakPoint(100);this.addChild(d);if(b=DataManager.instance().getHistory(GAME_TYPE.LoveRedLine)){for(a=b.size()-1;-1<a;a--){var e=this,c=new ccui.Layout,f=new ccui.Layout;f.setTouchEnabled(!0);f.setContentSize(cc.winSize.width,156);f.setUserData(b.get(a));c.setContentSize(cc.winSize.width,f.getContentSize().height);c.addChild(f);var g=new ccui.Layout;g.setContentSize(cc.winSize.width+302,1);g.setAnchorPoint(0,
0);g.setPosition(0,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(255,243,191,255));f.addChild(g);g=new ccui.Layout;g.setContentSize(cc.winSize.width,156);g.setAnchorPoint(0,0);g.setPosition(302,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(111,205,193,255));g.setTag(99);g.setVisible(!1);f.addChild(g);var g=(f.getContentSize().height-80)/2,h="seat"===b.get(a).data.mode?LoveRedLineRes.seat_list_btn:LoveRedLineRes.love_list_btn,
h=new cc.Sprite(h);h.setAnchorPoint(0,1);h.setPosition(30,f.getContentSize().height-g);f.addChild(h);var k=new cc.LabelTTF(""+b.get(a).month+"."+b.get(a).day);k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(30);k.setFontFillColor(cc.color(255,243,191));k.setScanPhixelRGB();k.setAnchorPoint(1,1);k.setPosition(f.getContentSize().width-30,f.getContentSize().height-g);f.addChild(k);var m=new cc.LabelTTF(b.get(a).data.title);m.setFontName(GAME_FONT.PRO_W6);m.setFontSize(40);m.setFontFillColor(cc.color(255,
243,191));m.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);m.setScanPhixelRGB();m.setContentSize(f.getContentSize().width-h.getContentSize().width-30-30-30-30-k.getContentSize().width,m.getContentSize().height);m.setAnchorPoint(0,1);m.setPosition(h.getContentSize().width+30+30,f.getContentSize().height-g);m.setTextWidth(f.getContentSize().width-h.getContentSize().width-30-30-30-30-k.getContentSize().width);f.addChild(m);str="";for(j=0;j<b.get(a).data.male.length;j++)str+=b.get(a).data.male[j].name;
for(j=0;j<b.get(a).data.women.length;j++)str+=b.get(a).data.women[j].name;g=new cc.LabelTTF(str);g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(30);g.setFontFillColor(cc.color(255,243,191));g.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);g.setScanPhixelRGB();g.setContentSize(f.getContentSize().width-h.getContentSize().width-30-30-30-30-k.getContentSize().width,g.getContentSize().height);g.setAnchorPoint(0,1);g.setPosition(h.getContentSize().width+30+30,m.getPositionY()-m.getFontSize()-10);g.setTextWidth(f.getContentSize().width-
h.getContentSize().width-30-30-30-30-k.getContentSize().width);f.addChild(g);g=new ccui.Layout;g.setContentSize(150,f.getContentSize().height-1);g.setAnchorPoint(0,0);g.setPosition(f.getContentSize().width,1);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(72,133,146,255));f.addChild(g);h=new ccui.Button(GlobalRes.history_replay_btn,GlobalRes.history_replay_btn);h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width/2,g.getContentSize().height-40);k=b.get(a).data.mode;
h.setUserData({male:b.get(a).data.male,women:b.get(a).data.women,mode:k});h.addClickEventListener(function(a){for(var b=0;b<a.getUserData().male.length;b++)e.m_male.add(a.getUserData().male[b]),a.getUserData().male[b].select&&delete a.getUserData().male[b].select;for(b=0;b<a.getUserData().women.length;b++)e.m_women.add(a.getUserData().women[b]),a.getUserData().women[b].select&&delete a.getUserData().women[b].select;e.loadMemberSettingView("seat"!==a.getUserData().mode)});g.addChild(h);k=new cc.LabelTTF("\u3084\u308a\u76f4\u3057");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(22);k.setFontFillColor(cc.color(255,243,191));k.setScanPhixelRGB();k.setAnchorPoint(0.5,1);k.setPosition(h.getPosition().x,h.getPosition().y-h.getContentSize().height-10);g.addChild(k);h=new ccui.Layout;h.setContentSize(2,f.getContentSize().height-1);h.setAnchorPoint(0,0.5);h.setPosition(f.getContentSize().width+g.getContentSize().width,f.getContentSize().height/2);h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color(72,133,
146,255));f.addChild(h);k=new cc.Sprite(GlobalRes.history_line);k.setAnchorPoint(0,0.5);k.setPosition(f.getContentSize().width+g.getContentSize().width,f.getContentSize().height/2);f.addChild(k);h=new ccui.Layout;h.setContentSize(150,f.getContentSize().height-1);h.setAnchorPoint(0,0);h.setPosition(f.getContentSize().width+g.getContentSize().width+k.getContentSize().width,1);h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color(72,133,146,255));f.addChild(h);g=new ccui.Button(GlobalRes.history_delete_btn,
GlobalRes.history_delete_btn);g.setAnchorPoint(0.5,1);g.setPosition(h.getContentSize().width/2,h.getContentSize().height-40);g.setUserData({time:b.get(a).time,item:c});g.addClickEventListener(function(a){DataManager.instance().deleteHistory(GAME_TYPE.LoveRedLine,a.getUserData().time);d.removeLastItem();d.removeItem(d.getIndex(a.getUserData().item));a=new ccui.Layout;a.setContentSize(cc.winSize.width,3<=d.getItems().length?250:0);d.pushBackCustomItem(a)});h.addChild(g);k=new cc.LabelTTF("\u524a\u9664");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(22);k.setFontFillColor(cc.color(255,243,191));k.setScanPhixelRGB();k.setAnchorPoint(0.5,1);k.setPosition(g.getPosition().x,g.getPosition().y-g.getContentSize().height-10);h.addChild(k);f.setAnchorPoint(0,0);f.setPosition(0,0);f.addTouchEventListener(function(a,b){switch(b){case ccui.Widget.TOUCH_BEGAN:a.isMoved=!1;break;case ccui.Widget.TOUCH_MOVED:if(-100>a.getTouchBeganPosition().x-a.getTouchMovePosition().x){if(1==a.pos&&!a.isAction){a.isAction=!0;
var c=function(){a.isAction=!1;a.pos=0},c=new cc.Sequence(new cc.MoveTo(0.2,{x:0,y:a.getPosition().y}),new cc.CallFunc(c));a.runAction(c);a.getChildByTag(99).setVisible(!1)}}else 100<a.getTouchBeganPosition().x-a.getTouchMovePosition().x&&(0==a.pos&&!a.isAction)&&(a.isAction=!0,c=function(){a.isAction=!1;a.pos=1;a.getChildByTag(99).setVisible(!0)},c=new cc.Sequence(new cc.MoveTo(0.2,{x:-302,y:a.getPosition().y}),new cc.CallFunc(c)),a.runAction(c));break;case ccui.Widget.TOUCH_ENDED:if(!a.isMoved&&
0==a.pos){a.getUserData();a.getUserData();a.getUserData();a.getUserData();for(c=0;c<a.getUserData().data.male.length;c++)e.m_male.add(a.getUserData().data.male[c]);for(c=0;c<a.getUserData().data.women.length;c++)e.m_women.add(a.getUserData().data.women[c]);"seat"===a.getUserData().data.mode?(e.m_tableMode=a.getUserData().data.tableMode,e.m_groupMode=a.getUserData().data.groupMode,e.loadTabelResult(!0)):e.loadRedLineResultView2(!0)}}});f.pos=0;f.isAction=!1;d.pushBackDefaultItem();d.pushBackCustomItem(c)}a=
new ccui.Layout;a.setContentSize(cc.winSize.width,3<=b.size()?250:0);d.pushBackCustomItem(a)}a=new Mask;a.setTag(3);a.close();this.addChild(a);var l=new ccui.Button(LoveRedLineRes.start_btn,LoveRedLineRes.start_btn);l.setTag(0);l.setAnchorPoint(cc.p(1,0));l.setPosition(cc.p(cc.winSize.width-22,30));e=this;l.addClickEventListener(function(){e.modeBtnCallback(l)});this.addChild(l,999)},modeBtnCallback:function(a){if(a.getParent().getChildByTag(1))d=a.getParent().getChildByTag(1),e=a.getParent().getChildByTag(2),
d.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(4);a.getParent().getChildByTag(3).close()},this))),e.runAction(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)));else{var b=this;a.setTouchEnabled(!1);a.getParent().getChildByTag(3).open();var c=new ccui.Layout;c.setContentSize(cc.winSize.width,
cc.winSize.height);c.setAnchorPoint(0,0);c.setTag(4);c.setTouchEnabled(!0);c.addTouchEventListener(function(){d=a.getParent().getChildByTag(1);e=a.getParent().getChildByTag(2);d.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(4);a.getParent().getChildByTag(3).close()},this)));e.runAction(new cc.MoveTo(0.2,
cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)))});a.getParent().addChild(c);var d=new ccui.Button(LoveRedLineRes.seat_play_btn,LoveRedLineRes.seat_play_btn);d.setTag(1);d.setAnchorPoint(cc.p(1,0));d.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);d.addClickEventListener(function(){b.loadMemberSettingView(!1)});c=new cc.LabelTTF("\u5e2d\u9806\u3092\u6c7a\u3081\u308b");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,
243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,d.getContentSize().height/2);d.addChild(c);c=new cc.LabelTTF("\u30c6\u30fc\u30d6\u30eb\u306b\u5ea7\u308b\u7537\u5973\u306e\u9806\u756a\u3092\u6c7a\u3081\u308b");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(28);c.setFontFillColor(cc.color("#6fcdc1"));c.setScanPhixelRGB();c.setAnchorPoint(1,1);c.setPosition(-20,d.getContentSize().height/2);d.addChild(c);c=new cc.Sequence(new cc.MoveTo(0.2,cc.p(d.getPosition().x,a.y+a.getBoundingBox().height+
22+15+d.getBoundingBox().height)),new cc.callFunc(function(){a.setTouchEnabled(!0)},this));d.runAction(c);a.getParent().addChild(d);var e=new ccui.Button(LoveRedLineRes.love_play_btn,LoveRedLineRes.love_play_btn);e.setTag(2);e.setAnchorPoint(cc.p(1,0));e.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);e.addClickEventListener(function(){b.loadMemberSettingView(!0)});c=new cc.LabelTTF("\u904b\u547d\u306e\u8d64\u3044\u7cf8");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);
c.setFontFillColor(cc.color(255,243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,e.getContentSize().height/2);e.addChild(c);c=new cc.LabelTTF("\u597d\u307f\u306e\u7570\u6027\u540c\u58eb\u3092\u7d50\u3073\u3064\u3051\u308b");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(28);c.setFontFillColor(cc.color("#6fcdc1"));c.setScanPhixelRGB();c.setAnchorPoint(1,1);c.setPosition(-20,e.getContentSize().height/2);e.addChild(c);c=new cc.MoveTo(0.2,cc.p(e.getPosition().x,a.y+a.getBoundingBox().height+
22));e.runAction(c);a.getParent().addChild(e)}},loadMemberSettingView:function(a){this.m_state=this.STATE_MEMBERSETTING;var b=this,c="\u30d6\u30cb\u30e3 \u3070\u306b\u3089 \u30b8\u30a7\u30b9\u30bf \u304b\u3071\u3071 \u304f\u3089\u306e\u3059\u3051 \u304f\u308d\u307e\u308b \u30b3\u30a2\u3089\u3093 \u30dc\u30b9 \u306e\u3076\u3053 \u3074\u3087\u3053 \u3068\u308a\u3056\u3048\u3082\u3093 \u3060\u3044\u306a\u305d\u30fc \u30b9\u30ad\u30e3\u30c3\u30c8 \u30ad\u30ce\u30b3\u306e\u5b50 \u3046\u3055\u307d\u3093 random".split(" ");
this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new cc.Sprite(GlobalRes.color_6fcdc1);d.setScaleX(cc.winSize.width);d.setScaleY(100);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height));this.addChild(d);d=new cc.LabelTTF("\u53c2\u52a0\u8005\u767b\u9304");d.setFontSize(36);d.setFontFillColor(new cc.Color(255,243,191,255));d.setFontName(GAME_FONT.PRO_W3);d.setScanPhixelRGB();d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(cc.winSize.width>>
1,cc.winSize.height-50));this.addChild(d);var e=new cc.LabelTTF("00"),f=new cc.LabelTTF("00"),g=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);g.setTouchEnabled(!1);var d=function(a,b,c){var d=new ccui.Layout;d.setUserData(b);d.setContentSize(750,182);var e=new cc.Sprite("res/Global/cha_pop/cha_thumb_"+b.icon+".png");e.setAnchorPoint(0,0.5);e.setPosition(30,d.getContentSize().height-90);d.addChild(e);b=new cc.LabelTTF(b.name);b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(36);b.setFontFillColor(cc.color(111,
205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0,0.5);b.setPosition(e.getPosition().x+e.getContentSize().width+30,e.getPosition().y+2);d.addChild(b);b=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);b.setAnchorPoint(1,0.5);b.setPosition(d.getContentSize().width-30,e.getPosition().y);b.addClickEventListener(function(){a.removeItem(a.getIndex(d));c.setString(""+PAD(a.getItems().length,2));2<=m.getItems().length&&2<=l.getItems().length?(g.loadTextureNormal(GlobalRes.color_6fcdc1),g.loadTexturePressed(GlobalRes.color_6fcdc1),
g.setTouchEnabled(!0)):(g.loadTextureNormal(GlobalRes.color_c8c8c8),g.loadTexturePressed(GlobalRes.color_c8c8c8),g.setTouchEnabled(!1))});d.addChild(b);e=new cc.Sprite(GlobalRes.line_8);e.setAnchorPoint(0,0);e.setScaleX(d.getContentSize().width);e.setScaleY(0.25);d.addChild(e);a.pushBackDefaultItem();a.pushBackCustomItem(d);c.setString(""+PAD(a.getItems().length,2))},h=new cc.Sprite(GlobalRes.line_50);h.setScaleX(cc.winSize.width);h.setAnchorPoint(cc.p(0,1));h.setPosition(cc.p(0,cc.winSize.height-
100-100-8-180-8));this.addChild(h);var k=new cc.LabelTTF("3\u4eba\u4ee5\u4e0a\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(153,153,153,255));k.setAnchorPoint(0.5,0.5);k.setPosition(cc.winSize.width/2,h.getPosition().y-30);this.addChild(k);var m=new ccui.ListView;m.setDirection(ccui.ScrollView.DIR_VERTICAL);m.setTouchEnabled(!0);m.setBounceEnabled(!1);m.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-100-
8-8-180-200-50));m.setAnchorPoint(0,1);m.setPosition(0,cc.winSize.height-100-100-8-180-8-50);m.setVisible(!0);this.addChild(m);for(h=0;h<this.m_male.size();h++)d(m,this.m_male.get(h),e);var l=new ccui.ListView;l.setDirection(ccui.ScrollView.DIR_VERTICAL);l.setTouchEnabled(!0);l.setBounceEnabled(!1);l.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-100-8-8-180-200-50));l.setAnchorPoint(0,1);l.setPosition(0,cc.winSize.height-100-100-8-180-8-50);l.setVisible(!1);this.addChild(l);for(h=
0;h<this.m_women.size();h++)d(l,this.m_women.get(h),f);this.m_male.clear();this.m_women.clear();2<=m.getItems().length&&2<=l.getItems().length?(g.loadTextureNormal(GlobalRes.color_6fcdc1),g.loadTexturePressed(GlobalRes.color_6fcdc1),g.setTouchEnabled(!0)):(g.loadTextureNormal(GlobalRes.color_c8c8c8),g.loadTexturePressed(GlobalRes.color_c8c8c8),g.setTouchEnabled(!1));d=new cc.LabelTTF("\u2642\u7537\u6027");d.setAnchorPoint(0.5,0.5);d.setPosition(cc.winSize.width/2/2,47);d.setFontName(GAME_FONT.PRO_W3);
d.setFontFillColor(new cc.Color(111,205,193,255));d.setScanPhixelRGB();d.setFontSize(32);h=new ccui.Layout;h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color(111,205,193,255));h.setContentSize(cc.winSize.width/2,6);h.setAnchorPoint(0,0);h.setPosition(0,0);var p=new ccui.Layout;p.setContentSize(cc.winSize.width/2,100);p.setAnchorPoint(0,1);p.setPosition(0,cc.winSize.height-100);p.setTouchEnabled(!0);p.addChild(d);p.addChild(h);p.radiotext=d;p.isSelected=h;p.selected=
function(a){a?(b.m_sex=0,this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2642\u7537\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(111,205,193,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!0),m.setVisible(!0)):(this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2642\u7537\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/
2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(200,200,200,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!1),m.setVisible(!1))};p.selected(!0);this.addChild(p);d=new cc.LabelTTF("\u2640\u5973\u6027");d.setAnchorPoint(0.5,0.5);d.setPosition(cc.winSize.width/2/2,47);d.setFontName(GAME_FONT.PRO_W3);d.setFontFillColor(new cc.Color(111,205,193,255));d.setScanPhixelRGB();d.setFontSize(32);h=new ccui.Layout;h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);
h.setBackGroundColor(cc.color(111,205,193,255));h.setContentSize(cc.winSize.width/2,6);h.setAnchorPoint(0,0);h.setPosition(0,0);var n=new ccui.Layout;n.setContentSize(cc.winSize.width/2,100);n.setAnchorPoint(0,1);n.setPosition(cc.winSize.width/2,cc.winSize.height-100);n.setTouchEnabled(!0);n.addChild(d);n.addChild(h);n.radiotext=d;n.isSelected=h;n.selected=function(a){a?(b.m_sex=1,this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2640\u5973\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/
3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(111,205,193,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!0),l.setVisible(!0)):(this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2640\u5973\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(200,200,200,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),
this.isSelected.setVisible(!1),l.setVisible(!1))};n.selected(!1);this.addChild(n);p.addClickEventListener(function(){1==b.m_sex&&(q.loadTextureNormal(LoveRedLineRes.cha_thumb_random),q.loadTexturePressed(LoveRedLineRes.cha_thumb_random),w.setString(""),s.setVisible(!1));p.selected(!0);n.selected(!1)});n.addClickEventListener(function(){0==b.m_sex&&(q.loadTextureNormal(LoveRedLineRes.cha_thumb_random),q.loadTexturePressed(LoveRedLineRes.cha_thumb_random),w.setString(""),s.setVisible(!1));p.selected(!1);
n.selected(!0)});h=new cc.Sprite(GlobalRes.line_8);h.setScaleX(cc.winSize.width);h.setAnchorPoint(cc.p(0,1));h.setPosition(cc.p(0,cc.winSize.height-200));this.addChild(h);var r=function(a,b){for(var c=[],d=0;d<a.getItems().length;d++)a.getItem(d).getUserData().index==b&&c.push(a.getItem(d));return c},d=function(){if(15!=(0==b.m_sex?m:l).getItems().length){var a=w.isVisible();w.setVisible(!1);var d=new ccui.Layout;d.setTouchEnabled(!0);d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0.5,
0.5);d.setPosition(cc.winSize.width/2,cc.winSize.height/2);b.addChild(d,998);var e=new ccui.Layout;e.setTouchEnabled(!0);e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color(255,255,255,255));e.setContentSize(570,680);e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width/2,cc.winSize.height/2);b.addChild(e,999);d.addClickEventListener(function(){w.setVisible(a);e.removeFromParent();d.removeFromParent();b.getChildByTag(3).close()});for(var f={},g=0;16>g;g++){var h=
r(0==b.m_sex?m:l,g).length,k="res/Global/cha_pop/cha_pop_"+PAD(g+1,2)+"_off.png",k=new ccui.Button(k,k);k.setAnchorPoint(0,1);k.setPosition(55+(k.getContentSize().width+40)*parseInt(g%4),e.getContentSize().height-60-(k.getContentSize().height+40)*parseInt(g/4));k.setUserData({icon:""+PAD(g+1,2),name:c[g],index:g});var n=function(a){if(f.current){if(f.current.getUserData().icon===a.getUserData().icon)return;f.current.loadTextureNormal("res/Global/cha_pop/cha_pop_"+f.current.getUserData().icon+"_off.png");
f.current.loadTexturePressed("res/Global/cha_pop/cha_pop_"+f.current.getUserData().icon+"_off.png")}a.loadTextureNormal("res/Global/cha_pop/cha_pop_"+a.getUserData().icon+"_on.png");a.loadTexturePressed("res/Global/cha_pop/cha_pop_"+a.getUserData().icon+"_on.png");f.current=a;SoundManager.instance().playEffect(LoveRedLineRes.sound_normal_1)};2>h&&k.addClickEventListener(n);e.addChild(k);2<=h&&(h=new cc.Sprite(GroupingRes.cha_block),h.setAnchorPoint(0,1),h.setPosition(55+(k.getContentSize().width+
40)*parseInt(g%4),e.getContentSize().height-60-(k.getContentSize().height+40)*parseInt(g/4)),e.addChild(h))}var p=new ccui.Layout;p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color(111,205,193,255));p.setContentSize(570,100);p.setAnchorPoint(0,0);p.setTouchEnabled(!0);e.addChild(p);g=new cc.LabelTTF("\u78ba\u8a8d");g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(36);g.setAnchorPoint(0.5,0.5);g.setPosition(p.getContentSize().width/2,p.getContentSize().height/2);p.addChild(g);
p.addClickEventListener(function(){if(f.current){var g={};if("random"===f.current.getUserData().name){for(var h=Math.floor(15*Math.random());2==r(0==b.m_sex?m:l,h).length;)h=Math.floor(15*Math.random());1==r(0==b.m_sex?m:l,h).length?-1==r(0==b.m_sex?m:l,h)[0].getUserData().icon.indexOf("_b")?g.icon=""+PAD((0==b.m_sex?h:h+15)+1,2)+"_b":g.icon=""+PAD((0==b.m_sex?h:h+15)+1,2):g.icon=0==r(0==b.m_sex?m:l,h).length?""+PAD((0==b.m_sex?h:h+15)+1,2):""+PAD((0==b.m_sex?h:h+15)+1,2)+"_b";g.name=c[h];g.index=
h}else g.index=f.current.getUserData().index,1==r(0==b.m_sex?m:l,g.index).length?-1==r(0==b.m_sex?m:l,g.index)[0].getUserData().icon.indexOf("_b")?g.icon=""+PAD((0==b.m_sex?g.index:g.index+15)+1,2)+"_b":g.icon=""+PAD((0==b.m_sex?g.index:g.index+15)+1,2):g.icon=0==r(0==b.m_sex?m:l,g.index).length?""+PAD((0==b.m_sex?g.index:g.index+15)+1,2):""+PAD((0==b.m_sex?g.index:g.index+15)+1,2)+"_b",g.name=f.current.getUserData().name;q.loadTextureNormal("res/Global/cha_pop/cha_thumb_"+g.icon+".png");q.loadTexturePressed("res/Global/cha_pop/cha_thumb_"+
g.icon+".png");q.setUserData(g);q.setAnchorPoint(0,0.5);q.setPosition(30,cc.winSize.height-100-100-8-90);s.setVisible(!0);w.removeFromParent();w=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-q.getContentSize().width-s.getContentSize().width,180),new cc.Scale9Sprite,null,null,!0);w.setBodyStyle(1);w.setPlaceholderFontSize(36);w.setPlaceHolder("");w.setAnchorPoint(cc.p(0,0.5));w.setPosition(q.getPosition().x+q.getContentSize().width+30,cc.winSize.height-100-100-8-90);w.setDelegate(this);w.setFontName(GAME_FONT.PRO_W3);
w.setFontColor(cc.color(111,205,193,255));w.setFontSize(36);w.setMaxLength(12);b.addChild(w);w.setTag(6);w.setDisFocusCallback(t);p=new ccui.Button;p.setTitleText("\u78ba\u8a8d");w.setString(g.name);w.setUserData(g.name)}else w.setVisible(a);e.removeFromParent();d.removeFromParent();b.getChildByTag(3).close()});b.getChildByTag(3).open()}},q=new ccui.Button(LoveRedLineRes.cha_thumb_random,LoveRedLineRes.cha_thumb_random);q.setAnchorPoint(0,0.5);q.setPosition(30,cc.winSize.height-100-100-8-90);q.addClickEventListener(d);
this.addChild(q);var h=function(){var a=0==b.m_sex?m:l,c=0==b.m_sex?e:f;if(15!=a.getItems().length)if(w.getString()&&""!==w.getString()){var d={};d.icon=q.getUserData().icon;d.index=q.getUserData().index;d.sex=b.m_sex;d.name=w.getString();var h=new ccui.Layout;h.setUserData(d);h.setContentSize(750,182);var k=new cc.Sprite("res/Global/cha_pop/cha_thumb_"+d.icon+".png");k.setAnchorPoint(0,0.5);k.setPosition(30,h.getContentSize().height-90);h.addChild(k);d=new cc.LabelTTF(d.name);d.setFontName(GAME_FONT.PRO_W6);
d.setFontSize(36);d.setFontFillColor(cc.color(111,205,193,255));d.setScanPhixelRGB();d.setAnchorPoint(0,0.5);d.setPosition(k.getPosition().x+k.getContentSize().width+30,k.getPosition().y+2);h.addChild(d);d=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);d.setAnchorPoint(1,0.5);d.setPosition(h.getContentSize().width-30,k.getPosition().y);d.addClickEventListener(function(){a.removeItem(a.getIndex(h));c.setString(""+PAD(a.getItems().length,2));2<=m.getItems().length&&2<=l.getItems().length?
(g.loadTextureNormal(GlobalRes.color_6fcdc1),g.loadTexturePressed(GlobalRes.color_6fcdc1),g.setTouchEnabled(!0)):(g.loadTextureNormal(GlobalRes.color_c8c8c8),g.loadTexturePressed(GlobalRes.color_c8c8c8),g.setTouchEnabled(!1))});h.addChild(d);k=new cc.Sprite(GlobalRes.line_8);k.setAnchorPoint(0,0);k.setScaleX(h.getContentSize().width);k.setScaleY(0.25);h.addChild(k);a.pushBackDefaultItem();a.pushBackCustomItem(h);c.setString(""+PAD(a.getItems().length,2));2<=m.getItems().length&&2<=l.getItems().length?
(g.loadTextureNormal(GlobalRes.color_6fcdc1),g.loadTexturePressed(GlobalRes.color_6fcdc1),g.setTouchEnabled(!0)):(g.loadTextureNormal(GlobalRes.color_c8c8c8),g.loadTexturePressed(GlobalRes.color_c8c8c8),g.setTouchEnabled(!1));w.setString("");w.setInputblur();s.setVisible(!1);q.loadTextureNormal(LoveRedLineRes.cha_thumb_random);q.loadTexturePressed(LoveRedLineRes.cha_thumb_random);q.setUserData("")}else alert("\u540d\u524d\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")},s=new ccui.Button(GlobalRes.addition_btn,
GlobalRes.addition_btn);s.setAnchorPoint(1,0.5);s.setPosition(cc.winSize.width-30,cc.winSize.height-100-100-8-90);s.setVisible(!1);s.addClickEventListener(h);s.setTag(7);k=new ccui.Layout;k.setContentSize(145,120);k.setTouchEnabled(!0);k.addClickEventListener(h);k.setAnchorPoint(0.5,0.5);k.setPosition(s.getContentSize().width>>1,s.getContentSize().height>>1);s.addChild(k);this.addChild(s);var t=function(a){a&&""!==a?(b.getChildByTag(5).setVisible(!1),b.getChildByTag(6).setVisible(!0)):(b.getChildByTag(5).setVisible(!0),
b.getChildByTag(6).setVisible(!1),b.getChildByTag(7).setVisible(!1))},w=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-q.getContentSize().width-s.getContentSize().width,180),new cc.Scale9Sprite);w.setPlaceholderFontSize(36);w.setAnchorPoint(cc.p(0,0.5));w.setPosition(q.getPosition().x+q.getContentSize().width+30,cc.winSize.height-100-100-8-90);w.setDelegate(this);w.setFontName(GAME_FONT.PRO_W3);w.setFontColor(cc.color(111,205,193,255));w.setFontSize(36);w.setMaxLength(12);w.setVisible(!1);w.setTag(6);
w.setDisFocusCallback(t);this.addChild(w);h=new cc.LabelTTF("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(36);h.setFontFillColor(cc.color.GRAY);k=new ccui.Layout;k.setTouchEnabled(!0);k.setContentSize(h.getContentSize());k.setAnchorPoint(0,0.5);k.setPosition(q.getPosition().x+q.getContentSize().width+30,cc.winSize.height-100-100-8-90);this.addChild(k);h.setAnchorPoint(0,0.5);h.setPosition(0,k.getContentSize().height/2);k.addChild(h);
k.setTag(5);k.addClickEventListener(d);d=new cc.Sprite(GlobalRes.line_8);d.setScaleX(cc.winSize.width);d.setAnchorPoint(0,1);d.setPosition(0,m.getPosition().y-m.getContentSize().height);this.addChild(d);h=new cc.LabelTTF("\u53c2\u52a0\u8005\uff1a\u7537\u6027");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color(153,153,153,255));this.addChild(h);e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(26);e.setFontFillColor(cc.color(111,205,193,255));this.addChild(e);k=new cc.LabelTTF("\u4eba/\u5973\u6027");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(153,153,153,255));this.addChild(k);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color(111,205,193,255));this.addChild(f);var u=new cc.LabelTTF("\u4eba");u.setFontName(GAME_FONT.PRO_W3);u.setFontSize(26);u.setFontFillColor(cc.color(153,153,153,255));this.addChild(u);var x=h.getContentSize().width+e.getContentSize().width+k.getContentSize().width+f.getContentSize().width+u.getContentSize().width;
h.setAnchorPoint(0,1);h.setPosition(cc.winSize.width/2-x/2,d.getPosition().y-8-30);e.setAnchorPoint(0,1);e.setPosition(h.getPosition().x+h.getContentSize().width,d.getPosition().y-8-30);k.setAnchorPoint(0,1);k.setPosition(e.getPosition().x+e.getContentSize().width,d.getPosition().y-8-30);f.setAnchorPoint(0,1);f.setPosition(k.getPosition().x+k.getContentSize().width,d.getPosition().y-8-30);u.setAnchorPoint(0,1);u.setPosition(f.getPosition().x+f.getContentSize().width,d.getPosition().y-8-30);d=new ccui.Layout;
d.setContentSize(200,80);d.setAnchorPoint(0.5,1);d.setPosition(cc.winSize.width/2,e.getPosition().y-e.getContentSize().height-30);this.addChild(d);g.setScale(200,80);g.setAnchorPoint(0,0);g.addClickEventListener(function(){for(var c=0;c<m.getItems().length;c++)b.m_male.add(m.getItems()[c].getUserData());for(c=0;c<l.getItems().length;c++)b.m_women.add(l.getItems()[c].getUserData());a?b.loadChooseView():b.loadEnvironmentSetting()});d.addChild(g);h=new cc.LabelTTF("\u767b\u9332\u5b8c\u4e86");h.setFontName(GAME_FONT.PRO_W3);
h.setFontSize(26);h.setFontFillColor(cc.color(255,255,255,255));h.setScanPhixelRGB();h.setAnchorPoint(0.5,0.5);h.setPosition(d.getContentSize().width/2,d.getContentSize().height/2);d.addChild(h);d=new Mask;d.setTag(3);d.close();this.addChild(d)},loadEnvironmentSetting:function(){this.m_groupMode=this.m_tableMode=0;this.m_state=this.STATE_ENVIRONMENTSETTING;var a=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var b=new cc.Sprite(GlobalRes.color_6fcdc1);b.setScaleX(cc.winSize.width);
b.setScaleY(100);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height));this.addChild(b);b=new cc.LabelTTF("\u4e26\u3073\u65b9\u8a2d\u5b9a");b.setFontSize(36);b.setFontFillColor(new cc.Color(255,243,191,255));b.setFontName(GAME_FONT.PRO_W3);b.setScanPhixelRGB();b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(b);b=new cc.Sprite(GlobalRes.line_50);b.setScale(cc.winSize.width,1);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,
cc.winSize.height-100));this.addChild(b);b=new cc.LabelTTF("\u30c6\u30fc\u30d6\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044");b.setFontSize(24);b.setFontFillColor(cc.color(200,200,200,255));b.setFontName(GAME_FONT.PRO_W3);b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-100-25));this.addChild(b);b=new ccui.Layout;b.setContentSize(cc.winSize.width,120);b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height-100-50);this.addChild(b);var c=new ccui.Layout;
c.setContentSize(270,80);c.setAnchorPoint(1,0.5);c.setPosition(b.getContentSize().width/2-20,b.getContentSize().height/2);c.setTouchEnabled(!0);c.selected=function(b){b?(a.m_tableMode=0,this.roundrect.setVisible(!0)):this.roundrect.setVisible(!1)};b.addChild(c);var d=new cc.LabelTTF("\u5186\u5f62\u30c6\u30fc\u30d6\u30eb");d.setFontSize(36);d.setFontFillColor(cc.color(111,205,193,255));d.setFontName(GAME_FONT.PRO_W3);d.setScanPhixelRGB();d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width>>
1,c.getContentSize().height/2));c.addChild(d);d=new cc.Sprite(LoveRedLineRes.roundrect);d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width>>1,c.getContentSize().height/2));c.roundrect=d;c.addChild(d);var e=new ccui.Layout;e.setContentSize(270,80);e.setAnchorPoint(0,0.5);e.setPosition(b.getContentSize().width/2+20,b.getContentSize().height/2);e.setTouchEnabled(!0);e.selected=function(b){b?(a.m_tableMode=1,this.roundrect.setVisible(!0)):this.roundrect.setVisible(!1)};b.addChild(e);
b=new cc.LabelTTF("\u9577\u5f62\u30c6\u30fc\u30d6\u30eb");b.setFontSize(36);b.setFontFillColor(cc.color(111,205,193,255));b.setFontName(GAME_FONT.PRO_W3);b.setScanPhixelRGB();b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(e.getContentSize().width>>1,e.getContentSize().height/2));e.addChild(b);b=new cc.Sprite(LoveRedLineRes.roundrect);b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(e.getContentSize().width>>1,e.getContentSize().height/2));b.setVisible(!1);e.roundrect=b;e.addChild(b);c.addClickEventListener(function(){c.selected(!0);
e.selected(!1)});e.addClickEventListener(function(){c.selected(!1);e.selected(!0)});b=new cc.Sprite(GlobalRes.line_50);b.setScale(cc.winSize.width,1);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height-100-50-120));this.addChild(b);b=new cc.LabelTTF("\u7537\u5973\u306e\u4e26\u3073\u65b9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044");b.setFontSize(24);b.setFontFillColor(cc.color(200,200,200,255));b.setFontName(GAME_FONT.PRO_W3);b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>
1,cc.winSize.height-100-50-120-25));this.addChild(b);b=new ccui.Layout;b.setContentSize(cc.winSize.width,120);b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height-100-50-120-50);this.addChild(b);var f=new ccui.Layout;f.setContentSize(270,80);f.setAnchorPoint(1,0.5);f.setPosition(b.getContentSize().width/2-20,b.getContentSize().height/2);f.setTouchEnabled(!0);f.selected=function(b){b?(a.m_groupMode=0,this.roundrect.setVisible(!0)):this.roundrect.setVisible(!1)};b.addChild(f);d=new cc.LabelTTF("\u7537\u5973\u5206\u3051\u308b");
d.setFontSize(36);d.setFontFillColor(cc.color(111,205,193,255));d.setFontName(GAME_FONT.PRO_W3);d.setScanPhixelRGB();d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(f.getContentSize().width>>1,f.getContentSize().height/2));f.addChild(d);d=new cc.Sprite(LoveRedLineRes.roundrect);d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(f.getContentSize().width>>1,f.getContentSize().height/2));f.roundrect=d;f.addChild(d);var g=new ccui.Layout;g.setContentSize(270,80);g.setAnchorPoint(0,0.5);g.setPosition(b.getContentSize().width/
2+20,b.getContentSize().height/2);g.setTouchEnabled(!0);g.selected=function(b){b?(a.m_groupMode=1,this.roundrect.setVisible(!0)):this.roundrect.setVisible(!1)};b.addChild(g);b=new cc.LabelTTF("\u7537\u5973\u6df7\u5408");b.setFontSize(36);b.setFontFillColor(cc.color(111,205,193,255));b.setFontName(GAME_FONT.PRO_W3);b.setScanPhixelRGB();b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(g.getContentSize().width>>1,g.getContentSize().height/2));g.addChild(b);b=new cc.Sprite(LoveRedLineRes.roundrect);
b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(g.getContentSize().width>>1,g.getContentSize().height/2));b.setVisible(!1);g.roundrect=b;g.addChild(b);f.addClickEventListener(function(){f.selected(!0);g.selected(!1)});g.addClickEventListener(function(){f.selected(!1);g.selected(!0)});b=new cc.Sprite(GlobalRes.line_8);b.setScaleX(cc.winSize.width);b.setAnchorPoint(0,0);b.setPosition(0,140);this.addChild(b);b=new ccui.Layout;b.setContentSize(300,80);b.setAnchorPoint(0.5,0);b.setPosition(cc.winSize.width/
2,30);this.addChild(b);d=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);d.setScale(b.getContentSize().width,b.getContentSize().height);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(function(){a.loadTabelResult(!1)});b.addChild(d);d=new cc.LabelTTF("\u5e2d\u9806\u3092\u6c7a\u5b9a\u3078");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(26);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(b.getContentSize().width/
2,b.getContentSize().height/2);b.addChild(d)},loadTabelResult:function(a){this.m_state=this.STATE_TAGBELRESULT;this.m_history=a;var b=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var c={mode:"seat"};c.tableMode=this.m_tableMode;c.groupMode=this.m_groupMode;c.male=[];for(var d=0;d<this.m_male.size();d++)c.male.push(this.m_male.get(d));c.women=[];for(d=0;d<this.m_women.size();d++)c.women.push(this.m_women.get(d));var e=new cc.LabelTTF("\u53c2\u52a0\u8005\uff1a\u7537\u6027");
e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(26);e.setFontFillColor(cc.color(153,153,153,255));this.addChild(e);d=new cc.LabelTTF(""+PAD(this.m_male.size(),2));d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(26);d.setFontFillColor(cc.color(111,205,193,255));this.addChild(d);var f=new cc.LabelTTF("\u4eba/\u5973\u6027");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color(153,153,153,255));this.addChild(f);var g=new cc.LabelTTF(""+PAD(this.m_women.size(),2));g.setFontName(GAME_FONT.PRO_W3);
g.setFontSize(26);g.setFontFillColor(cc.color(111,205,193,255));this.addChild(g);var h=new cc.LabelTTF("\u4eba");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color(153,153,153,255));this.addChild(h);var k=e.getContentSize().width+d.getContentSize().width+f.getContentSize().width+g.getContentSize().width+h.getContentSize().width;e.setAnchorPoint(0,0);e.setPosition(cc.winSize.width/2-k/2,140);d.setAnchorPoint(0,0);d.setPosition(e.getPosition().x+e.getContentSize().width,140);
f.setAnchorPoint(0,0);f.setPosition(d.getPosition().x+d.getContentSize().width,140);g.setAnchorPoint(0,0);g.setPosition(f.getPosition().x+f.getContentSize().width,140);h.setAnchorPoint(0,0);h.setPosition(g.getPosition().x+g.getContentSize().width,140);var m=new ccui.ScrollView;m.setTouchEnabled(!0);m.setDirection(ccui.ScrollView.DIR_BOTH);m.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-30-80-30-e.getContentSize().height-30-8));m.setAnchorPoint(0,0);m.setPosition(0,140+e.getContentSize().height+
30+8);m.setInnerContainerSize(cc.size(cc.winSize.width,cc.winSize.height-30-80-30-e.getContentSize().height-30-8));this.addChild(m);d=new ccui.Layout;d.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-30-80-30-e.getContentSize().height-30-8));d.setAnchorPoint(0,0);d.setPosition(0,140+e.getContentSize().height+30+8);this.addChild(d);if(0==this.m_tableMode){var l=this.m_male.size()+this.m_women.size(),p=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes["table"+l+"_json"]).node,"table_layout");
p.removeFromParent();p.getContentSize().height>m.getContentSize().height&&m.setInnerContainerSize(cc.size(m.getInnerContainerSize().width,p.getContentSize().height));p.setAnchorPoint(0.5,0.5);p.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2);m.addChild(p);var l=this.m_male.size()+this.m_women.size(),n=1;if(13==l||14==l)n=0.9;else if(15==l||16==l)n=0.765;else if(17==l||18==l)n=0.6885;else if(19==l||20==l)n=0.61965;else if(21==l||22==l)n=0.557685;else if(23==l||24==
l)n=0.5130702;else if(25==l||26==l)n=0.472024584;else if(27==l||28==l)n=0.43426261728;else if(29==l||30==l)n=0.4038642340704;var r=cc.size(m.getInnerContainerSize().width,m.getInnerContainerSize().height),q=function(a){return a?cc.p((m.getContentSize().width-m.getInnerContainer().getContentSize().width)/2,(m.getContentSize().height-m.getInnerContainer().getContentSize().height)/2):cc.p(m.getContentSize().width-m.getInnerContainer().getContentSize().width,m.getContentSize().height-m.getInnerContainer().getContentSize().height)};
m.getInnerContainer().setPosition(q(!1));var s=0,t=1,k=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){if(12>l)return!1;var c=a.getLocation(),d=(new Date).getTime();300>d-s?(t==1/n?(t=1,m.setInnerContainerSize(cc.size(r.width*t,r.height*t)),p.setScale(t,t),p.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2),m.getInnerContainer().setPosition(q(!1))):(t=1/n,m.setInnerContainerSize(cc.size(r.width*t,r.height*
t)),p.setScale(t,t),p.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2),m.getInnerContainer().setPosition(q(!0)),c=m.convertToNodeSpace(c),m.getInnerContainer().setPosition(m.getInnerContainer().getPosition().x-(c.x-m.getContentSize().width/2)*t,m.getInnerContainer().getPosition().y-(c.y-m.getContentSize().height/2)*t)),s=0):s=d;return!1}});cc.eventManager.addListener(k,d);if(0==this.m_groupMode)for(d=0;d<l;d++)f=ccui.helper.seekWidgetByName(ccui.helper.seekWidgetByName(p,
"FileNode_"+(d+1)),"Panel"),d<this.m_male.size()?(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_male.get(d).icon+".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_male.get(d).name)):(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_women.get(d-this.m_male.size()).icon+".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_women.get(d-this.m_male.size()).name));else{k=!0;for(d=h=g=0;d<l;d++)f=
ccui.helper.seekWidgetByName(ccui.helper.seekWidgetByName(p,"FileNode_"+(d+1)),"Panel"),ccui.helper.seekWidgetByName(f,"icon").setVisible(!0),ccui.helper.seekWidgetByName(f,"name").setVisible(!0),k?g<this.m_male.size()?(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_male.get(g).icon+".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_male.get(g).name),g++):(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_women.get(h).icon+
".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_women.get(h).name),h++):h<this.m_women.size()?(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_women.get(h).icon+".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_women.get(h).name),h++):(ccui.helper.seekWidgetByName(f,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_male.get(g).icon+".png"),ccui.helper.seekWidgetByName(f,"name").setString(this.m_male.get(g).name),g++),k=
!k}}else{var l=this.m_male.size()+this.m_women.size(),w=0;4==l?w=2:4<l&&6>=l?w=3:6<l&&8>=l?w=4:8<l&&(w=6);n=1;if(13==l||14==l)n=0.9;else if(15==l||16==l)n=0.765;else if(17==l||18==l)n=0.6885;else if(19==l||20==l)n=0.61965;else if(21==l||22==l)n=0.557685;else if(23==l||24==l)n=0.5130702;else if(25==l||26==l)n=0.472024584;else if(27==l||28==l)n=0.43426261728;else if(29==l||30==l)n=0.4038642340704;k=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,"Panel");f=0==l%2?l:l+1;g=new ccui.Layout;
g.setContentSize(k.getContentSize().width*n,k.getContentSize().height*n*(f/2)+5*(f-1)/2);h=new ccui.Layout;h.setContentSize(k.getContentSize().width*n,k.getContentSize().height*n*(f/2)+5*(f-1)/2);p=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes["table"+w+"X_json"]).node,"table_layout");p.removeFromParent();var u=new ccui.Layout;u.setContentSize(g.getContentSize().width+h.getContentSize().width+p.getContentSize().width,g.getContentSize().height>p.getContentSize().height?g.getContentSize().height:
p.getContentSize().height);u.getContentSize().height>m.getContentSize().height&&m.setInnerContainerSize(cc.size(m.getInnerContainerSize().width,u.getContentSize().height));u.setAnchorPoint(0.5,0.5);u.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2);m.addChild(u);r=cc.size(m.getInnerContainerSize().width,m.getInnerContainerSize().height);q=function(a){return a?cc.p((m.getContentSize().width-m.getInnerContainer().getContentSize().width)/2,(m.getContentSize().height-
m.getInnerContainer().getContentSize().height)/2):cc.p(m.getContentSize().width-m.getInnerContainer().getContentSize().width,m.getContentSize().height-m.getInnerContainer().getContentSize().height)};m.getInnerContainer().setPosition(q(!1));s=0;t=1;k=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){if(12>l)return!1;var c=a.getLocation(),d=(new Date).getTime();300>d-s?(t==1/n?(t=1,m.setInnerContainerSize(cc.size(r.width*t,r.height*t)),u.setScale(t,
t),u.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2),m.getInnerContainer().setPosition(q(!1))):(t=1/n,m.setInnerContainerSize(cc.size(r.width*t,r.height*t)),u.setScale(t,t),u.setPosition(m.getInnerContainerSize().width/2,m.getInnerContainerSize().height/2),m.getInnerContainer().setPosition(q(!0)),c=m.convertToNodeSpace(c),m.getInnerContainer().setPosition(m.getInnerContainer().getPosition().x-(c.x-m.getContentSize().width/2)*t,m.getInnerContainer().getPosition().y-
(c.y-m.getContentSize().height/2)*t)),s=0):s=d;return!1}});cc.eventManager.addListener(k,d);g.setAnchorPoint(0,0.5);g.setPosition(0,u.getContentSize().height/2);u.addChild(g);p.setAnchorPoint(0.5,0.5);p.setPosition(u.getContentSize().width/2,u.getContentSize().height/2);u.addChild(p);h.setAnchorPoint(1,0.5);h.setPosition(u.getContentSize().width,u.getContentSize().height/2);u.addChild(h);var w=new ArrayList,x=new ArrayList;if(0==this.m_groupMode)for(d=0;d<l;d++)d<this.m_male.size()?d<f/2?w.add(this.m_male.get(d)):
x.add(this.m_male.get(d)):d<f/2?w.add(this.m_women.get(d-this.m_male.size())):x.add(this.m_women.get(d-this.m_male.size()));else for(var v=new ArrayList(this.m_male),A=new ArrayList(this.m_women),d=0,k=!0;d<l;d++)k?d<f/2?w.add(0<v.size()?v.removeIndex(0):A.removeIndex(0)):x.add(0<v.size()?v.removeIndex(0):A.removeIndex(0)):d<f/2?w.add(0<A.size()?A.removeIndex(0):v.removeIndex(0)):x.add(0<A.size()?A.removeIndex(0):v.removeIndex(0)),k=!k;for(d=0;d<w.size();d++)k=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,
"Panel"),k.removeFromParent(),k.setScaleX(n),k.setScaleY(n),ccui.helper.seekWidgetByName(k,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+w.get(d).icon+".png"),ccui.helper.seekWidgetByName(k,"name").setString(w.get(d).name),k.setAnchorPoint(0,1),k.setPosition(0,g.getContentSize().height-(k.getContentSize().height*n+5)*d),g.addChild(k);for(d=0;d<x.size();d++)k=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,"Panel"),k.removeFromParent(),k.setScaleX(n),k.setScaleY(n),ccui.helper.seekWidgetByName(k,
"icon").setTexture("res/Global/cha_pop/cha_thumb_"+x.get(d).icon+".png"),ccui.helper.seekWidgetByName(k,"name").setString(x.get(d).name),k.setAnchorPoint(0,1),k.setPosition(0,h.getContentSize().height-(k.getContentSize().height*n+5)*d),h.addChild(k)}d=new cc.Sprite(GlobalRes.line_8);d.setScaleX(cc.winSize.width);d.setAnchorPoint(0,0);d.setPosition(0,140+e.getContentSize().height+30);this.addChild(d);if(a)a=new ccui.Layout,a.setContentSize(250,80),a.setAnchorPoint(0,0),a.setPosition(cc.winSize.width/
2-305-5,30,30),this.addChild(a),e=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1),e.setScale(250,80),e.setAnchorPoint(0,0),e.setTouchEnabled(!0),e.addClickEventListener(function(){b.loadMemberSettingView(!1)}),a.addChild(e),d=new cc.LabelTTF("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f"),d.setFontName(GAME_FONT.PRO_W3),d.setFontSize(26),d.setFontFillColor(cc.color(255,255,255,255)),d.setScanPhixelRGB(),d.setAnchorPoint(0.5,0.5),d.setPosition(a.getContentSize().width/2,a.getContentSize().height/
2),a.addChild(d),a=new ccui.Layout,a.setContentSize(350,80),a.setAnchorPoint(0,0),a.setPosition(cc.winSize.width/2-305+255,30),this.addChild(a),e=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1),e.setScale(350,80),e.setAnchorPoint(0,0),e.setTouchEnabled(!0),e.addClickEventListener(function(){b.loadChooseView()}),a.addChild(e),d=new cc.LabelTTF("\u540c\u3058\u30e1\u30f3\u30d0\u30fc\u3067\u8d64\u3044\u7cf8\u3078Go!"),d.setFontName(GAME_FONT.PRO_W3),d.setFontSize(26),d.setFontFillColor(cc.color(255,
255,255,255)),d.setScanPhixelRGB(),d.setAnchorPoint(0.5,0.5),d.setPosition(a.getContentSize().width/2,a.getContentSize().height/2),a.addChild(d);else{a=new ccui.Layout;a.setContentSize(350,80);a.setAnchorPoint(0,0);a.setPosition(cc.winSize.width/2-255+155,30);this.addChild(a);e=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);e.setScale(350,80);e.setAnchorPoint(0,0);e.setTouchEnabled(!0);e.addClickEventListener(function(){b.loadChooseView()});a.addChild(e);e=new ccui.Layout;e.setContentSize(150,
80);e.setAnchorPoint(0,0);e.setPosition(cc.winSize.width/2-255-5,30);this.addChild(e);d=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);d.setScale(150,80);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);f=function(){B.open();var a=new ccui.Layout;a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width/2,cc.winSize.height/2);a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(255,255,255,255));b.addChild(a,999);var d=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");
d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(30);d.setFontFillColor(new cc.Color(111,205,193,255));d.setScanPhixelRGB();d.setAnchorPoint(0,1);a.setContentSize(570,270+d.getContentSize().height);d.setPosition(35,a.getContentSize().height-40);a.addChild(d);var e=new cc.Sprite(GlobalRes.color_eeeeee);e.setAnchorPoint(0,0);e.setPosition(35,d.getPosition().y-d.getContentSize().height-30-58);e.setScale(498,1);a.addChild(e);for(var f=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),e="",g=0;g<b.m_male.size();g++)e+=
b.m_male.get(g).name,e+="\u3001";for(g=0;g<b.m_women.size();g++)e+=b.m_women.get(g).name,g!=b.m_women.size()-1&&(e+="\u3001");f.setFontSize(34);f.setFontColor(new cc.Color(111,205,193,255));f.setString(e);f.setFontName(GAME_FONT.PRO_W3);f.setAnchorPoint(0,1);f.setPosition(36,d.getPosition().y-d.getContentSize().height-30-1);a.addChild(f);d=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);d.setScale(285,100);d.setAnchorPoint(0,0);d.setPosition(285,0);a.addChild(d);d.addClickEventListener(function(){""===
f.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):(c.title=f.getString(),DataManager.instance().createHistory(GAME_TYPE.LoveRedLine,c),b.loadMainView())});d=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);d.setScale(285,100);d.setAnchorPoint(0,0);d.setPosition(0,0);a.addChild(d);d.addClickEventListener(function(){b.loadMainView()});d=new cc.LabelTTF("\u4fdd\u5b58");d.setFontName(GAME_FONT.PRO_W6);d.setFontSize(30);d.setFontFillColor(cc.color(255,
255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(427.5,50);a.addChild(d);d=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");d.setFontName(GAME_FONT.PRO_W6);d.setFontSize(30);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(142.5,50);a.addChild(d)};b.m_func_isbacktomain=f;d.addClickEventListener(f);e.addChild(d);d=new cc.LabelTTF("\u540c\u3058\u30e1\u30f3\u30d0\u30fc\u3067\u8d64\u3044\u7cf8\u3078Go!");d.setFontName(GAME_FONT.PRO_W3);
d.setFontSize(26);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(a.getContentSize().width/2,a.getContentSize().height/2);a.addChild(d);a=new cc.LabelTTF("\u30db\u30fc\u30e0");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,255,255,255));a.setScanPhixelRGB();a.setAnchorPoint(0.5,0.5);a.setPosition(e.getContentSize().width/2,e.getContentSize().height/2);e.addChild(a);var B=new Mask;this.addChild(B,99);B.close()}},
loadChooseView:function(){this.m_state=this.STATE_CHOOSEVIEW;var a=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var b=new cc.Sprite(GlobalRes.color_6fcdc1);b.setScaleX(cc.winSize.width);b.setScaleY(100);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height));this.addChild(b);b=new cc.LabelTTF("\u904b\u547d\u306e\u9078\u629e");b.setFontSize(36);b.setFontFillColor(new cc.Color(255,243,191,255));b.setFontName(GAME_FONT.PRO_W3);b.setScanPhixelRGB();
b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(b);var c=new ccui.ListView;c.setDirection(ccui.ScrollView.DIR_VERTICAL);c.setTouchEnabled(!0);c.setBounceEnabled(!1);c.setAnchorPoint(0,1);c.setVisible(!0);this.addChild(c);var d=new ccui.ListView;d.setDirection(ccui.ScrollView.DIR_VERTICAL);d.setTouchEnabled(!0);d.setBounceEnabled(!1);d.setAnchorPoint(0,1);d.setVisible(!1);this.addChild(d);for(var b=function(b,e){var f=new ccui.Layout;f.setUserData(b);
f.setContentSize(750,182);f.setTouchEnabled(!0);var g=new cc.Sprite("res/Global/cha_pop/cha_thumb_"+b.icon+".png");g.setAnchorPoint(0,0.5);g.setPosition(30,f.getContentSize().height-90);f.addChild(g);var k=new cc.LabelTTF(b.name);k.setFontName(GAME_FONT.PRO_W6);k.setFontSize(36);k.setFontFillColor(cc.color(111,205,193,255));k.setScanPhixelRGB();k.setAnchorPoint(0,0);k.setPosition(g.getPosition().x+g.getContentSize().width+30,g.getPosition().y+2);f.addChild(k);g=new cc.Sprite(GlobalRes.line_8);g.setAnchorPoint(0,
0);g.setScaleX(f.getContentSize().width);g.setScaleY(0.25);f.addChild(g);f.addClickEventListener(function(b){var e=new RoundRect(cc.winSize.width-30-30,cc.winSize.height-150-150);e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);a.addChild(e,999);var f=new ccui.Layout;f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color("#fdfcf3"));f.setContentSize(e.getContentSize().width,92);f.setAnchorPoint(0,1);f.setPosition(0,e.getContentSize().height);
e.addChild(f);var g=new cc.LabelTTF("\u597d\u307f\u306e\u7570\u6027\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044");g.setFontSize(32);g.setFontFillColor(new cc.Color(200,200,200,255));g.setFontName(GAME_FONT.PRO_W3);g.setScanPhixelRGB();g.setAnchorPoint(0.5,1);g.setPosition(e.getContentSize().width>>1,e.getContentSize().height-30);e.addChild(g);f=new ccui.Layout;f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color(111,205,193,255));f.setContentSize(e.getContentSize().width,
2);f.setAnchorPoint(0,1);f.setPosition(0,e.getContentSize().height-30-30-g.getContentSize().height);e.addChild(f);f=new ccui.ListView;f.setDirection(ccui.ScrollView.DIR_VERTICAL);f.setTouchEnabled(!0);f.setBounceEnabled(!1);f.setAnchorPoint(0,0);f.setContentSize(e.getContentSize().width,e.getContentSize().height-30-30-g.getContentSize().height-100-1);f.setPosition(0,100);e.addChild(f);for(var g=1==a.m_sex?a.m_male:a.m_women,k=null,l=0;l<g.size();l++){var n=new ccui.Layout;n.setUserData(g.get(l));
n.setContentSize(750,176);n.setTouchEnabled(!0);var p=new cc.Sprite("res/Global/cha_pop/cha_thumb_"+g.get(l).icon+".png");p.setAnchorPoint(0,0.5);p.setPosition(30,n.getContentSize().height-90);n.addChild(p);if(b.getUserData().select&&b.getUserData().select===""+g.get(l).name+g.get(l).icon){var v=new cc.Sprite(LoveRedLineRes.selected_popup);v.setAnchorPoint(0,0.5);v.setPosition(30,n.getContentSize().height-90);v.setTag(1);n.addChild(v);k=n}v=new cc.LabelTTF(g.get(l).name);v.setFontName(GAME_FONT.PRO_W6);
v.setFontSize(36);v.setFontFillColor(cc.color(111,205,193,255));v.setScanPhixelRGB();v.setAnchorPoint(0,0);v.setPosition(p.getPosition().x+p.getContentSize().width+30,p.getPosition().y+2);n.addChild(v);p=new ccui.Layout;p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color("#eeeeee"));p.setContentSize(e.getContentSize().width,2);p.setAnchorPoint(0,0);p.setPosition(0,0);n.addChild(p);n.addClickEventListener(function(a){if(k!=a){k&&k.removeChildByTag(1,!0);k=a;var b=new cc.Sprite(LoveRedLineRes.selected_popup);
b.setAnchorPoint(0,0.5);b.setPosition(31,a.getContentSize().height-90);b.setTag(1);a.addChild(b)}});f.pushBackDefaultItem();f.pushBackCustomItem(n)}f=new ccui.Layout;f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color(111,205,193,255));f.setContentSize(e.getContentSize().width,100);f.setAnchorPoint(0,0);f.setTouchEnabled(!0);e.addChild(f);g=new cc.LabelTTF("\u9078\u629e\u5b8c\u4e86");g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(36);g.setAnchorPoint(0.5,0.5);g.setPosition(f.getContentSize().width/
2,f.getContentSize().height/2);f.addChild(g);f.addClickEventListener(function(){if(k){b.getUserData().select=""+k.getUserData().name+k.getUserData().icon;var f=new cc.Sprite(LoveRedLineRes.selected_self);f.setAnchorPoint(0,0.5);f.setPosition(30,b.getContentSize().height-90);b.addChild(f)}for(var g=f=0;g<c.getItems().length;g++)c.getItems()[g].getUserData().select&&f++;for(var l=0,g=0;g<d.getItems().length;g++)d.getItems()[g].getUserData().select&&l++;l+f==c.getItems().length+d.getItems().length&&
(s.loadTextureNormal(GlobalRes.color_6fcdc1),s.loadTexturePressed(GlobalRes.color_6fcdc1),s.setTouchEnabled(!0));h.setString(PAD(f,2));m.setString(PAD(l,2));e.removeFromParent();a.getChildByTag(3).close()});a.getChildByTag(3).open()});e.pushBackDefaultItem();e.pushBackCustomItem(f)},e=0;e<this.m_male.size();e++)b(this.m_male.get(e),c);for(e=0;e<this.m_women.size();e++)b(this.m_women.get(e),d);b=new cc.LabelTTF("\u2642\u7537\u6027");b.setAnchorPoint(0.5,0.5);b.setPosition(cc.winSize.width/2/2,47);
b.setFontName(GAME_FONT.PRO_W3);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();b.setFontSize(32);e=new ccui.Layout;e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color(111,205,193,255));e.setContentSize(cc.winSize.width/2,6);e.setAnchorPoint(0,0);e.setPosition(0,0);var f=new ccui.Layout;f.setContentSize(cc.winSize.width/2,100);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100);f.setTouchEnabled(!0);f.addChild(b);f.addChild(e);f.radiotext=
b;f.isSelected=e;f.selected=function(b){b?(a.m_sex=0,this.radiotext.setFontFillColor(new cc.Color(111,205,193,255)),this.isSelected.setVisible(!0),c.setVisible(!0)):(this.radiotext.setFontFillColor(new cc.Color(200,200,200,255)),this.isSelected.setVisible(!1),c.setVisible(!1))};f.selected(!0);this.addChild(f);b=new cc.LabelTTF("\u2640\u5973\u6027");b.setAnchorPoint(0.5,0.5);b.setPosition(cc.winSize.width/2/2,47);b.setFontName(GAME_FONT.PRO_W3);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();
b.setFontSize(32);e=new ccui.Layout;e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color(111,205,193,255));e.setContentSize(cc.winSize.width/2,6);e.setAnchorPoint(0,0);e.setPosition(0,0);var g=new ccui.Layout;g.setContentSize(cc.winSize.width/2,100);g.setAnchorPoint(0,1);g.setPosition(cc.winSize.width/2,cc.winSize.height-100);g.setTouchEnabled(!0);g.addChild(b);g.addChild(e);g.radiotext=b;g.isSelected=e;g.selected=function(b){b?(a.m_sex=1,this.radiotext.setFontFillColor(new cc.Color(111,
205,193,255)),this.isSelected.setVisible(!0),d.setVisible(!0)):(this.radiotext.setFontFillColor(new cc.Color(200,200,200,255)),this.isSelected.setVisible(!1),d.setVisible(!1))};g.selected(!1);this.addChild(g);f.addClickEventListener(function(){f.selected(!0);g.selected(!1)});g.addClickEventListener(function(){f.selected(!1);g.selected(!0)});b=new cc.LabelTTF("\u9078\u629e\u3059\u308b\u4eba\u3092\u30bf\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044");b.setFontSize(24);b.setFontFillColor(new cc.Color(200,
200,200,255));b.setFontName(GAME_FONT.PRO_W3);b.setScanPhixelRGB();b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>1,f.getPosition().y-f.getContentSize().height-25));this.addChild(b);e=new cc.LabelTTF("\u9078\u629e\u5b8c\u4e86\uff1a\u7537\u6027");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(26);e.setFontFillColor(cc.color(153,153,153,255));this.addChild(e);var h=new cc.LabelTTF("00");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color(111,205,193,255));
this.addChild(h);var k=new cc.LabelTTF("\u4eba/\u5973\u6027");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(153,153,153,255));this.addChild(k);var m=new cc.LabelTTF("00");m.setFontName(GAME_FONT.PRO_W3);m.setFontSize(26);m.setFontFillColor(cc.color(111,205,193,255));this.addChild(m);var l=new cc.LabelTTF("\u4eba");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(26);l.setFontFillColor(cc.color(153,153,153,255));this.addChild(l);var p=e.getContentSize().width+h.getContentSize().width+
k.getContentSize().width+m.getContentSize().width+l.getContentSize().width;e.setAnchorPoint(0,0);e.setPosition(cc.winSize.width/2-p/2,140);h.setAnchorPoint(0,0);h.setPosition(e.getPosition().x+e.getContentSize().width,140);k.setAnchorPoint(0,0);k.setPosition(h.getPosition().x+h.getContentSize().width,140);m.setAnchorPoint(0,0);m.setPosition(k.getPosition().x+k.getContentSize().width,140);l.setAnchorPoint(0,0);l.setPosition(m.getPosition().x+m.getContentSize().width,140);k=new cc.LabelTTF("\u53c2\u52a0\u8005\uff1a\u7537\u6027");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(153,153,153,255));this.addChild(k);l=new cc.LabelTTF(""+PAD(this.m_male.size(),2));l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(26);l.setFontFillColor(cc.color(111,205,193,255));this.addChild(l);p=new cc.LabelTTF("\u4eba/\u5973\u6027");p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(26);p.setFontFillColor(cc.color(153,153,153,255));this.addChild(p);var n=new cc.LabelTTF(""+PAD(this.m_women.size(),2));n.setFontName(GAME_FONT.PRO_W3);
n.setFontSize(26);n.setFontFillColor(cc.color(111,205,193,255));this.addChild(n);var r=new cc.LabelTTF("\u4eba");r.setFontName(GAME_FONT.PRO_W3);r.setFontSize(26);r.setFontFillColor(cc.color(153,153,153,255));this.addChild(r);var q=k.getContentSize().width+l.getContentSize().width+p.getContentSize().width+n.getContentSize().width+r.getContentSize().width;k.setAnchorPoint(0,0);k.setPosition(cc.winSize.width/2-q/2,140+e.getContentSize().height+30);l.setAnchorPoint(0,0);l.setPosition(k.getPosition().x+
k.getContentSize().width,140+e.getContentSize().height+30);p.setAnchorPoint(0,0);p.setPosition(l.getPosition().x+l.getContentSize().width,140+e.getContentSize().height+30);n.setAnchorPoint(0,0);n.setPosition(p.getPosition().x+p.getContentSize().width,140+e.getContentSize().height+30);r.setAnchorPoint(0,0);r.setPosition(n.getPosition().x+n.getContentSize().width,140+e.getContentSize().height+30);e=new cc.Sprite(GlobalRes.line_8);e.setScaleX(cc.winSize.width);e.setAnchorPoint(0,0);e.setPosition(0,170+
k.getContentSize().height+30+30);this.addChild(e);k=new ccui.Layout;k.setContentSize(200,80);k.setAnchorPoint(0.5,0);k.setPosition(cc.winSize.width/2,30);this.addChild(k);var s=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);s.setScale(200,80);s.setAnchorPoint(0,0);s.setTouchEnabled(!1);s.addClickEventListener(function(){a.m_male.clear();a.m_women.clear();for(var b=0;b<c.getItems().length;b++)a.m_male.add(c.getItems()[b].getUserData());for(b=0;b<d.getItems().length;b++)a.m_women.add(d.getItems()[b].getUserData());
a.loadRedLineResultView(!1)});k.addChild(s);l=new cc.LabelTTF("\u5224\u5b9a\u7d50\u679c\u3078");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(26);l.setFontFillColor(cc.color(255,255,255,255));l.setScanPhixelRGB();l.setAnchorPoint(0.5,0.5);l.setPosition(k.getContentSize().width/2,k.getContentSize().height/2);k.addChild(l);c.setContentSize(750,cc.winSize.height-(e.getPosition().y+e.getContentSize().height)-(cc.winSize.height-(b.getPosition().y-25)));c.setPosition(0,b.getPosition().y-25);d.setContentSize(750,
cc.winSize.height-(e.getPosition().y+e.getContentSize().height)-(cc.winSize.height-(b.getPosition().y-25)));d.setPosition(0,b.getPosition().y-25);b=new Mask;b.setTag(3);b.close();this.addChild(b)},loadRedLineResultView:function(a){this.m_state=this.STATE_REDLINERESULTVIEW;var b={G16:"01",G17:"02",G18:"03",G19:"04",G20:"05",G21:"06",G22:"07",G23:"08",G24:"09",G25:"10",G26:"11",G27:"12",G28:"13",G29:"14",G30:"15",G16_b:"01_b",G17_b:"02_b",G18_b:"03_b",G19_b:"04_b",G20_b:"05_b",G21_b:"06_b",G22_b:"07_b",
G23_b:"08_b",G24_b:"09_b",G25_b:"10_b",G26_b:"11_b",G27_b:"12_b",G28_b:"13_b",G29_b:"14_b",G30_b:"15_b"},c=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new ccui.Layout;d.setContentSize(cc.winSize.width,100);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height);this.addChild(d);var e=new cc.Sprite(GlobalRes.color_6fcdc1);e.setScaleX(cc.winSize.width);e.setScaleY(100);e.setAnchorPoint(cc.p(0,0));e.setPosition(cc.p(0,0));d.addChild(e);for(var e=new ArrayList,
f=0;f<this.m_male.size();f++)if(this.m_male.get(f).select)for(var g=0;g<this.m_women.size();g++)this.m_male.get(f).select===""+this.m_women.get(g).name+this.m_women.get(g).icon&&this.m_women.get(g).select===""+this.m_male.get(f).name+this.m_male.get(f).icon&&e.add({male:this.m_male.get(f),women:this.m_women.get(g)});f=new cc.LabelTTF("\u904b\u547d\u306e\u8d64\u3044\u7cf8\u7d50\u679c");f.setFontSize(36);f.setFontFillColor(new cc.Color(255,243,191,255));f.setFontName(GAME_FONT.PRO_W3);f.setScanPhixelRGB();
f.setAnchorPoint(cc.p(0.5,0.5));f.setPosition(cc.p(d.getContentSize().width>>1,d.getContentSize().height-50));d.addChild(f);f=new cc.Sprite(GlobalRes.line_8);f.setAnchorPoint(0,0);f.setPosition(0,140);f.setScaleX(cc.winSize.width);this.addChild(f);f=new ccui.Layout;f.setContentSize(300,80);f.setAnchorPoint(0.5,0);f.setPosition(cc.winSize.width/2,30);this.addChild(f);g=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);g.setScale(f.getContentSize().width,f.getContentSize().height);g.setAnchorPoint(0,
0);g.setTouchEnabled(!0);g.addClickEventListener(function(){c.loadRedLineResultView2(a)});f.addChild(g);g=new cc.LabelTTF("\u5168\u4f53\u7d50\u679c\u3092\u898b\u308b");g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(26);g.setFontFillColor(cc.color(255,255,255,255));g.setScanPhixelRGB();g.setAnchorPoint(0.5,0.5);g.setPosition(f.getContentSize().width/2,f.getContentSize().height/2);f.addChild(g);if(0==e.size()){SoundManager.instance().playEffect(LoveRedLineRes.single);d=new ccui.Layout;d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);
d.setBackGroundColor(cc.color(111,205,193,255));d.setContentSize(cc.winSize.width,108);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100);this.addChild(d);g=new cc.LabelTTF("\u6210\u7acb\u3057\u305f\u30ab\u30c3\u30d7\u30eb\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f");g.setFontSize(32);g.setFontFillColor(new cc.Color(255,243,191,255));g.setFontName(GAME_FONT.PRO_W6);g.setScanPhixelRGB();g.setAnchorPoint(cc.p(0.5,0.5));g.setPosition(cc.p(d.getContentSize().width>>1,d.getContentSize().height>>
1));d.addChild(g);g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(111,205,193,255));g.setContentSize(cc.winSize.width,cc.winSize.height-100-107-30-30-80-8);g.setAnchorPoint(0,0);g.setPosition(0,148);this.addChild(g);var h=new cc.Sprite;h.setAnchorPoint(0.5,0.5);h.setPosition(cc.p(g.getContentSize().width>>1,g.getContentSize().height>>1));g.addChild(h);for(var k=[],m=1;4>m;m++)k.push(new cc.SpriteFrame("res/Scene/LoveRedLine/sadness_"+m+".png",new cc.Rect(0,
0,783,1390)));k=new cc.Animation(k,0.25);k=cc.animate(k);h.runAction((new cc.Sequence(k)).repeatForever())}else if(1==e.size()){SoundManager.instance().playEffect(LoveRedLineRes.couple);d=new ccui.Layout;d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);d.setBackGroundColor(cc.color(111,205,193,255));d.setContentSize(cc.winSize.width,108);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100);this.addChild(d);g=new cc.LabelTTF("\u6210\u7acb\u3057\u305f\u30ab\u30c3\u30d7\u30eb\u306f");g.setFontSize(32);
g.setFontFillColor(new cc.Color(255,243,191,255));g.setFontName(GAME_FONT.PRO_W6);g.setScanPhixelRGB();g.setAnchorPoint(0,0);d.addChild(g);var l=new cc.LabelTTF("01");l.setFontSize(48);l.setFontFillColor(new cc.Color(255,243,191,255));l.setFontName(GAME_FONT.PRO_W6);l.setScanPhixelRGB();l.setAnchorPoint(0,0.5);d.addChild(l);h=new cc.LabelTTF("\u7d44\u3067\u3059\uff01");h.setFontSize(32);h.setFontFillColor(new cc.Color(255,243,191,255));h.setFontName(GAME_FONT.PRO_W6);h.setScanPhixelRGB();h.setAnchorPoint(0,
0);d.addChild(h);k=g.getContentSize().width+l.getContentSize().width+h.getContentSize().width;g.setPosition(d.getContentSize().width/2-k/2,d.getContentSize().height/2-l.getContentSize().height/2);l.setPosition(g.getContentSize().width+g.getPosition().x,d.getContentSize().height/2);h.setPosition(l.getContentSize().width+l.getPosition().x,d.getContentSize().height/2-l.getContentSize().height/2);g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(255,
243,191,255));g.setContentSize(cc.winSize.width,cc.winSize.height-100-107-30-30-80-8);g.setAnchorPoint(0,0);g.setPosition(0,148);this.addChild(g);k=new cc.LabelTTF(e.get(0).women.name);k.setFontSize(32);k.setFontFillColor(new cc.Color(111,205,193,255));k.setFontName(GAME_FONT.PRO_W6);k.setScanPhixelRGB();k.setAnchorPoint(0.5,0);k.setPosition(g.getContentSize().width>>1,g.getContentSize().height/2+110);g.addChild(k);h=new cc.Sprite(LoveRedLineRes.heart);h.setAnchorPoint(0.5,0);h.setPosition(g.getContentSize().width>>
1,k.getPosition().y+k.getContentSize().height+10);g.addChild(h);k=new cc.LabelTTF(e.get(0).male.name);k.setFontSize(32);k.setFontFillColor(new cc.Color(111,205,193,255));k.setFontName(GAME_FONT.PRO_W6);k.setScanPhixelRGB();k.setAnchorPoint(0.5,0);k.setPosition(g.getContentSize().width>>1,h.getPosition().y+h.getContentSize().height+10);g.addChild(k);h=new cc.Sprite;h.setAnchorPoint(0,1);h.setPosition(0,g.getContentSize().height/2+100-10);g.addChild(h);k=[];for(m=1;4>m;m++)k.push(new cc.SpriteFrame("res/Global/motion/motion_"+
e.get(0).male.icon+"_"+m+".png",new cc.Rect(0,0,216,480)));k=new cc.Animation(k,0.15);k=cc.animate(k);h.runAction((new cc.Sequence(k)).repeatForever());h=new cc.Sprite;h.setAnchorPoint(0,1);h.setPosition(g.getContentSize().width,g.getContentSize().height/2+100-10);h.setScaleX(-1);g.addChild(h);k=[];for(m=1;4>m;m++)k.push(new cc.SpriteFrame("res/Global/motion/motion_"+b["G"+e.get(0).women.icon]+"_"+m+".png",new cc.Rect(0,0,216,480)));k=new cc.Animation(k,0.15);k=cc.animate(k);h.runAction((new cc.Sequence(k)).repeatForever());
h=new cc.Sprite(LoveRedLineRes.triangle_green);h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width/2,g.getContentSize().height);g.addChild(h)}else{SoundManager.instance().playEffect(LoveRedLineRes.couple);f=new ccui.Layout;f.setContentSize(cc.winSize.width,208);d.removeFromParent();d.setPosition(0,f.getContentSize().height);f.addChild(d);d=new ccui.Layout;d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);d.setBackGroundColor(cc.color(111,205,193,255));d.setContentSize(cc.winSize.width,
108);d.setAnchorPoint(0,1);d.setPosition(0,f.getContentSize().height-100);f.addChild(d);g=new cc.LabelTTF("\u6210\u7acb\u3057\u305f\u30ab\u30c3\u30d7\u30eb\u306f");g.setFontSize(32);g.setFontFillColor(new cc.Color(255,243,191,255));g.setFontName(GAME_FONT.PRO_W6);g.setScanPhixelRGB();g.setAnchorPoint(0,0);d.addChild(g);l=new cc.LabelTTF(PAD(e.size(),2));l.setFontSize(48);l.setFontFillColor(new cc.Color(255,243,191,255));l.setFontName(GAME_FONT.PRO_W6);l.setScanPhixelRGB();l.setAnchorPoint(0,0.5);
d.addChild(l);h=new cc.LabelTTF("\u7d44\u3067\u3059\uff01");h.setFontSize(32);h.setFontFillColor(new cc.Color(255,243,191,255));h.setFontName(GAME_FONT.PRO_W6);h.setScanPhixelRGB();h.setAnchorPoint(0,0);d.addChild(h);k=g.getContentSize().width+l.getContentSize().width+h.getContentSize().width;g.setPosition(d.getContentSize().width/2-k/2,d.getContentSize().height/2-l.getContentSize().height/2);l.setPosition(g.getContentSize().width+g.getPosition().x,d.getContentSize().height/2);h.setPosition(l.getContentSize().width+
l.getPosition().x,d.getContentSize().height/2-l.getContentSize().height/2);d=new ccui.ListView;d.setDirection(ccui.ScrollView.DIR_VERTICAL);d.setTouchEnabled(!0);d.setBounceEnabled(!1);d.setContentSize(cc.winSize.width,cc.winSize.height-30-30-80-8);d.setAnchorPoint(0,0);d.setPosition(0,148);this.addChild(d);d.pushBackDefaultItem();d.pushBackCustomItem(f);f=0;for(l=!0;f<e.size();f++,l=!l){g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(l?cc.color(255,243,
191,255):cc.color(111,205,193,255));g.setContentSize(cc.winSize.width,500);k=new cc.LabelTTF(e.get(f).women.name);k.setFontSize(32);k.setFontFillColor(l?cc.color(111,205,193,255):cc.color(255,243,191,255));k.setFontName(GAME_FONT.PRO_W6);k.setScanPhixelRGB();k.setAnchorPoint(0.5,0);k.setPosition(g.getContentSize().width>>1,g.getContentSize().height/2-50);g.addChild(k);h=new cc.Sprite(LoveRedLineRes.heart);h.setAnchorPoint(0.5,0);h.setPosition(g.getContentSize().width>>1,k.getPosition().y+k.getContentSize().height+
10);g.addChild(h);k=new cc.LabelTTF(e.get(f).male.name);k.setFontSize(32);k.setFontFillColor(l?cc.color(111,205,193,255):cc.color(255,243,191,255));k.setFontName(GAME_FONT.PRO_W6);k.setScanPhixelRGB();k.setAnchorPoint(0.5,0);k.setPosition(g.getContentSize().width>>1,h.getPosition().y+h.getContentSize().height+10);g.addChild(k);h=new cc.Sprite;h.setAnchorPoint(0,0);h.setPosition(0,10);g.addChild(h);k=[];for(m=1;4>m;m++)k.push(new cc.SpriteFrame("res/Global/motion/motion_"+e.get(f).male.icon+"_"+m+
".png",new cc.Rect(0,0,216,480)));k=new cc.Animation(k,0.15);k=cc.animate(k);h.runAction((new cc.Sequence(k)).repeatForever());h=new cc.Sprite;h.setAnchorPoint(0,0);h.setPosition(g.getContentSize().width,10);h.setScaleX(-1);g.addChild(h);k=[];for(m=1;4>m;m++)k.push(new cc.SpriteFrame("res/Global/motion/motion_"+b["G"+e.get(f).women.icon]+"_"+m+".png",new cc.Rect(0,0,216,480)));k=new cc.Animation(k,0.15);k=cc.animate(k);h.runAction((new cc.Sequence(k)).repeatForever());h=new cc.Sprite(l?LoveRedLineRes.triangle_green:
LoveRedLineRes.triangle_beige);h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width/2,g.getContentSize().height);g.addChild(h);d.pushBackDefaultItem();d.pushBackCustomItem(g)}}for(var p={mode:"line",male:[]},f=0;f<this.m_male.size();f++)p.male.push(this.m_male.get(f));p.women=[];for(f=0;f<this.m_women.size();f++)p.women.push(this.m_women.get(f));this.m_func_isbacktomain=function(){n.open();var a=new ccui.Layout;a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width/2,cc.winSize.height/
2);a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(255,255,255,255));c.addChild(a,999);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0,1);a.setContentSize(570,270+b.getContentSize().height);b.setPosition(35,a.getContentSize().height-40);a.addChild(b);var d=new cc.Sprite(GlobalRes.color_eeeeee);
d.setAnchorPoint(0,0);d.setPosition(35,b.getPosition().y-b.getContentSize().height-30-58);d.setScale(498,1);a.addChild(d);for(var e=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),d="",f=0;f<c.m_male.size();f++)d+=c.m_male.get(f).name,d+="\u3001";for(f=0;f<c.m_women.size();f++)d+=c.m_women.get(f).name,f!=c.m_women.size()-1&&(d+="\u3001");e.setFontSize(34);e.setFontColor(new cc.Color(111,205,193,255));e.setString(d);e.setFontName(GAME_FONT.PRO_W3);e.setAnchorPoint(0,1);e.setPosition(36,b.getPosition().y-
b.getContentSize().height-30-1);a.addChild(e);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){""===e.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):(p.title=e.getString(),DataManager.instance().createHistory(GAME_TYPE.LoveRedLine,p),c.loadMainView())});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,
100);b.setAnchorPoint(0,0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){c.loadMainView()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,
0.5);b.setPosition(142.5,50);a.addChild(b)};var n=new Mask;this.addChild(n,99);n.close()},loadRedLineResultView2:function(a){var b,c,d,e;this.m_state=this.STATE_REDLINERESULTVIEW2;this.m_history=a;var f=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var g=new cc.Sprite(GlobalRes.color_6fcdc1);g.setScaleX(cc.winSize.width);g.setScaleY(100);g.setAnchorPoint(cc.p(0,1));g.setPosition(cc.p(0,cc.winSize.height));this.addChild(g);g=new cc.LabelTTF("\u904b\u547d\u306e\u8d64\u3044\u7cf8\u7d50\u679c");
g.setFontSize(36);g.setFontFillColor(new cc.Color(255,243,191,255));g.setFontName(GAME_FONT.PRO_W3);g.setScanPhixelRGB();g.setAnchorPoint(cc.p(0.5,0.5));g.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(g);g=new cc.Sprite(GlobalRes.line_8);g.setAnchorPoint(0,0);g.setPosition(0,140);g.setScaleX(cc.winSize.width);this.addChild(g);for(var h={mode:"line",male:[]},g=0;g<this.m_male.size();g++)h.male.push(this.m_male.get(g));h.women=[];for(g=0;g<this.m_women.size();g++)h.women.push(this.m_women.get(g));
if(a){g=new ccui.Layout;g.setContentSize(250,80);g.setAnchorPoint(0,0);g.setPosition(cc.winSize.width/2-305-5,30);this.addChild(g);a=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);a.setScale(250,80);a.setAnchorPoint(0,0);a.setTouchEnabled(!0);var k;a.addClickEventListener(function(){for(var a=0;a<f.m_male.size();a++)f.m_male.get(a).select&&delete f.m_male.get(a).select;for(a=0;a<f.m_women.size();a++)f.m_women.get(a).select&&delete f.m_women.get(a).select;f.loadMemberSettingView(!0)});
g.addChild(a);a=new cc.LabelTTF("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,255,255,255));a.setScanPhixelRGB();a.setAnchorPoint(0.5,0.5);a.setPosition(g.getContentSize().width/2,g.getContentSize().height/2);g.addChild(a);g=new ccui.Layout;g.setContentSize(350,80);g.setAnchorPoint(0,0);g.setPosition(cc.winSize.width/2-305+255,30);this.addChild(g);a=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);a.setScale(350,
80);a.setAnchorPoint(0,0);a.setTouchEnabled(!0);a.addClickEventListener(function(){for(var a=0;a<f.m_male.size();a++)f.m_male.get(a).select&&delete f.m_male.get(a).select;for(a=0;a<f.m_women.size();a++)f.m_women.get(a).select&&delete f.m_women.get(a).select;f.loadEnvironmentSetting()});g.addChild(a);a=new cc.LabelTTF("\u540c\u3058\u30e1\u30f3\u30d0\u30fc\u3067\u5e2d\u6c7a\u3081\u3078Go!");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,255,255,255));a.setScanPhixelRGB();
a.setAnchorPoint(0.5,0.5);a.setPosition(g.getContentSize().width/2,g.getContentSize().height/2);g.addChild(a)}else{g=new ccui.Layout;g.setContentSize(350,80);g.setAnchorPoint(0,0);g.setPosition(cc.winSize.width/2-280+205,30);this.addChild(g);a=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);a.setScale(350,80);a.setAnchorPoint(0,0);a.setTouchEnabled(!0);a.addClickEventListener(function(){for(var a=0;a<f.m_male.size();a++)f.m_male.get(a).select&&delete f.m_male.get(a).select;for(a=0;a<
f.m_women.size();a++)f.m_women.get(a).select&&delete f.m_women.get(a).select;f.loadEnvironmentSetting()});g.addChild(a);a=new cc.LabelTTF("\u540c\u3058\u30e1\u30f3\u30d0\u30fc\u3067\u5e2d\u6c7a\u3081\u3078Go!");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,255,255,255));a.setScanPhixelRGB();a.setAnchorPoint(0.5,0.5);a.setPosition(g.getContentSize().width/2,g.getContentSize().height/2);g.addChild(a);g=new ccui.Layout;g.setContentSize(200,80);g.setAnchorPoint(0,0);
g.setPosition(cc.winSize.width/2-280-5,30);this.addChild(g);a=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);a.setScale(200,80);a.setAnchorPoint(0,0);a.setTouchEnabled(!0);k=function(){m.open();var a=new ccui.Layout;a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width/2,cc.winSize.height/2);a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(255,255,255,255));f.addChild(a,999);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");
b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0,1);a.setContentSize(570,270+b.getContentSize().height);b.setPosition(35,a.getContentSize().height-40);a.addChild(b);var c=new cc.Sprite(GlobalRes.color_eeeeee);c.setAnchorPoint(0,0);c.setPosition(35,b.getPosition().y-b.getContentSize().height-30-58);c.setScale(498,1);a.addChild(c);for(var d=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),c="",e=0;e<f.m_male.size();e++)c+=
f.m_male.get(e).name,c+="\u3001";for(e=0;e<f.m_women.size();e++)c+=f.m_women.get(e).name,e!=f.m_women.size()-1&&(c+="\u3001");d.setFontSize(34);d.setFontColor(new cc.Color(111,205,193,255));d.setString(c);d.setFontName(GAME_FONT.PRO_W3);d.setAnchorPoint(0,1);d.setPosition(36,b.getPosition().y-b.getContentSize().height-30-1);a.addChild(d);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){""===
d.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):(h.title=d.getString(),DataManager.instance().createHistory(GAME_TYPE.LoveRedLine,h),f.loadMainView())});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){f.loadMainView()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,
255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,50);a.addChild(b)};f.m_func_isbacktomain=k;a.addClickEventListener(k);g.addChild(a);a=new cc.LabelTTF("\u30db\u30fc\u30e0");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,
255,255,255));a.setScanPhixelRGB();a.setAnchorPoint(0.5,0.5);a.setPosition(g.getContentSize().width/2,g.getContentSize().height/2);g.addChild(a);var m=new Mask;this.addChild(m,99);m.close()}var l=new ccui.ListView;l.setDirection(ccui.ScrollView.DIR_VERTICAL);l.setTouchEnabled(!0);l.setBounceEnabled(!1);l.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-100-50-80-30-30-8+50));l.setAnchorPoint(0,1);l.setPosition(0,cc.winSize.height-100-100-50+50);l.setVisible(!0);this.addChild(l);var p=
new ccui.ListView;p.setDirection(ccui.ScrollView.DIR_VERTICAL);p.setTouchEnabled(!0);p.setBounceEnabled(!1);p.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-100-50-80-30-30-8+50));p.setAnchorPoint(0,1);p.setPosition(0,cc.winSize.height-100-100-50+50);p.setVisible(!1);this.addChild(p);var n=new ccui.ListView;n.setDirection(ccui.ScrollView.DIR_VERTICAL);n.setTouchEnabled(!0);n.setBounceEnabled(!1);n.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-100-50-80-30-30-8+50));
n.setAnchorPoint(0,1);n.setPosition(0,cc.winSize.height-100-100-50+50);n.setVisible(!1);this.addChild(n);g=new cc.LabelTTF("\u2642\u7537\u6027");g.setAnchorPoint(0.5,0.5);g.setPosition(cc.winSize.width/3/2,47);g.setFontName(GAME_FONT.PRO_W3);g.setFontFillColor(new cc.Color(111,205,193,255));g.setScanPhixelRGB();g.setFontSize(32);a=new ccui.Layout;a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(111,205,193,255));a.setContentSize(cc.winSize.width/3,6);a.setAnchorPoint(0,
0);a.setPosition(0,0);var r=new ccui.Layout;r.setContentSize(cc.winSize.width/3,100);r.setAnchorPoint(0,1);r.setPosition(0,cc.winSize.height-100);r.setTouchEnabled(!0);r.addChild(g);r.addChild(a);r.radiotext=g;r.isSelected=a;r.selected=function(a){a?(f.m_sex=0,this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2642\u7537\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(111,205,193,255)),a.setScanPhixelRGB(),
a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!0),l.setVisible(!0)):(this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2642\u7537\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(200,200,200,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!1),l.setVisible(!1))};r.selected(!1);this.addChild(r);g=new cc.LabelTTF("\u2661\u30ab\u30c3\u30d7\u30eb");
g.setAnchorPoint(0.5,0.5);g.setPosition(cc.winSize.width/3/2,47);g.setFontName(GAME_FONT.PRO_W3);g.setFontFillColor(new cc.Color(111,205,193,255));g.setScanPhixelRGB();g.setFontSize(32);a=new ccui.Layout;a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(111,205,193,255));a.setContentSize(cc.winSize.width/3,6);a.setAnchorPoint(0,0);a.setPosition(0,0);var q=new ccui.Layout;q.setContentSize(cc.winSize.width/2,100);q.setAnchorPoint(0,1);q.setPosition(cc.winSize.width/
3,cc.winSize.height-100);q.setTouchEnabled(!0);q.addChild(g);q.addChild(a);q.radiotext=g;q.isSelected=a;q.selected=function(a){a?(f.m_sex=2,this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2661\u30ab\u30c3\u30d7\u30eb"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(111,205,193,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!0),p.setVisible(!0)):(this.radiotext.removeFromParent(),
a=new cc.LabelTTF("\u2661\u30ab\u30c3\u30d7\u30eb"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(200,200,200,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!1),p.setVisible(!1))};q.selected(!0);this.addChild(q);g=new cc.LabelTTF("\u2640\u5973\u6027");g.setAnchorPoint(0.5,0.5);g.setPosition(cc.winSize.width/3/2,47);g.setFontName(GAME_FONT.PRO_W3);g.setFontFillColor(new cc.Color(111,
205,193,255));g.setScanPhixelRGB();g.setFontSize(32);a=new ccui.Layout;a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(111,205,193,255));a.setContentSize(cc.winSize.width/3,6);a.setAnchorPoint(0,0);a.setPosition(0,0);var s=new ccui.Layout;s.setContentSize(cc.winSize.width/2,100);s.setAnchorPoint(0,1);s.setPosition(2*(cc.winSize.width/3),cc.winSize.height-100);s.setTouchEnabled(!0);s.addChild(g);s.addChild(a);s.radiotext=g;s.isSelected=a;s.selected=function(a){a?
(f.m_sex=1,this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2640\u5973\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(111,205,193,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!0),n.setVisible(!0),cc.log("aa")):(this.radiotext.removeFromParent(),a=new cc.LabelTTF("\u2640\u5973\u6027"),a.setAnchorPoint(0.5,0.5),a.setPosition(cc.winSize.width/3/
2,47),a.setFontName(GAME_FONT.PRO_W3),a.setFontFillColor(new cc.Color(200,200,200,255)),a.setScanPhixelRGB(),a.setFontSize(32),this.radiotext=a,this.addChild(a),this.isSelected.setVisible(!1),n.setVisible(!1))};s.selected(!1);this.addChild(s);r.addClickEventListener(function(){r.selected(!0);s.selected(!1);q.selected(!1)});q.addClickEventListener(function(){q.selected(!0);r.selected(!1);s.selected(!1)});s.addClickEventListener(function(){r.selected(!1);s.selected(!0);q.selected(!1)});a=[];for(g=0;3>
g;g++){k=new ccui.Layout;b=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,"Panel");b.removeFromParent();var t=b.getContentSize().width,w=b.getContentSize().height,u=this.m_male.size()>this.m_women.size()?this.m_male.size():this.m_women.size();k.setContentSize(cc.winSize.width,100+w*u+10*(u-1));for(u=0;u<this.m_male.size();u++)b=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,"Panel"),b.removeFromParent(),ccui.helper.seekWidgetByName(b,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+
this.m_male.get(u).icon+".png"),ccui.helper.seekWidgetByName(b,"name").setString(this.m_male.get(u).name),b.setAnchorPoint(0,1),b.setPosition(0,k.getContentSize().height-50-(b.getContentSize().height+10)*u),k.addChild(b);for(u=0;u<this.m_women.size();u++)b=ccui.helper.seekWidgetByName(ccs.load(LoveRedLineRes.member_json).node,"Panel"),b.removeFromParent(),ccui.helper.seekWidgetByName(b,"icon").setTexture("res/Global/cha_pop/cha_thumb_"+this.m_women.get(u).icon+".png"),ccui.helper.seekWidgetByName(b,
"name").setString(this.m_women.get(u).name),b.setAnchorPoint(1,1),b.setPosition(k.getContentSize().width,k.getContentSize().height-50-(b.getContentSize().height+10)*u),k.addChild(b);if(0==g)for(u=0;u<this.m_male.size();u++){if(this.m_male.get(u).select)for(var x=0;x<this.m_women.size();x++)if(this.m_male.get(u).select===""+this.m_women.get(x).name+this.m_women.get(x).icon){d=t;e=112+(w+10)*u;b=cc.winSize.width-t;c=112+(w+10)*x;var v=d-b,A=e-c,A=Math.pow(v*v+A*A,0.5),v=new ccui.Layout;v.setContentSize(A,
24);v.setAnchorPoint(0,0.5);v.setPosition(d,k.getContentSize().height-e);k.addChild(v);for(var B=0;B<A/16-1;B++){var C=new cc.Sprite(LoveRedLineRes.line_dot);C.setAnchorPoint(0,0.5);C.setPosition(16*B,v.getContentSize().height/2);v.addChild(C)}A=new cc.Sprite(LoveRedLineRes.arrow_head);A.setAnchorPoint(1,0.5);A.setPosition(v.getContentSize().width,v.getContentSize().height/2);v.addChild(A);v.setRotation(-ANAGLE(d,e,b,c))}}else if(1==g)for(u=0;u<this.m_male.size();u++){if(this.m_male.get(u).select)for(x=
0;x<this.m_women.size();x++)this.m_male.get(u).select===""+this.m_women.get(x).name+this.m_women.get(x).icon&&this.m_women.get(x).select===""+this.m_male.get(u).name+this.m_male.get(u).icon&&(d=t,e=112+(w+10)*u,b=cc.winSize.width-t,c=112+(w+10)*x,v=d-b,A=e-c,A=Math.pow(v*v+A*A,0.5),v=new ccui.Layout,v.setContentSize(A,24),v.setAnchorPoint(0,0.5),v.setPosition(d,k.getContentSize().height-e),k.addChild(v),B=new cc.Sprite(LoveRedLineRes.arrow_line),B.setScaleX(A-16-16),B.setAnchorPoint(0,0.5),B.setPosition(16,
v.getContentSize().height/2),v.addChild(B),A=new cc.Sprite(LoveRedLineRes.arrow_head),A.setAnchorPoint(1,0.5),A.setPosition(v.getContentSize().width,v.getContentSize().height/2),v.addChild(A),A=new cc.Sprite(LoveRedLineRes.arrow_head),A.setAnchorPoint(1,0.5),A.setScaleX(-1),A.setPosition(0,v.getContentSize().height/2),v.addChild(A),v.setRotation(-ANAGLE(d,e,b,c)))}else if(2==g)for(u=0;u<this.m_women.size();u++)if(this.m_women.get(u).select)for(x=0;x<this.m_male.size();x++)if(this.m_women.get(u).select===
""+this.m_male.get(x).name+this.m_male.get(x).icon){d=t;e=112+(w+10)*x;b=cc.winSize.width-t;c=112+(w+10)*u;v=d-b;A=e-c;A=Math.pow(v*v+A*A,0.5);v=new ccui.Layout;v.setContentSize(A,24);v.setAnchorPoint(0,0.5);v.setPosition(d,k.getContentSize().height-e);k.addChild(v);for(B=0;B<A/16-1;B++)C=new cc.Sprite(LoveRedLineRes.line_dot),C.setAnchorPoint(0,0.5),C.setPosition(16*B+16,v.getContentSize().height/2),v.addChild(C);A=new cc.Sprite(LoveRedLineRes.arrow_head);A.setAnchorPoint(1,0.5);A.setScaleX(-1);
A.setPosition(0,v.getContentSize().height/2);v.addChild(A);v.setRotation(-ANAGLE(d,e,b,c))}a.push(k)}l.pushBackDefaultItem();l.pushBackCustomItem(a[0]);p.pushBackDefaultItem();p.pushBackCustomItem(a[1]);n.pushBackDefaultItem();n.pushBackCustomItem(a[2])},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))},stateBack:function(a){a.m_state==a.STATE_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},
0.1)):History.go(1);switch(a.m_state){case a.STATE_MEMBERSETTING:a.loadMainView();break;case a.STATE_ENVIRONMENTSETTING:a.loadMemberSettingView(!1);break;case a.STATE_CHOOSEVIEW:a.loadMemberSettingView(!0);break;case a.STATE_TAGBELRESULT:case a.STATE_REDLINERESULTVIEW2:if(a.m_history){a.loadMainView();break}a.m_func_isbacktomain();break;case a.STATE_REDLINERESULTVIEW:a.m_func_isbacktomain()}}}),LoveRedLineScene=cc.Scene.extend({onEnter:function(){this._super();var a=new LoveRedLineLayer;this.addChild(a)}});var PolygraphLayer=cc.LayerColor.extend({m_state:-1,STATE_MAIN:0,STATE_RESULT:1,ctor:function(){this._super(cc.color(111,205,193,255));ADD_CHANGESTATE_CALLBACK(this.stateBack,this);this.loadMainView();return!0},loadMainView:function(){this.m_state=this.STATE_MAIN;var a=this;this.removeAllChildren();var b=new Toolbar(GAME_TYPE.Polygraph);b.setTag(4);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height));this.addChild(b,9999);var c=new cc.ProgressTimer(new cc.Sprite(PolygraphRes.prossece));
c.setAnchorPoint(0.5,0.5);c.setPosition(cc.winSize.width/2,cc.winSize.height/2+120);c.setType(cc.ProgressTimer.TYPE_RADIAL);c.setPercentage(0);this.addChild(c);b=new ccui.ImageView(PolygraphRes.thumbprint);b.setAnchorPoint(0.5,0);b.setPosition(cc.winSize.width/2,c.getPosition().y-c.getContentSize().height/2+70);this.addChild(b);b.setTouchEnabled(!0);b.addTouchEventListener(function(b,g){switch(g){case ccui.Widget.TOUCH_BEGAN:SoundManager.instance().playMusic(PolygraphRes.process,!0);d.setVisible(!0);
e.setVisible(!0);f.setVisible(!0);c.runAction(new cc.Sequence(new cc.ProgressTo(0.4,10),new cc.ProgressTo(0.3,20),new cc.ProgressTo(0.2,30),new cc.ProgressTo(0.4,70),new cc.ProgressTo(0.2,80),new cc.ProgressTo(0.3,90),new cc.ProgressTo(0.4,100),new cc.CallFunc(a.loadResultView,a)));break;case ccui.Widget.TOUCH_ENDED:case ccui.Widget.TOUCH_CANCELED:SoundManager.instance().stopMusic(!1),d.setVisible(!1),e.setVisible(!1),f.setVisible(!1),d.setString("0"),c.stopAllActions(),c.setPercentage(0)}});var d=
new cc.LabelTTF("0");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(110);d.setAnchorPoint(1,0);d.setPosition(cc.winSize.width/2+75,c.getPosition().y-c.getContentSize().height/2+70+b.getContentSize().height+10);d.setVisible(!1);this.addChild(d);var e=new cc.LabelTTF("%");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(40);e.setAnchorPoint(0,0);e.setPosition(d.getPosition().x,c.getPosition().y-c.getContentSize().height/2+70+b.getContentSize().height+15);e.setVisible(!1);this.addChild(e);var f=new cc.LabelTTF("\u5224\u5b9a\u4e2d...");
f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(18);f.setAnchorPoint(0.5,0);f.setPosition(cc.winSize.width/2,d.getPosition().y+d.getContentSize().height+10);f.setVisible(!1);this.addChild(f);d.schedule(function(){var a=Math.floor(c.getPercentage());10>a?d.setString(PAD(a,2)):d.setString(a)},0,cc.REPEAT_FOREVER);b=new cc.Sprite(PolygraphRes.maininfo);b.setAnchorPoint(0.5,0);b.setPosition(cc.winSize.width>>1,30);this.addChild(b);var g=new cc.LabelTTF("\u6307\u7d0b\u30de\u30fc\u30af\u3092\u30bf\u30c3\u30c1\u3059\u308b\u3068\u6e2c\u5b9a\u304c\u306f\u3058\u307e\u308b\u3063\u3061");
g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(28);g.setFontFillColor(cc.color(200,200,200,255));g.setDimensions(cc.size(360,133));g.setAnchorPoint(0,0);g.setPosition(100,220);g.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);g.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM);b.addChild(g)},loadResultView:function(){var a=this;this.m_state=this.STATE_RESULT;this.removeAllChildren();var b=Math.floor(3*Math.random()),c=Math.floor(Math.random()*results[b].length),b=results[b][c];SoundManager.instance().stopMusic(!1);
SoundManager.instance().playEffect(b.effect);c=new cc.LabelTTF(b.text);c.setFontName(GAME_FONT.AZUSA);c.setFontSize(42);c.setDimensions(cc.size(cc.winSize.width-160,300));c.setAnchorPoint(0.5,0);c.setPosition(cc.winSize.width>>1,cc.winSize.height-300);c.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);c.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM);this.addChild(c);b=new cc.Sprite(b.image);b.setAnchorPoint(0.5,1);b.setPosition(cc.winSize.width>>1,cc.winSize.height-340);this.addChild(b);
b.scheduleOnce(function(){a.fadeOut(a.loadMainView)},3);b=new ccui.Layout;b.setContentSize(cc.winSize.width,cc.winSize.height);b.setTouchEnabled(!0);b.addClickEventListener(function(){a.loadMainView();a.getParent().removeChildByTag(1)});this.addChild(b)},fadeOut:function(a){var b=new ccui.Layout;b.setContentSize(cc.winSize.width,cc.winSize.height);b.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);b.setBackGroundColor(cc.color("#000000"));b.setOpacity(0);b.setTag(1);this.getParent().addChild(b,
9999);b.runAction(new cc.Sequence(new cc.FadeIn(0.5),new cc.CallFunc(a,this),new cc.FadeOut(0.5),new cc.CallFunc(function(){b.removeFromParent()})))},stateBack:function(a){a.m_state==a.STATE_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.m_state){case a.STATE_RESULT:a.loadMainView()}}}),results=[[{text:"\u3053\u306e\u5927\u30a6\u30bd\u3064\u304d\uff01\u7530\u820e\u306e\u304a\u6bcd\u3055\u3093\u3082\u6ce3\u3044\u3066\u308b\u305e\uff01",
image:PolygraphRes.lie_result01,effect:PolygraphRes.lie_1},{text:"\u3060\u307e\u3055\u308c\u306a\u3044\u305e\uff01\u4eca\u306e\u8a71\u306f\u30a6\u30bd\u3060\u306a\uff01",image:PolygraphRes.lie_result01,effect:PolygraphRes.lie_1},{text:"\u30d7\u30ed\u8a50\u6b3a\u5e2b\u7d1a\uff01\u3082\u3046\u30ad\u30df\u306e\u5168\u3066\u304c\u4fe1\u3058\u3089\u308c\u306a\u3044\u3063\u3061\uff01",image:PolygraphRes.lie_result01,effect:PolygraphRes.lie_1},{text:"\u30a2\u30a4\u30e0\u30a2\u30f3\u30b0\u30ea\u30fc\uff01",
image:PolygraphRes.lie_result02,effect:PolygraphRes.lie_2},{text:"\u3060\u307e\u3055\u308c\u306a\u3044\u305e\uff01\u4eca\u306e\u8a71\u306f\u30a6\u30bd\u3060\u306a\uff01",image:PolygraphRes.lie_result02,effect:PolygraphRes.lie_2},{text:"\u541b\u306f\u307c\u304f\u3063\u3061\u3092\u9a19\u305b\u308b\u3068\u601d\u3063\u3066\u3044\u308b\u306e\u304b\u3044\uff1f",image:PolygraphRes.lie_result03,effect:PolygraphRes.lie_1},{text:"\u307c\u304f\u3063\u3061\u3082\u8210\u3081\u3089\u308c\u305f\u3082\u306e\u3060\u306d\uff01",
image:PolygraphRes.lie_result03,effect:PolygraphRes.lie_1},{text:"\u5618\u304c\u66b4\u304b\u308c\u308b\u3046\u3061\u306f\u3001\u30ad\u30df\u306f\u307e\u3060\u6b63\u3057\u3044\u5fc3\u3092\u6301\u3063\u3066\u3044\u308b\u8a3c\u62e0\u3060\u3088\u2026\u3068\u4e00\u5fdc\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u307f\u308b\u3063\u3061\uff01",image:PolygraphRes.lie_result03,effect:PolygraphRes.lie_1},{text:"\u307c\u304f\u3063\u3061\u3001\u60b2\u3057\u3044\u3088\u30fb\u30fb\u30fb\u305d\u3093\u306a\u4ef2\u3058\u3083\u306a\u3044\u3063\u3061\uff01\uff1f",
image:PolygraphRes.lie_result04,effect:PolygraphRes.normal_1},{text:"\u307c\u304f\u3063\u3061\u306e\u76ee\u3092\u898b\u3066\u3001\u3082\u3046\u4e00\u56de\u8a00\u3063\u3066\u307f\u3066\uff1f",image:PolygraphRes.lie_result04,effect:PolygraphRes.normal_1},{text:"\u30a6\u30bd\u306f\u3044\u3051\u306a\u3044\u3088\uff01\u307c\u304f\u3063\u3061\u306e\u30ad\u30ec\u30a4\u306a\u76ee\u3092\u898b\u3066\uff01",image:PolygraphRes.lie_result04,effect:PolygraphRes.normal_1},{text:"\u5618\u3064\u304d\u306b\u306f\u30c4\u30ca\u7f36\u3092\u5206\u3051\u3066\u3042\u3052\u306a\u3044\u3063\u3061\uff01",
image:PolygraphRes.lie_result05,effect:PolygraphRes.lie_1},{text:"\u3042\u308c\uff1f\u4eca\u65e5\u3063\u3066\u30a8\u30a4\u30d7\u30ea\u30eb\u30d5\u30fc\u30eb\u3060\u3063\u305f\u3063\u3051\uff1f",image:PolygraphRes.lie_result07,effect:PolygraphRes.normal_1}],[{text:"\u30c4\u30ca\u7f36\u3082\u3044\u3044\u3051\u3069\u30b5\u30d0\u7f36\u3082\u3044\u3044\u3088\u306d\u3002",image:PolygraphRes.lie_result05,effect:PolygraphRes.lie_1},{text:"\u307c\u304f\u3063\u3061\u306b\u306f\u308f\u304b\u3089\u306a\u3044\uff01\u306a\u3093\u3066\u3053\u3063\u305f\u3044\uff01",
image:PolygraphRes.lie_result06,effect:PolygraphRes.lie_2},{text:"\u541b\u306e\u5fc3\u306b\u8ff7\u3044\u304c\u898b\u3048\u308b\uff01\u3082\u3063\u3068\u307c\u304f\u3063\u3061\u306e\u3053\u3068\u3092\u4fe1\u3058\u3066\uff01",image:PolygraphRes.lie_result06,effect:PolygraphRes.lie_2},{text:"\u30ad\u30df\u306e\u8a00\u8449\u304c\u5206\u304b\u3089\u306a\u3044\u307c\u304f\u3063\u3061\u304c\u3044\u3051\u306a\u3044\u306e\uff1f\uff01",image:PolygraphRes.lie_result06,effect:PolygraphRes.lie_2},{text:"\u3054\u3081\u3093\u2026\u2026\u3001\u541b\u306e\u6c17\u6301\u3061\u304c\u5206\u304b\u3089\u306a\u3044\u3084\u3002\u3000\u5fc3\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3001\u958b\u3044\u3066\u307e\u3059\u304b\u30fc\uff01\uff1f",
image:PolygraphRes.lie_result07,effect:PolygraphRes.normal_1},{text:"\u4eca\u56de\u306e\u3053\u3068\u306f\u3001\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u3063\u3061\uff01",image:PolygraphRes.lie_result07,effect:PolygraphRes.normal_1},{text:"\u89e3\u6790\u4e0d\u80fd\uff08\uff1c\u25ce\uff1e\u03c9\uff1c\u25ce\uff1e\uff09\u51fa\u76f4\u3057\u3066\u304f\u308b\u304c\u3044\u3044\u3063\u3061\uff01",image:PolygraphRes.lie_result07,effect:PolygraphRes.normal_1},{text:"\u304d\u307f\u306e\u5fc3\u304c\u3061\u3063\u3068\u3082\u5206\u304b\u3089\u306a\u3044\u3088\uff01",
image:PolygraphRes.lie_result08,effect:PolygraphRes.normal_3},{text:"\u3080\u3080\u3080\u3001\u307e\u308b\u3067\u8b0e\u304b\u3051\u306e\u3088\u3046\u3060\u306d\u3002",image:PolygraphRes.lie_result08,effect:PolygraphRes.normal_3},{text:"\u30a4\u30df\u30ac\u30ef\u30ab\u30ea\u30de\u30bb\u30fc\u30fc\u30f3\uff01",image:PolygraphRes.lie_result08,effect:PolygraphRes.normal_3},{text:"\u30fb\u30fb\u30fb\u30fb\uff08\u9060\u3044\u76ee\uff09",image:PolygraphRes.lie_result09,effect:PolygraphRes.lie_3},{text:"\u306a\u304b\u306a\u304b\u3084\u308b\u306e\u3001\u304a\u306c\u3057\u3002",
image:PolygraphRes.lie_result09,effect:PolygraphRes.lie_3}],[{text:"\u5618\u3092\u3064\u304b\u306a\u3044\u4eba\u9593\u3082\u3044\u308b\u3063\u3061\u306d\uff01",image:PolygraphRes.lie_result04,effect:PolygraphRes.normal_1},{text:"\u304d\u307f\u306e\u5fc3\u306f\u3001\u5927\u7a7a\u306e\u3088\u3046\u306b\u6f84\u307f\u5207\u3063\u3066\u3044\u308b\u3088\uff01",image:PolygraphRes.lie_result10,effect:PolygraphRes.true_1},{text:"\u6b63\u76f4\u8005\u306f\u6551\u308f\u308c\u308b\u3063\u3066\u3044\u3046\u3063\u3061\u3002",
image:PolygraphRes.lie_result10,effect:PolygraphRes.true_1},{text:"\u30ad\u30df\u3082\u307c\u304f\u3063\u3061\u3068\u540c\u3058\u30ad\u30ec\u30a4\u306a\u76ee\u3092\u3057\u3066\u3044\u308b\u306d\uff01",image:PolygraphRes.lie_result10,effect:PolygraphRes.true_1},{text:"\u5fc3\u304c\u7f8e\u3057\u3059\u304e\u3066\u7729\u3057\u3044\u3063\u3061\u30fc\u30fc\u30fc\uff01\uff01",image:PolygraphRes.lie_result10,effect:PolygraphRes.true_1},{text:"\u307c\u304f\u3063\u3061\u306f\u7d20\u76f4\u306a\u30ad\u30df\u304c\u4e00\u756a\u597d\u304d\u3060\u3088\uff01",
image:PolygraphRes.lie_result11,effect:PolygraphRes.true_2},{text:"\u30ad\u30df\u306f\u7d20\u6674\u3089\u3057\u3044\u4eba\u3060\uff01\u307c\u304f\u3063\u3061\u3068\u30c8\u30e2\u30c0\u30c1\u306b\u306a\u308d\u3046\uff01",image:PolygraphRes.lie_result11,effect:PolygraphRes.true_2},{text:"\u771f\u5b9f\u306b\u52dd\u308b\u3082\u306e\u306f\u306a\u3044\u3063\u3061\u3002",image:PolygraphRes.lie_result11,effect:PolygraphRes.true_2},{text:"\u3084\u3063\u3071\u308a\u3001\u6b63\u76f4\u304c\u4e00\u756a\u3060\u3088\u306d\uff01",
image:PolygraphRes.lie_result12,effect:PolygraphRes.true_3},{text:"\u672c\u5f53\u306e\u3053\u3068\u3092\u8a71\u3057\u3066\u304f\u308c\u308b\u3063\u3066\u4fe1\u3058\u3066\u305f\u3088\uff01",image:PolygraphRes.lie_result12,effect:PolygraphRes.true_3},{text:"\u541b\u3063\u3066\u3001\u3044\u3044\u4eba\u3060\u3063\u3061\u3002\u307c\u304f\u3063\u3061\u3001\u5b09\u3057\u3044\uff01",image:PolygraphRes.lie_result12,effect:PolygraphRes.true_3},{text:"\u6b63\u76f4\u306a\u30ad\u30df\u306b\u306f\u30c4\u30ca\u7f36\u00d7\uff11\uff10\uff10\uff10\uff10\uff10\uff10\u3092\u5206\u3051\u3066\u3042\u3052\u308b\u3063\u3061\uff01",
image:PolygraphRes.lie_result13,effect:PolygraphRes.true_1}]],PolygraphScene=cc.Scene.extend({onEnter:function(){this._super();var a=new PolygraphLayer;this.addChild(a)}});var ADDutchpayLayer=cc.LayerColor.extend({STATE_MAIN:0,STATE_EQUAL:1,STATE_RANDOM:2,STATE_ANGEL:3,STATE_ANGEL_RESULT:4,m_state:0,m_isResult:!1,m_back_func:null,ctor:function(){this._super(cc.color(255,255,255,255));this.loadMainView();ADD_CHANGESTATE_CALLBACK(this.stateBack,this);return!0},loadMainView:function(){this.removeAllChildren();this.m_state=this.STATE_MAIN;var a=new Toolbar(GAME_TYPE.ADDutchpay);a.setTag(101);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,
9999);a=new cc.Sprite(ADDutchpayRes.bg);a.setAnchorPoint(cc.p(0,0));a.setPosition(cc.p(0,0));this.addChild(a);var b=new cc.Sprite;b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height-100);for(var c=[],a=0;15>a;a++)c.push(new cc.SpriteFrame("res/Scene/ADDutchpay/top_"+(a+1)+".png",new cc.Rect(0,0,750,450)));a=new cc.Animation(c,0.2);a=cc.animate(a);b.runAction((new cc.Sequence(a)).repeatForever());this.addChild(b);var d=new ccui.ListView;d.setDirection(ccui.ScrollView.DIR_VERTICAL);d.setTouchEnabled(!0);
d.setBounceEnabled(!0);d.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-450));d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100-450);d.setBreakPoint(100);this.addChild(d);if(b=DataManager.instance().getHistory(GAME_TYPE.ADDutchpay)){for(a=b.size()-1;-1<a;a--){var e=this,c=new ccui.Layout,f=new ccui.Layout;f.setTouchEnabled(!0);f.setContentSize(cc.winSize.width,156);f.setUserData(b.get(a));c.setContentSize(cc.winSize.width,f.getContentSize().height);c.addChild(f);var g=new ccui.Layout;
g.setContentSize(cc.winSize.width+302,1);g.setAnchorPoint(0,0);g.setPosition(0,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(255,243,191,255));f.addChild(g);g=new ccui.Layout;g.setContentSize(cc.winSize.width,156);g.setAnchorPoint(0,0);g.setPosition(302,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(111,205,193,255));g.setTag(99);g.setVisible(!1);f.addChild(g);var h;switch(b.get(a).data.mode){case "angel":h=ADDutchpayRes.angel_list_btn;
break;case "equal":h=ADDutchpayRes.equal_list_btn;break;case "random":h=ADDutchpayRes.random_list_btn}var k=(f.getContentSize().height-80)/2,g=new cc.Sprite(h);g.setAnchorPoint(0,1);g.setPosition(30,f.getContentSize().height-k);f.addChild(g);var m=new cc.LabelTTF(""+b.get(a).month+"."+b.get(a).day);m.setFontName(GAME_FONT.PRO_W3);m.setFontSize(30);m.setFontFillColor(cc.color(255,243,191));m.setScanPhixelRGB();m.setAnchorPoint(1,1);m.setPosition(f.getContentSize().width-30,f.getContentSize().height-
k);f.addChild(m);var l=new cc.LabelTTF(b.get(a).data.title);l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(40);l.setFontFillColor(cc.color(255,243,191));l.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);l.setScanPhixelRGB();l.setContentSize(f.getContentSize().width-g.getContentSize().width-30-30-30-30-m.getContentSize().width,l.getContentSize().height);l.setAnchorPoint(0,1);l.setPosition(g.getContentSize().width+30+30,f.getContentSize().height-k);l.setTextWidth(f.getContentSize().width-g.getContentSize().width-
30-30-30-30-m.getContentSize().width);f.addChild(l);if("equal"!==b.get(a).data.mode){str="";for(j=0;j<b.get(a).data.names.length;j++)str=j==b.get(a).data.names.length-1?str+b.get(a).data.names[j]:str+(b.get(a).data.names[j]+"\u3001");k=new cc.LabelTTF(str);k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(30);k.setFontFillColor(cc.color(255,243,191));k.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);k.setScanPhixelRGB();k.setContentSize(f.getContentSize().width-g.getContentSize().width-30-30-30-30-m.getContentSize().width,
k.getContentSize().height);k.setAnchorPoint(0,1);k.setPosition(g.getContentSize().width+30+30,l.getPositionY()-l.getFontSize()-10);k.setTextWidth(f.getContentSize().width-g.getContentSize().width-30-30-30-30-m.getContentSize().width);f.addChild(k)}g=new ccui.Layout;g.setContentSize(150,f.getContentSize().height-1);g.setAnchorPoint(0,0);g.setPosition(f.getContentSize().width,1);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(72,133,146,255));f.addChild(g);m=new ccui.Button(GlobalRes.history_replay_btn,
GlobalRes.history_replay_btn);m.setAnchorPoint(0.5,1);m.setPosition(g.getContentSize().width/2,g.getContentSize().height-40);m.setUserData({data:b.get(a).data});m.addClickEventListener(function(a){"equal"===a.getUserData().data.mode?e.loadEqualView({title:a.getUserData().data.title,money:a.getUserData().data.money,number:a.getUserData().data.number},!1):"random"===a.getUserData().data.mode?e.loadRandomView({title:a.getUserData().data.title,money:a.getUserData().data.money,number:a.getUserData().data.number,
off:a.getUserData().data.off,names:a.getUserData().data.names},!1):"angel"===a.getUserData().data.mode&&e.loadAngelView(a.getUserData().data)});g.addChild(m);l=new cc.LabelTTF("\u3084\u308a\u76f4\u3057");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(22);l.setFontFillColor(cc.color(255,243,191));l.setScanPhixelRGB();l.setAnchorPoint(0.5,1);l.setPosition(m.getPosition().x,m.getPosition().y-m.getContentSize().height-10);g.addChild(l);m=new ccui.Layout;m.setContentSize(2,f.getContentSize().height-1);
m.setAnchorPoint(0,0.5);m.setPosition(f.getContentSize().width+g.getContentSize().width,f.getContentSize().height/2);m.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);m.setBackGroundColor(cc.color(72,133,146,255));f.addChild(m);l=new cc.Sprite(GlobalRes.history_line);l.setAnchorPoint(0,0.5);l.setPosition(f.getContentSize().width+g.getContentSize().width,f.getContentSize().height/2);f.addChild(l);m=new ccui.Layout;m.setContentSize(150,f.getContentSize().height-1);m.setAnchorPoint(0,0);m.setPosition(f.getContentSize().width+
g.getContentSize().width+l.getContentSize().width,1);m.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);m.setBackGroundColor(cc.color(72,133,146,255));f.addChild(m);g=new ccui.Button(GlobalRes.history_delete_btn,GlobalRes.history_delete_btn);g.setAnchorPoint(0.5,1);g.setPosition(m.getContentSize().width/2,m.getContentSize().height-40);g.setUserData({time:b.get(a).time,item:c});g.addClickEventListener(function(a){DataManager.instance().deleteHistory(GAME_TYPE.LoveRedLine,a.getUserData().time);d.removeLastItem();
d.removeItem(d.getIndex(a.getUserData().item));a=new ccui.Layout;a.setContentSize(cc.winSize.width,3<=d.getItems().length?250:0);d.pushBackCustomItem(a)});m.addChild(g);l=new cc.LabelTTF("\u524a\u9664");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(22);l.setFontFillColor(cc.color(255,243,191));l.setScanPhixelRGB();l.setAnchorPoint(0.5,1);l.setPosition(g.getPosition().x,g.getPosition().y-g.getContentSize().height-10);m.addChild(l);f.setAnchorPoint(0,0);f.setPosition(0,0);f.addTouchEventListener(function(a,
b){switch(b){case ccui.Widget.TOUCH_BEGAN:a.isMoved=!1;break;case ccui.Widget.TOUCH_MOVED:if(-100>a.getTouchBeganPosition().x-a.getTouchMovePosition().x){if(1==a.pos&&!a.isAction){a.isAction=!0;var c=function(){a.isAction=!1;a.pos=0},c=new cc.Sequence(new cc.MoveTo(0.2,{x:0,y:a.getPosition().y}),new cc.CallFunc(c));a.runAction(c);a.getChildByTag(99).setVisible(!1)}}else 100<a.getTouchBeganPosition().x-a.getTouchMovePosition().x&&(0==a.pos&&!a.isAction)&&(a.isAction=!0,c=function(){a.isAction=!1;a.pos=
1;a.getChildByTag(99).setVisible(!0)},c=new cc.Sequence(new cc.MoveTo(0.2,{x:-302,y:a.getPosition().y}),new cc.CallFunc(c)),a.runAction(c));break;case ccui.Widget.TOUCH_ENDED:!a.isMoved&&0==a.pos&&(a.getUserData(),a.getUserData(),a.getUserData(),"equal"===a.getUserData().data.mode?e.loadEqualResultView({title:a.getUserData().data.title,money:a.getUserData().data.money,number:a.getUserData().data.number}):"random"===a.getUserData().data.mode?e.loadRandomView({title:a.getUserData().data.title,money:a.getUserData().data.money,
number:a.getUserData().data.number,off:a.getUserData().data.off,names:a.getUserData().data.names},!0):"angel"===a.getUserData().data.mode&&e.loadAngelResultView(a.getUserData().data,!0))}});f.pos=0;f.isAction=!1;d.pushBackDefaultItem();d.pushBackCustomItem(c)}h=new ccui.Layout;h.setContentSize(cc.winSize.width,3<=b.size()?250:0);d.pushBackCustomItem(h)}h=new Mask;h.setTag(100);h.close();this.addChild(h);var p=new ccui.Button(GroupingRes.start_btn,GroupingRes.start_btn);p.setTag(0);p.setAnchorPoint(cc.p(1,
0));p.setPosition(cc.p(cc.winSize.width-22,30));e=this;p.addClickEventListener(function(){e.modeBtnCallback(p)});this.addChild(p)},loadEqualView:function(a,b){this.m_state=this.STATE_EQUAL;var c=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new cc.Sprite(GlobalRes.color_6fcdc1);d.setScaleX(cc.winSize.width);d.setScaleY(100);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height));this.addChild(d);var e=new cc.LabelTTF("\u5747\u7b49\u30e2\u30fc\u30c9");
e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(36);e.setFontFillColor(new cc.Color(255,243,191,255));e.setScanPhixelRGB();e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(e);var e={editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},f=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);f.setPlaceholderFontColor(cc.color.GRAY);
f.setPlaceholderFontSize(36);f.setPlaceHolder("    \u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");f.setAdd(!0);f.setDelegate(e);f.setAnchorPoint(cc.p(0.5,1));f.setPosition(cc.winSize.width/2,cc.winSize.height-100);f.setFontName(GAME_FONT.PRO_W3);f.setFontColor(cc.color(111,205,193,255));f.setFontSize(36);f.setMaxLength(16);f.setTag(1);this.addChild(f);f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-
100-120);this.addChild(f);e={editBoxEditingDidEnd:function(a){""!==a.getString()&&100>parseInt(a.getString())&&a.setString("100")},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}};f=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);f.setPlaceholderFontColor(cc.color.GRAY);f.setPlaceholderFontSize(36);f.setPlaceHolder("    \u5408\u8a08\u91d1\u984d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");
f.setAdd(!0);f.setAnchorPoint(cc.p(0.5,1));f.setPosition(cc.winSize.width/2,cc.winSize.height-100-120-8);f.setDelegate(e);f.setFontName(GAME_FONT.PRO_W3);f.setFontColor(cc.color(111,205,193,255));f.setFontSize(36);f.setNumberOnly(!0);f.setMaxLength(16);f.setTag(2);this.addChild(f);f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100-120-8-120);this.addChild(f);var g=new ScrollNum(2,31,a?a.number:4,0);g.setAnchorPoint(0.5,1);g.setPosition(cc.winSize.width/
2,cc.winSize.height-100-120-8-120-8-61);this.addChild(g);f=new cc.Sprite(GlobalRes.line_50);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100-120-8-120-8-122);this.addChild(f);e=new cc.LabelTTF("\u4eba\u6578\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044");e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width/2,cc.winSize.height-100-120-8-120-8-122-25);e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(25);e.setFontFillColor(cc.color(200,200,200,255));
this.addChild(e);e=function(){c.getChildByTag(1).setVisible(!1);c.getChildByTag(2).setVisible(!1);var a=new Mask;c.addChild(a);c.m_isResult=!0;var b=function(){c.m_isResult=!1;c.getChildByTag(1).setVisible(!0);c.getChildByTag(2).setVisible(!0);c.removeChild(a);c.removeChild(d);c.removeChild(h)};c.m_back_func=b;var d=new ccui.Layout;d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(b);c.addChild(d);var e=parseInt(c.getChildByTag(2).getString()),
f=parseInt(e/g.getNumber()),e=e%g.getNumber(),h=new RoundRect(640,700);h.setAnchorPoint(0.5,0.5);h.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);var q=new ccui.Layout;q.setContentSize(640,100);q.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);q.setBackGroundColor(cc.color("#fdfcf3"));q.setAnchorPoint(0.5,1);q.setPosition(h.getContentSize().width>>1,h.getContentSize().height);h.addChild(q);q=new cc.LabelTTF("");q.setFontName(GAME_FONT.PRO_W3);q.setFontSize(32);q.setFontFillColor(cc.color(200,
200,200,255));q.setAnchorPoint(0.5,0.5);q.setPosition(h.getContentSize().width>>1,h.getContentSize().height-50);q.setString(c.getChildByTag(1).getString());h.addChild(q);q=new ccui.Layout;q.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);q.setBackGroundColor(cc.color("#6fcdc1"));q.setAnchorPoint(0,1);q.setPosition(0,h.getContentSize().height-100);q.setContentSize(h.getContentSize().width,2);h.addChild(q);var s=new cc.LabelTTF("\uff11\u4eba\u3042\u305f\u308a\u306e\u652f\u6255\u91d1\u984d");s.setFontName(GAME_FONT.PRO_W3);
s.setFontSize(40);s.setFontFillColor(cc.color("#6fcdc1"));s.setAnchorPoint(0.5,1);s.setPosition(h.getContentSize().width>>1,h.getContentSize().height-100-2-80);s.setScanPhixelRGB();h.addChild(s);q=new cc.LabelTTF("\uffe5000");q.setFontName(GAME_FONT.PRO_W6);q.setFontSize(80);q.setFontFillColor(cc.color("#6fcdc1"));q.setAnchorPoint(0.5,1);q.setPosition(h.getContentSize().width>>1,s.getPosition().y-s.getContentSize().height-30);q.setScanPhixelRGB();q.setString("\uffe5"+f);h.addChild(q);f=new cc.LabelTTF("\u3042\u307e\u308a");
f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(40);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,1);f.setPosition(h.getContentSize().width>>1,q.getPosition().y-q.getContentSize().height-70);f.setScanPhixelRGB();h.addChild(f);q=new cc.LabelTTF("\uffe5000");q.setFontName(GAME_FONT.PRO_W6);q.setFontSize(80);q.setFontFillColor(cc.color("#6fcdc1"));q.setAnchorPoint(0.5,1);q.setPosition(h.getContentSize().width>>1,f.getPosition().y-f.getContentSize().height-30);q.setScanPhixelRGB();q.setString("\uffe5"+
e);h.addChild(q);e=new ccui.Layout;e.setContentSize(320,100);e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color("#6fcdc1"));e.setAnchorPoint(0,0);e.setPosition(h.getContentSize().width>>1,0);e.setTouchEnabled(!0);e.addClickEventListener(function(){var a=new Mask;c.addChild(a);a.open();a=new RoundRect(570,300);a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(a);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b?");
b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,1);a.setContentSize(570,270+b.getContentSize().height);b.setPosition(a.getContentSize().width>>1,a.getContentSize().height-80);a.addChild(b);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){var a={mode:"equal"};a.title=c.getChildByTag(1).getString();
a.money=c.getChildByTag(2).getString();a.number=g.getNumber();DataManager.instance().createHistory(GAME_TYPE.ADDutchpay,a);c.loadMainView()});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){c.loadMainView()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,
0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,50);a.addChild(b)});h.addChild(e);f=new cc.LabelTTF("\u30db\u30fc\u30e0");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color("#ffffff"));f.setAnchorPoint(0.5,0.5);f.setPosition(e.getContentSize().width>>1,e.getContentSize().height>>
1);f.setScanPhixelRGB();e.addChild(f);e=new ccui.Layout;e.setContentSize(320,100);e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color("#b0e2cf"));e.setAnchorPoint(0,0);e.setPosition(0,0);e.setTouchEnabled(!0);e.addClickEventListener(b);h.addChild(e);b=new cc.LabelTTF("\u3084\u308a\u76f4\u3059");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color("#ffffff"));b.setAnchorPoint(0.5,0.5);b.setPosition(e.getContentSize().width>>1,e.getContentSize().height>>
1);b.setScanPhixelRGB();e.addChild(b);c.addChild(h)};f=new ccui.Layout;f.setContentSize(200,80);f.setAnchorPoint(0.5,0);f.setPosition(cc.winSize.width/2,30);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color("#c8c8c8"));f.setTouchEnabled(!0);f.setTag(3);f.addClickEventListener(e);this.addChild(f);var h=new cc.LabelTTF("\u8a08\u7b97");h.setAnchorPoint(0.5,0.5);h.setPosition(100,40);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color(255,255,
255,255));h.setScanPhixelRGB();f.addChild(h);f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,0);f.setPosition(0,140);this.addChild(f);d.schedule(function(){""!==c.getChildByTag(1).getString()&&""!==c.getChildByTag(2).getString()?(c.getChildByTag(3).setBackGroundColor(cc.color("#6fcdc1")),c.getChildByTag(3).setTouchEnabled(!0)):(c.getChildByTag(3).setBackGroundColor(cc.color("#c8c8c8")),c.getChildByTag(3).setTouchEnabled(!1))},0,cc.REPEAT_FOREVER);a&&(this.getChildByTag(1).setString(a.title),
this.getChildByTag(2).setString(a.money));b&&e()},loadEqualResultView:function(a){var b=this,c=new Mask;b.addChild(c);b.m_isResult=!0;var d=function(){b.m_isResult=!1;b.removeChild(c);b.removeChild(e);b.removeChild(g)};b.m_back_func=d;var e=new ccui.Layout;e.setContentSize(cc.winSize.width,cc.winSize.height);e.setAnchorPoint(0,0);e.setTouchEnabled(!0);e.addClickEventListener(d);b.addChild(e);var d=parseInt(a.money),f=parseInt(d/a.number),d=d%a.number,g=new RoundRect(640,700);g.setAnchorPoint(0.5,
0.5);g.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);var h=new ccui.Layout;h.setContentSize(640,100);h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color("#fdfcf3"));h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width>>1,g.getContentSize().height);g.addChild(h);h=new cc.LabelTTF("");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(32);h.setFontFillColor(cc.color(200,200,200,255));h.setAnchorPoint(0.5,0.5);h.setPosition(g.getContentSize().width>>1,g.getContentSize().height-
50);h.setString(a.title);g.addChild(h);h=new ccui.Layout;h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color("#6fcdc1"));h.setAnchorPoint(0,1);h.setPosition(0,g.getContentSize().height-100);h.setContentSize(g.getContentSize().width,2);g.addChild(h);var k=new cc.LabelTTF("\uff11\u4eba\u3042\u305f\u308a\u306e\u652f\u6255\u91d1\u984d");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(40);k.setFontFillColor(cc.color("#6fcdc1"));k.setAnchorPoint(0.5,1);k.setPosition(g.getContentSize().width>>
1,g.getContentSize().height-100-2-80);k.setScanPhixelRGB();g.addChild(k);h=new cc.LabelTTF("\uffe5000");h.setFontName(GAME_FONT.PRO_W6);h.setFontSize(80);h.setFontFillColor(cc.color("#6fcdc1"));h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width>>1,k.getPosition().y-k.getContentSize().height-30);h.setScanPhixelRGB();h.setString("\uffe5"+f);g.addChild(h);f=new cc.LabelTTF("\u3042\u307e\u308a");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(40);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,
1);f.setPosition(g.getContentSize().width>>1,h.getPosition().y-h.getContentSize().height-70);f.setScanPhixelRGB();g.addChild(f);h=new cc.LabelTTF("\uffe5000");h.setFontName(GAME_FONT.PRO_W6);h.setFontSize(80);h.setFontFillColor(cc.color("#6fcdc1"));h.setAnchorPoint(0.5,1);h.setPosition(g.getContentSize().width>>1,f.getPosition().y-f.getContentSize().height-30);h.setScanPhixelRGB();h.setString("\uffe5"+d);g.addChild(h);d=new ccui.Layout;d.setContentSize(g.getContentSize().width,100);d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);
d.setBackGroundColor(cc.color("#6fcdc1"));d.setAnchorPoint(0,0);d.setPosition(0,0);d.setTouchEnabled(!0);d.addClickEventListener(function(){b.m_isResult=!1;b.loadEqualView(a,!1)});g.addChild(d);f=new cc.LabelTTF("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color("#ffffff"));f.setAnchorPoint(0.5,0.5);f.setPosition(d.getContentSize().width>>1,d.getContentSize().height>>1);f.setScanPhixelRGB();d.addChild(f);b.addChild(g)},loadRandomView:function(a,
b){this.m_state=this.STATE_RANDOM;var c=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new cc.Sprite(GlobalRes.color_6fcdc1);d.setScaleX(cc.winSize.width);d.setScaleY(100);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height));this.addChild(d);var e=new cc.LabelTTF("\u30e9\u30f3\u30c0\u30e0\u5272\u5f15\u30e2\u30fc\u30c9");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(36);e.setFontFillColor(new cc.Color(255,243,191,255));e.setScanPhixelRGB();
e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(e);var f={editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},g=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);g.setPlaceholderFontColor(cc.color.GRAY);g.setPlaceholderFontSize(36);g.setPlaceHolder("    \u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");
g.setAdd(!0);g.setDelegate(f);g.setAnchorPoint(cc.p(0,1));g.setPosition(50,cc.winSize.height-100);g.setFontName(GAME_FONT.PRO_W3);g.setFontColor(cc.color(111,205,193,255));g.setFontSize(36);g.setMaxLength(16);g.setTag(1);this.addChild(g);var h=new cc.Sprite(GlobalRes.line_8);h.setScaleX(cc.winSize.width);h.setAnchorPoint(0,1);h.setPosition(0,cc.winSize.height-100-120);this.addChild(h);f={editBoxEditingDidEnd:function(a){""!==a.getString()&&100>parseInt(a.getString())&&a.setString("100")},editBoxTextChanged:function(a,
b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}};g=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);g.setPlaceholderFontColor(cc.color.GRAY);g.setPlaceholderFontSize(36);g.setPlaceHolder("    \u5408\u8a08\u91d1\u984d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");g.setAdd(!0);g.setAnchorPoint(cc.p(0,1));g.setPosition(50,cc.winSize.height-100-120-8);g.setDelegate(f);g.setFontName(GAME_FONT.PRO_W3);g.setFontColor(cc.color(111,
205,193,255));g.setFontSize(36);g.setMaxLength(16);g.setTag(2);g.setNumberOnly(!0);this.addChild(g);h=new cc.Sprite(GlobalRes.line_8);h.setScaleX(cc.winSize.width);h.setAnchorPoint(0,1);h.setPosition(0,cc.winSize.height-100-120-8-120);this.addChild(h);e=new ccui.Layout;e.setContentSize(cc.winSize.width,122);e.setAnchorPoint(0,1);e.setPosition(0,cc.winSize.height-100-120-8-120-8);this.addChild(e);var k=new cc.LabelTTF("\u5272\u5f15\u5bf9\u8c61");k.setAnchorPoint(0,0.5);k.setFontSize(36);k.setFontName(GAME_FONT.PRO_W3);
k.setFontFillColor(new cc.Color(200,200,200,255));e.addChild(k);h=new ccui.Layout;h.setContentSize(140,70);h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color("#6fcdc1"));h.setAnchorPoint(0,0.5);e.addChild(h);f=new ccui.Layout;f.setContentSize(136,66);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color("#ffffff"));f.setAnchorPoint(0.5,0.5);f.setPosition(70,35);h.addChild(f);var f={editBoxEditingDidBegin:function(a){},editBoxTextChanged:function(a,
b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},m=new cc.EditBox(cc.size(236,66),new cc.Scale9Sprite);m.setAnchorPoint(0,0.5);m.setPosition(0,35);m.setNumberOnly(!0);m.setFontName(GAME_FONT.PRO_W3);m.setFontColor(cc.color(111,205,193,255));m.setDelegate(f);m.setFontSize(36);m.setMaxLength(2);m.setPlaceholderFontColor(cc.color.GRAY);m.setPlaceholderFontSize(36);m.setPlaceHolder(" ");h.addChild(m);var l=new cc.LabelTTF("\u4eba");
l.setAnchorPoint(0,0.5);l.setFontSize(36);l.setFontName(GAME_FONT.PRO_W3);l.setFontFillColor(new cc.Color(200,200,200,255));e.addChild(l);var p=new ccui.Layout;p.setContentSize(140,70);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color("#6fcdc1"));p.setAnchorPoint(0,0.5);e.addChild(p);f=new ccui.Layout;f.setContentSize(136,66);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color("#ffffff"));f.setAnchorPoint(0.5,0.5);f.setPosition(70,35);
p.addChild(f);var f={editBoxEditingDidEnd:function(a){""!==a.getString()&&1>parseInt(a.getString())?a.setString("1"):""!==a.getString()&&99<parseInt(a.getString())&&a.setString("99")},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},n=new cc.EditBox(cc.size(136,66),new cc.Scale9Sprite);n.setAnchorPoint(0.5,0.5);n.setPosition(70,35);n.setDelegate(f);n.setNumberOnly(!0);n.setFontName(GAME_FONT.PRO_W3);
n.setFontColor(cc.color(111,205,193,255));n.setFontSize(36);n.setMaxLength(2);n.setPlaceholderFontColor(cc.color.GRAY);n.setPlaceholderFontSize(36);n.setPlaceHolder(" ");p.addChild(n);var r=new cc.LabelTTF("%\u5272\u5f15");r.setAnchorPoint(0,0.5);r.setFontSize(36);r.setFontName(GAME_FONT.PRO_W3);r.setFontFillColor(new cc.Color(200,200,200,255));e.addChild(r);k.setPosition((e.getContentSize().width-(k.getContentSize().width+30+140+5+l.getContentSize().width+20+140+5+r.getContentSize().width))/2,e.getContentSize().height/
2);h.setPosition(k.getPosition().x+k.getContentSize().width+30,e.getContentSize().height/2);l.setPosition(h.getPosition().x+h.getContentSize().width+5,e.getContentSize().height/2);p.setPosition(l.getPosition().x+l.getContentSize().width+20,e.getContentSize().height/2);r.setPosition(p.getPosition().x+p.getContentSize().width+5,e.getContentSize().height/2);h=new cc.Sprite(GlobalRes.line_8);h.setScaleX(cc.winSize.width);h.setAnchorPoint(0,1);h.setPosition(0,cc.winSize.height-100-120-8-120-8-122);this.addChild(h);
var q={editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},g=new cc.EditBox(cc.size(cc.winSize.width-160-50,120),new cc.Scale9Sprite);g.setPlaceholderFontColor(cc.color.GRAY);g.setPlaceholderFontSize(36);g.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");g.setAdd(!0);g.setDelegate(f);g.setAnchorPoint(cc.p(0,1));g.setPosition(50,cc.winSize.height-100-120-8-
120-8-122);g.setFontName(GAME_FONT.PRO_W3);g.setFontColor(cc.color(111,205,193,255));g.setFontSize(36);g.setMaxLength(16);g.setTag(4);this.addChild(g);var e=function(){if(30!=t.getItems().length)if(c.getChildByTag(4).getString()&&""!==c.getChildByTag(4).getString()){var a={};a.name=g.getString();var b=new ccui.Layout;b.setUserData(a);b.setContentSize(750,122);a=new cc.LabelTTF(a.name);a.setFontName(GAME_FONT.PRO_W6);a.setFontSize(36);a.setFontFillColor(cc.color(111,205,193,255));a.setScanPhixelRGB();
a.setAnchorPoint(0,0.5);a.setPosition(30,b.getContentSize().height/2);b.addChild(a);a=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(b.getContentSize().width-30,b.getContentSize().height/2);a.addClickEventListener(function(){t.removeItem(t.getIndex(b))});b.addChild(a);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(0,0);a.setScaleX(b.getContentSize().width);a.setScaleY(0.25);b.addChild(a);t.pushBackDefaultItem();t.pushBackCustomItem(b);g.removeFromParent();
g=new cc.EditBox(cc.size(cc.winSize.width-160-50,120),new cc.Scale9Sprite);g.setPlaceholderFontColor(cc.color.GRAY);g.setPlaceholderFontSize(36);g.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");g.setAdd(!0);g.setDelegate(q);g.setAnchorPoint(cc.p(0,1));g.setPosition(50,cc.winSize.height-100-120-8-120-8-122);g.setFontName(GAME_FONT.PRO_W3);g.setFontColor(cc.color(111,205,193,255));g.setFontSize(36);g.setMaxLength(16);g.setTag(4);c.addChild(g)}else alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044")},
s=new ccui.Button(GlobalRes.addition_btn,GlobalRes.addition_btn);s.setAnchorPoint(1,0.5);s.setPosition(cc.winSize.width-40,cc.winSize.height-100-120-8-120-8-122-60);s.addClickEventListener(e);k=new ccui.Layout;k.setContentSize(155,120);k.setTouchEnabled(!0);k.addClickEventListener(e);k.setAnchorPoint(0.5,0.5);k.setPosition(s.getContentSize().width>>1,s.getContentSize().height>>1);s.addChild(k);this.addChild(s);h=new cc.Sprite(GlobalRes.line_50);h.setScaleX(cc.winSize.width);h.setAnchorPoint(0,1);
h.setPosition(0,cc.winSize.height-100-120-8-120-8-122-8-122);this.addChild(h);e=new cc.LabelTTF("2\u4eba\u4ee5\u4e0a\u306e\u767b\u9304\u3057\u3066\u304f\u3060\u3055\u3044");e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width/2,cc.winSize.height-100-120-8-120-8-122-8-122-25);e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(25);e.setFontFillColor(cc.color(200,200,200,255));this.addChild(e);var t=new ccui.ListView;t.setDirection(ccui.ScrollView.DIR_VERTICAL);t.setTouchEnabled(!0);t.setBounceEnabled(!1);
t.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-100-120-8-120-8-122-8-122-50-140-8));t.setAnchorPoint(0,1);t.setPosition(0,cc.winSize.height-100-120-8-120-8-122-8-122-50);this.addChild(t);e=function(){c.getChildByTag(1).setVisible(!1);c.getChildByTag(2).setVisible(!1);c.getChildByTag(4).setVisible(!1);m.setVisible(!1);n.setVisible(!1);var a=new Mask;c.addChild(a);c.m_isResult=!0;var b=function(){c.m_isResult=!1;c.getChildByTag(1).setVisible(!0);c.getChildByTag(2).setVisible(!0);c.getChildByTag(4).setVisible(!0);
m.setVisible(!0);n.setVisible(!0);c.removeChild(a);c.removeChild(d);c.removeChild(l)};c.m_back_func=b;var d=new ccui.Layout;d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(b);c.addChild(d);var e=new ArrayList;e.addRange(t.getItems());for(var f=[],g=0;g<parseInt(m.getString());g++){var h=Math.floor(Math.random()*e.size());f[g]=e.removeIndex(h)}var e=parseInt(c.getChildByTag(2).getString()),k=parseInt(parseInt(e/t.getItems().length)*
(parseInt(n.getString())/100)),h=parseInt((e-k*f.length)/(t.getItems().length-f.length)),e=e-k*f.length-h*(t.getItems().length-f.length),l=new RoundRect(640,960);l.setAnchorPoint(0.5,0.5);l.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);var p=new ccui.Layout;p.setContentSize(640,100);p.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);p.setBackGroundColor(cc.color("#fdfcf3"));p.setAnchorPoint(0.5,1);p.setPosition(l.getContentSize().width>>1,l.getContentSize().height);l.addChild(p);p=new cc.LabelTTF("");
p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(32);p.setFontFillColor(cc.color(200,200,200,255));p.setAnchorPoint(0.5,0.5);p.setPosition(l.getContentSize().width>>1,l.getContentSize().height-50);p.setString(c.getChildByTag(1).getString());l.addChild(p);g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color("#6fcdc1"));g.setAnchorPoint(0,1);g.setPosition(0,l.getContentSize().height-100);g.setContentSize(l.getContentSize().width,2);l.addChild(g);p=new ccui.ListView;
p.setDirection(ccui.ScrollView.DIR_VERTICAL);p.setTouchEnabled(!0);p.setBounceEnabled(!1);p.setContentSize(cc.size(640,758));p.setAnchorPoint(0.5,1);p.setPosition(l.getContentSize().width>>1,l.getContentSize().height-102);l.addChild(p);var r=new ccui.Layout;r.setContentSize(l.getContentSize().width,90);g=new cc.LabelTTF("\u30e9\u30f3\u30c0\u30e0\u5272\u5f15\u5f53\u9078\u8005\u306f\uff01");g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(40);g.setFontFillColor(cc.color("#6fcdc1"));g.setAnchorPoint(0.5,
0);g.setPosition(r.getContentSize().width>>1,0);g.setScanPhixelRGB();r.addChild(g);p.pushBackDefaultItem();p.pushBackCustomItem(r);for(g=0;g<f.length;g++){r=new ccui.Layout;r.setContentSize(l.getContentSize().width,110);var q=new cc.LabelTTF(f[g].getUserData().name);q.setFontName(GAME_FONT.PRO_W6);q.setFontSize(80);q.setFontFillColor(cc.color("#6fcdc1"));q.setAnchorPoint(0.5,1);q.setPosition(r.getContentSize().width>>1,r.getContentSize().height-30);q.setScanPhixelRGB();r.addChild(q);p.pushBackDefaultItem();
p.pushBackCustomItem(r)}r=new ccui.Layout;r.setContentSize(l.getContentSize().width,110);f=new cc.LabelTTF("\uffe5"+k);f.setFontName(GAME_FONT.PRO_W6);f.setFontSize(80);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,1);f.setPosition(l.getContentSize().width>>1,r.getContentSize().height-30);f.setScanPhixelRGB();r.addChild(f);p.pushBackDefaultItem();p.pushBackCustomItem(r);r=new ccui.Layout;r.setContentSize(l.getContentSize().width,544);g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);
g.setBackGroundColor(cc.color("#eeeeee"));g.setAnchorPoint(0,1);g.setPosition(0,r.getContentSize().height-40);g.setContentSize(l.getContentSize().width,2);r.addChild(g);f=new cc.LabelTTF("\u305d\u306e\u4ed6\uff11\u4eba\u3042\u305f\u308a\u306e\u652f\u6255\u91d1\u984d");f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(40);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,1);f.setPosition(r.getContentSize().width>>1,g.getPosition().y-g.getContentSize().height-50);f.setScanPhixelRGB();r.addChild(f);
k=new cc.LabelTTF("\uffe5000");k.setFontName(GAME_FONT.PRO_W6);k.setFontSize(80);k.setFontFillColor(cc.color("#6fcdc1"));k.setAnchorPoint(0.5,1);k.setPosition(r.getContentSize().width>>1,f.getPosition().y-f.getContentSize().height-30);k.setScanPhixelRGB();k.setString("\uffe5"+h);r.addChild(k);g=new ccui.Layout;g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color("#eeeeee"));g.setAnchorPoint(0,1);g.setPosition(0,k.getPosition().y-k.getContentSize().height-40);g.setContentSize(l.getContentSize().width,
2);r.addChild(g);h=new cc.LabelTTF("\u3042\u307e\u308a");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(40);h.setFontFillColor(cc.color("#6fcdc1"));h.setAnchorPoint(0.5,1);h.setPosition(r.getContentSize().width>>1,g.getPosition().y-g.getContentSize().height-50);h.setScanPhixelRGB();r.addChild(h);f=new cc.LabelTTF("\uffe5000");f.setFontName(GAME_FONT.PRO_W6);f.setFontSize(80);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,1);f.setPosition(r.getContentSize().width>>1,h.getPosition().y-
h.getContentSize().height-30);f.setScanPhixelRGB();f.setString("\uffe5"+e);r.addChild(f);p.pushBackDefaultItem();p.pushBackCustomItem(r);e=new ccui.Layout;e.setContentSize(320,100);e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color("#6fcdc1"));e.setAnchorPoint(0,0);e.setPosition(l.getContentSize().width>>1,0);e.setTouchEnabled(!0);e.addClickEventListener(function(){var a=new Mask;c.addChild(a);a.open();a=new RoundRect(570,300);a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width>>
1,cc.winSize.height>>1);c.addChild(a);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,1);a.setContentSize(570,270+b.getContentSize().height);b.setPosition(a.getContentSize().width>>1,a.getContentSize().height-80);a.addChild(b);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,
0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){var a={mode:"random"};a.title=c.getChildByTag(1).getString();a.money=c.getChildByTag(2).getString();a.number=m.getString();a.off=n.getString();a.names=[];for(var b=0;b<t.getItems().length;b++)a.names[b]=t.getItem(b).getUserData().name;DataManager.instance().createHistory(GAME_TYPE.ADDutchpay,a);c.loadMainView()});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(0,
0);a.addChild(b);b.addClickEventListener(function(){c.loadMainView()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,
50);a.addChild(b)});l.addChild(e);h=new cc.LabelTTF("\u30db\u30fc\u30e0");h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color("#ffffff"));h.setAnchorPoint(0.5,0.5);h.setPosition(e.getContentSize().width>>1,e.getContentSize().height>>1);h.setScanPhixelRGB();e.addChild(h);e=new ccui.Layout;e.setContentSize(320,100);e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(cc.color("#b0e2cf"));e.setAnchorPoint(0,0);e.setPosition(0,0);e.setTouchEnabled(!0);e.addClickEventListener(b);
l.addChild(e);b=new cc.LabelTTF("\u3084\u308a\u76f4\u3059");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color("#ffffff"));b.setAnchorPoint(0.5,0.5);b.setPosition(e.getContentSize().width>>1,e.getContentSize().height>>1);b.setScanPhixelRGB();e.addChild(b);c.addChild(l)};k=new ccui.Layout;k.setContentSize(200,80);k.setAnchorPoint(0.5,0);k.setPosition(cc.winSize.width/2,30);k.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);k.setBackGroundColor(cc.color("#c8c8c8"));k.setTouchEnabled(!0);
k.setTag(3);k.addClickEventListener(e);this.addChild(k);h=new cc.LabelTTF("\u8a08\u7b97");h.setAnchorPoint(0.5,0.5);h.setPosition(100,40);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(26);h.setFontFillColor(cc.color(255,255,255,255));h.setScanPhixelRGB();k.addChild(h);h=new cc.Sprite(GlobalRes.line_8);h.setScaleX(cc.winSize.width);h.setAnchorPoint(0,0);h.setPosition(0,140);this.addChild(h);d.schedule(function(){30==t.getItems().length?g.setVisible(!1):g.setVisible(!0);""!==c.getChildByTag(1).getString()&&
""!==c.getChildByTag(2).getString()&&2<=t.getItems().length&&""!==m.getString()&&1<=parseInt(m.getString())&&parseInt(m.getString())<=t.getItems().length-1&&""!==n.getString()?(c.getChildByTag(3).setBackGroundColor(cc.color("#6fcdc1")),c.getChildByTag(3).setTouchEnabled(!0)):(c.getChildByTag(3).setBackGroundColor(cc.color("#c8c8c8")),c.getChildByTag(3).setTouchEnabled(!1));""!==c.getChildByTag(4).getString()?s.setVisible(!0):s.setVisible(!1)},0,cc.REPEAT_FOREVER);if(a){this.getChildByTag(1).setString(a.title);
this.getChildByTag(2).setString(a.money);m.setString(a.number);n.setString(a.off);for(d=0;d<a.names.length;d++)h={},h.name=a.names[d],k=new ccui.Layout,k.setUserData(h),k.setContentSize(750,122),h=new cc.LabelTTF(h.name),h.setFontName(GAME_FONT.PRO_W6),h.setFontSize(36),h.setFontFillColor(cc.color(111,205,193,255)),h.setScanPhixelRGB(),h.setAnchorPoint(0,0.5),h.setPosition(30,k.getContentSize().height/2),k.addChild(h),h=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png),h.setAnchorPoint(1,
0.5),h.setPosition(k.getContentSize().width-30,k.getContentSize().height/2),h.setUserData(k),h.addClickEventListener(function(a){t.removeItem(t.getIndex(a.getUserData()));""!==m.getString()&&parseInt(m.getString())>=t.getItems().length-1&&2<=t.getItems().length?m.setString(""+(t.getItems().length-1)):""!==m.getString()&&1>parseInt(m.getString())&&2<=t.getItems().length?m.setString("1"):""!==m.getString()&&2>t.getItems().length&&m.setString("0")}),k.addChild(h),h=new cc.Sprite(GlobalRes.line_8),h.setAnchorPoint(0,
0),h.setScaleX(k.getContentSize().width),h.setScaleY(0.25),k.addChild(h),t.pushBackDefaultItem(),t.pushBackCustomItem(k)}b&&e()},loadAngelView:function(a){this.m_state=this.STATE_ANGEL;var b=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var c=new cc.Sprite(GlobalRes.color_6fcdc1);c.setScaleX(cc.winSize.width);c.setScaleY(100);c.setAnchorPoint(cc.p(0,1));c.setPosition(cc.p(0,cc.winSize.height));this.addChild(c);var d=new cc.LabelTTF("\u5929\u56fd\u3068\u5730\u7344\u30e2\u30fc\u30c9");
d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(36);d.setFontFillColor(new cc.Color(255,243,191,255));d.setScanPhixelRGB();d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(d);var d={editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}},e=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);e.setPlaceholderFontColor(cc.color.GRAY);
e.setPlaceholderFontSize(36);e.setPlaceHolder("    \u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");e.setAdd(!0);e.setDelegate(d);e.setAnchorPoint(cc.p(0,1));e.setPosition(50,cc.winSize.height-100);e.setFontName(GAME_FONT.PRO_W3);e.setFontColor(cc.color(111,205,193,255));e.setFontSize(36);e.setMaxLength(16);e.setTag(1);this.addChild(e);var f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100-120);
this.addChild(f);d={editBoxEditingDidEnd:function(a){""!==a.getString()&&100>parseInt(a.getString())&&a.setString("100")},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))}};e=new cc.EditBox(cc.size(cc.winSize.width-100,120),new cc.Scale9Sprite);e.setPlaceholderFontColor(cc.color.GRAY);e.setPlaceholderFontSize(36);e.setPlaceHolder("    \u5408\u8a08\u91d1\u984d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");
e.setAdd(!0);e.setAnchorPoint(cc.p(0,1));e.setPosition(50,cc.winSize.height-100-120-8);e.setDelegate(d);e.setFontName(GAME_FONT.PRO_W3);e.setFontColor(cc.color(111,205,193,255));e.setFontSize(36);e.setMaxLength(16);e.setTag(2);e.setNumberOnly(!0);this.addChild(e);f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100-120-8-120);this.addChild(f);d={editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&
a.setString(a.getString().substring(0,a.getMaxLength()))}};e=new cc.EditBox(cc.size(cc.winSize.width-160-50,120),new cc.Scale9Sprite);e.setPlaceholderFontColor(cc.color.GRAY);e.setPlaceholderFontSize(36);e.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");e.setAdd(!0);e.setDelegate(d);e.setAnchorPoint(cc.p(0,1));e.setPosition(50,cc.winSize.height-100-120-8-120-8);e.setFontName(GAME_FONT.PRO_W3);e.setFontColor(cc.color(111,205,193,255));e.setFontSize(36);
e.setMaxLength(16);e.setTag(4);this.addChild(e);var d=function(){if(30!=h.getItems().length)if(b.getChildByTag(4).getString()&&""!==b.getChildByTag(4).getString()){var a={};a.name=e.getString();var c=new ccui.Layout;c.setUserData(a);c.setContentSize(750,122);a=new cc.LabelTTF(a.name);a.setFontName(GAME_FONT.PRO_W6);a.setFontSize(36);a.setFontFillColor(cc.color(111,205,193,255));a.setScanPhixelRGB();a.setAnchorPoint(0,0.5);a.setPosition(30,c.getContentSize().height/2);c.addChild(a);a=new ccui.Button(GlobalRes.delete_png,
GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(c.getContentSize().width-30,c.getContentSize().height/2);a.addClickEventListener(function(){h.removeItem(h.getIndex(c))});c.addChild(a);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(0,0);a.setScaleX(c.getContentSize().width);a.setScaleY(0.25);c.addChild(a);h.pushBackDefaultItem();h.pushBackCustomItem(c);e.setString("");e._edTxt.blur()}else alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044")},g=new ccui.Button(GlobalRes.addition_btn,
GlobalRes.addition_btn);g.setAnchorPoint(1,0.5);g.setPosition(cc.winSize.width-40,cc.winSize.height-100-120-8-120-8-60);g.addClickEventListener(d);f=new ccui.Layout;f.setContentSize(155,120);f.setTouchEnabled(!0);f.addClickEventListener(d);f.setAnchorPoint(0.5,0.5);f.setPosition(g.getContentSize().width>>1,g.getContentSize().height>>1);g.addChild(f);this.addChild(g);f=new cc.Sprite(GlobalRes.line_50);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,1);f.setPosition(0,cc.winSize.height-100-120-8-120-
8-120);this.addChild(f);d=new cc.LabelTTF("3\u4eba\u4ee5\u4e0a\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");d.setAnchorPoint(0.5,0.5);d.setPosition(cc.winSize.width/2,cc.winSize.height-100-120-8-120-8-120-25);d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(25);d.setFontFillColor(cc.color(200,200,200,255));this.addChild(d);var h=new ccui.ListView;h.setDirection(ccui.ScrollView.DIR_VERTICAL);h.setTouchEnabled(!0);h.setBounceEnabled(!1);h.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-
100-120-8-120-8-120-50-140-8));h.setAnchorPoint(0,1);h.setPosition(0,cc.winSize.height-100-120-8-120-8-120-50);this.addChild(h);d=new ccui.Layout;d.setContentSize(200,80);d.setAnchorPoint(0.5,0);d.setPosition(cc.winSize.width/2,30);d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);d.setBackGroundColor(cc.color("#c8c8c8"));d.setTouchEnabled(!0);d.setTag(3);d.addClickEventListener(function(){var a={};a.title=b.getChildByTag(1).getString();a.money=b.getChildByTag(2).getString();a.names=[];for(var c=
0;c<h.getItems().length;c++)a.names[c]=h.getItems()[c].getUserData().name;b.loadAngelResultView(a)});this.addChild(d);f=new cc.LabelTTF("\u8a08\u7b97");f.setAnchorPoint(0.5,0.5);f.setPosition(100,40);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(26);f.setFontFillColor(cc.color(255,255,255,255));f.setScanPhixelRGB();d.addChild(f);f=new cc.Sprite(GlobalRes.line_8);f.setScaleX(cc.winSize.width);f.setAnchorPoint(0,0);f.setPosition(0,140);this.addChild(f);var k=new cc.LabelTTF("\u53c2\u52a0\u8005\u5165\u529b\u5b8c\u4e86");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(36);k.setFontFillColor(cc.color.GRAY);k.setAnchorPoint(0,1);k.setPosition(50,cc.winSize.height-100-120-8-120-8-40);this.addChild(k);30==h.getItems().length?(e.setVisible(!1),k.setVisible(!0)):(e.setVisible(!0),k.setVisible(!1));c.schedule(function(){30==h.getItems().length?(e.setVisible(!1),k.setVisible(!0)):(e.setVisible(!0),k.setVisible(!1));""!==b.getChildByTag(1).getString()&&""!==b.getChildByTag(2).getString()&&3<=h.getItems().length?(b.getChildByTag(3).setBackGroundColor(cc.color("#6fcdc1")),
b.getChildByTag(3).setTouchEnabled(!0)):(b.getChildByTag(3).setBackGroundColor(cc.color("#c8c8c8")),b.getChildByTag(3).setTouchEnabled(!1));""!==b.getChildByTag(4).getString()?g.setVisible(!0):g.setVisible(!1)},0,cc.REPEAT_FOREVER);if(a){b.getChildByTag(1).setString(a.title1);b.getChildByTag(2).setString(a.money);for(c=0;c<a.names.length;c++)f={},f.name=a.names[c],d=new ccui.Layout,d.setUserData(f),d.setContentSize(750,122),f=new cc.LabelTTF(f.name),f.setFontName(GAME_FONT.PRO_W6),f.setFontSize(36),
f.setFontFillColor(cc.color(111,205,193,255)),f.setScanPhixelRGB(),f.setAnchorPoint(0,0.5),f.setPosition(30,d.getContentSize().height/2),d.addChild(f),f=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png),f.setAnchorPoint(1,0.5),f.setPosition(d.getContentSize().width-30,d.getContentSize().height/2),f.setUserData(d),f.addClickEventListener(function(a){h.removeItem(h.getIndex(a.getUserData()))}),d.addChild(f),f=new cc.Sprite(GlobalRes.line_8),f.setAnchorPoint(0,0),f.setScaleX(d.getContentSize().width),
f.setScaleY(0.25),d.addChild(f),h.pushBackDefaultItem(),h.pushBackCustomItem(d)}},loadAngelResultView:function(a,b){this.m_state=this.STATE_ANGEL_RESULT;var c=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new ccui.Layout;d.setContentSize(cc.winSize.width,100);d.setAnchorPoint(cc.p(0,1));d.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);d.setBackGroundColor(cc.color("#6fcdc1"));var e=new cc.LabelTTF("\u5929\u56fd\u3068\u5730\u7344\u30e2\u30fc\u30c9\u306e\u7d50\u679c");
e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(36);e.setFontFillColor(new cc.Color(255,243,191,255));e.setScanPhixelRGB();e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(cc.winSize.width>>1,50));d.addChild(e);e=new ArrayList;e.addRange(a.names);var f=a.angel?a.angel:e.removeIndex(Math.floor(Math.random()*e.size())),g=a.devil?a.angel:e.removeIndex(Math.floor(Math.random()*e.size())),h=a.money1?a.money1:parseInt(parseInt(a.money)/a.names.length),k=a.money2?a.money2:a.money-h*e.size(),m,l="",p=function(){var b=
new Mask;c.addChild(b);b.open();b=new RoundRect(570,300);b.setAnchorPoint(0.5,0.5);b.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(b);var d=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(30);d.setFontFillColor(new cc.Color(111,205,193,255));d.setAnchorPoint(0,1);d.setPosition(35,b.getContentSize().height-40);b.addChild(d);var e=new cc.Sprite(GlobalRes.color_eeeeee);e.setAnchorPoint(0,0);e.setPosition(35,
d.getPosition().y-d.getContentSize().height-30-58);e.setScale(498,1);b.addChild(e);m=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite);for(var e=a.names.length,n=0;n<e;n++)l+=a.names[n],n!=e-1&&(l+="\u3001");m.setFontSize(34);m.setFontColor(new cc.Color(111,205,193,255));m.setString(l);m.setFontName(GAME_FONT.PRO_W3);m.setAnchorPoint(0,1);m.setPosition(36,d.getPosition().y-d.getContentSize().height-30-1);b.addChild(m);d=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);d.setScale(285,
100);d.setAnchorPoint(0,0);d.setPosition(285,0);b.addChild(d);d.addClickEventListener(function(){var b={mode:"angel"};b.angel=f;b.devil=g;b.money1=h;b.money2=k;b.names=a.names;b.title1=a.title;m.getString()==l?b.title=a.title:b.title=m.getString();b.money=a.money;DataManager.instance().createHistory(GAME_TYPE.ADDutchpay,b);c.loadMainView()});d=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);d.setScale(285,100);d.setAnchorPoint(0,0);d.setPosition(0,0);b.addChild(d);d.addClickEventListener(function(){c.loadMainView()});
d=new cc.LabelTTF("\u4fdd\u5b58");d.setFontName(GAME_FONT.PRO_W6);d.setFontSize(30);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(427.5,50);b.addChild(d);d=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");d.setFontName(GAME_FONT.PRO_W6);d.setFontSize(30);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(142.5,50);b.addChild(d)};this.m_back_func=p;var e=function(){var b=new Mask;c.addChild(b);
var d=function(){c.removeChild(b);c.removeChild(e);c.removeChild(m);c.m_back_func=p};c.m_back_func=d;var e=new ccui.Layout;e.setContentSize(cc.winSize.width,cc.winSize.height);e.setAnchorPoint(0,0);e.setTouchEnabled(!0);e.addClickEventListener(d);c.addChild(e);var m=new RoundRect(640,960);m.setAnchorPoint(0.5,0.5);m.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);var l=new ccui.Layout;l.setContentSize(640,100);l.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);l.setBackGroundColor(cc.color("#fdfcf3"));
l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height);m.addChild(l);l=new cc.LabelTTF(a.title);l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(32);l.setFontFillColor(cc.color(200,200,200,255));l.setAnchorPoint(0.5,0.5);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-50);m.addChild(l);l=new ccui.Layout;l.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);l.setBackGroundColor(cc.color("#6fcdc1"));l.setAnchorPoint(0,1);l.setPosition(0,m.getContentSize().height-
100);l.setContentSize(m.getContentSize().width,2);m.addChild(l);l=new cc.LabelTTF("\u5929\u56fd\u884c\u304d\u306f");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(30);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40);m.addChild(l);l=new cc.LabelTTF(f);l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(60);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-
100-2-40-30-30);m.addChild(l);l=new cc.LabelTTF("\uffe5000");l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(60);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40-30-30-60-20);m.addChild(l);l=new ccui.Layout;l.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);l.setBackGroundColor(cc.color("#eeeeee"));l.setAnchorPoint(0,1);l.setPosition(0,m.getContentSize().height-100-2-40-30-30-60-20-60-40);l.setContentSize(m.getContentSize().width,
2);m.addChild(l);l=new cc.LabelTTF("\u5929\u56fd\u3067\u3082\u5730\u7344\u3067\u3082\u306a\u3044\u4eba\u306f");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(30);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40);m.addChild(l);l=new cc.LabelTTF("\uffe5"+h);l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(60);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>
1,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40-30-30);m.addChild(l);l=new ccui.Layout;l.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);l.setBackGroundColor(cc.color("#eeeeee"));l.setAnchorPoint(0,1);l.setPosition(0,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40-30-30-60-40);l.setContentSize(m.getContentSize().width,2);m.addChild(l);l=new cc.LabelTTF("\u5730\u7344\u884c\u304d\u306f");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(30);l.setFontFillColor(cc.color("#6fcdc1"));
l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40-30-30-60-40-2-40);m.addChild(l);l=new cc.LabelTTF(g);l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(60);l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40-30-30-60-40-2-40-30-30);m.addChild(l);l=new cc.LabelTTF("\uffe5"+k);l.setFontName(GAME_FONT.PRO_W6);l.setFontSize(60);
l.setFontFillColor(cc.color("#6fcdc1"));l.setAnchorPoint(0.5,1);l.setPosition(m.getContentSize().width>>1,m.getContentSize().height-100-2-40-30-30-60-20-60-40-2-40-30-30-60-40-2-40-30-30-60-20);m.addChild(l);l=new ccui.Layout;l.setContentSize(640,100);l.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);l.setBackGroundColor(cc.color("#6fcdc1"));l.setAnchorPoint(0,0);l.setTouchEnabled(!0);l.addClickEventListener(d);m.addChild(l);d=new cc.LabelTTF("\u9589\u3058\u308b");d.setFontName(GAME_FONT.PRO_W3);
d.setFontSize(26);d.setFontFillColor(cc.color("#ffffff"));d.setAnchorPoint(0.5,0.5);d.setPosition(l.getContentSize().width>>1,l.getContentSize().height>>1);d.setScanPhixelRGB();m.addChild(d);c.addChild(m)},n=new ccui.ListView;n.setDirection(ccui.ScrollView.DIR_VERTICAL);n.setTouchEnabled(!0);n.setBounceEnabled(!1);n.setContentSize(cc.size(cc.winSize.width,cc.winSize.height-120));n.setAnchorPoint(0,1);n.setPosition(0,cc.winSize.height);n.setBreakPoint(100);this.addChild(n);n.pushBackCustomItem(d);
var r=52+(cc.winSize.height-100-100-756)/4,d=new ccui.Layout;d.setContentSize(cc.winSize.width,r+200);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100);d.setTouchEnabled(!0);d.addClickEventListener(function(){SoundManager.instance().playEffect(ADDutchpayRes.angel_popup_sound);var a=new Mask;c.addChild(a);a.open();var b=function(){c.removeChild(a);c.removeChild(d);c.removeChild(e);c.m_back_func=p};c.m_back_func=b;var d=new ccui.Layout;d.setContentSize(cc.winSize.width,cc.winSize.height);
d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(b);c.addChild(d);var e=new cc.Sprite(ADDutchpayRes.angel_popup);e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(e);var g=new cc.LabelTTF("\u5929\u4f7f\u304c\u5fae\u7b11\u3093\u3060");g.setAnchorPoint(0.5,1);g.setPosition((e.getContentSize().width>>1)+20,e.getContentSize().height-300);g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(32);g.setFontFillColor(cc.color("#6fcdc1"));e.addChild(g);
var h=new cc.LabelTTF("\u5e78\u904b\u306e\u6301\u3061\u4e3b\u306f\uff01");h.setAnchorPoint(0.5,1);h.setPosition((e.getContentSize().width>>1)+20,g.getPosition().y-g.getContentSize().height-10);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(32);h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);g=new cc.LabelTTF(f);g.setAnchorPoint(0.5,1);g.setPosition(e.getContentSize().width>>1,h.getPosition().y-h.getContentSize().height-60);g.setFontName(GAME_FONT.PRO_W6);g.setFontSize(60);g.setFontFillColor(cc.color("#6fcdc1"));
e.addChild(g);h=new cc.LabelTTF("\u69d8");h.setAnchorPoint(0,0);h.setPosition(g.getPosition().x+(g.getContentSize().width>>1)+10,g.getPosition().y-g.getContentSize().height);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(40);h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);h=new cc.LabelTTF("\u4eca\u56de\u306f\u30bf\u30c0\u3067\u3059\u301c");h.setAnchorPoint(0.5,1);h.setPosition((e.getContentSize().width>>1)+20,g.getPosition().y-g.getContentSize().height-60);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(32);
h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);g=new ccui.Layout;g.setContentSize(200,80);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color("#6fcdc1"));g.setAnchorPoint(0.5,1);g.setPosition((e.getContentSize().width>>1)+20,h.getPosition().y-h.getContentSize().height-60);g.setTouchEnabled(!0);g.addClickEventListener(b);e.addChild(g);b=new cc.LabelTTF("\u9589\u3058\u308b");b.setAnchorPoint(0.5,0.5);b.setPosition(100,40);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(32);
b.setFontFillColor(cc.color("#ffffff"));g.addChild(b)});n.pushBackCustomItem(d);var q=new cc.Sprite(ADDutchpayRes.angel_button);q.setAnchorPoint(0.5,0);q.setPosition(d.getContentSize().width/2,52);d.addChild(q);var s=new cc.LabelTTF("\u5929\u56fd\u884c\u304d\u306e\u53c2\u52a0\u8005?");s.setFontName(GAME_FONT.PRO_W6);s.setFontSize(32);s.setFontFillColor(cc.color(111,205,193,255));s.setAnchorPoint(cc.p(0.5,0));s.setPosition(q.getPositionX(),0);d.addChild(s);d=new ccui.Layout;d.setContentSize(cc.winSize.width,
r+200);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100-(r+200));d.setTouchEnabled(!0);d.addClickEventListener(function(){SoundManager.instance().playEffect(ADDutchpayRes.human_popup_sound);var a=new Mask;c.addChild(a);a.open();var b=function(){c.removeChild(a);c.removeChild(d);c.removeChild(e);c.m_back_func=p};c.m_back_func=b;var d=new ccui.Layout;d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(b);c.addChild(d);var e=
new cc.Sprite(ADDutchpayRes.normal_popup);e.setAnchorPoint(0.5,0.5);e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(e);var f=new cc.LabelTTF("\u5929\u56fd\u3067\u3082\u5730\u7344\u3067\u3082\u306a\u3044");f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)+10,e.getContentSize().height-300);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(32);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);var g=new cc.LabelTTF("\u73fe\u4e16\u306e\u307e\u307e\u306e\u7686\u3055\u3093\u306f");
g.setAnchorPoint(0.5,1);g.setPosition((e.getContentSize().width>>1)+10,f.getPosition().y-f.getContentSize().height-10);g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(32);g.setFontFillColor(cc.color("#6fcdc1"));e.addChild(g);f=new cc.LabelTTF("\uff11\u4eba\u3042\u305f\u308a");f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)+10,g.getPosition().y-g.getContentSize().height-10);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(32);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);f=new cc.LabelTTF("\uffe5"+
h);f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)+10,g.getPosition().y-g.getContentSize().height-60);f.setFontName(GAME_FONT.PRO_W6);f.setFontSize(60);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);g=new cc.LabelTTF("\u304a\u652f\u6255\u3044\u4e0b\u3055\u3044");g.setAnchorPoint(0.5,1);g.setPosition((e.getContentSize().width>>1)+10,f.getPosition().y-f.getContentSize().height-60);g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(32);g.setFontFillColor(cc.color("#6fcdc1"));e.addChild(g);
f=new ccui.Layout;f.setContentSize(200,80);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color("#6fcdc1"));f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)+10,g.getPosition().y-g.getContentSize().height-60);f.setTouchEnabled(!0);f.addClickEventListener(b);e.addChild(f);b=new cc.LabelTTF("\u9589\u3058\u308b");b.setAnchorPoint(0.5,0.5);b.setPosition(100,40);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(32);b.setFontFillColor(cc.color("#ffffff"));f.addChild(b)});
n.pushBackCustomItem(d);q=new cc.Sprite(ADDutchpayRes.normal_button);q.setAnchorPoint(0.5,0);q.setPosition(d.getContentSize().width/2,52);d.addChild(q);s=new cc.LabelTTF("\u73fe\u4e16\u306e\u307e\u307e\u306e\u53c2\u52a0\u8005?");s.setFontName(GAME_FONT.PRO_W6);s.setFontSize(32);s.setFontFillColor(cc.color(111,205,193,255));s.setAnchorPoint(cc.p(0.5,0));s.setPosition(q.getPositionX(),0);d.addChild(s);d=new ccui.Layout;d.setContentSize(cc.winSize.width,r+200);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-
100-2*(r+200));d.setTouchEnabled(!0);d.addClickEventListener(function(){SoundManager.instance().playEffect(ADDutchpayRes.devil_popup_sound);var a=new Mask;c.addChild(a);a.open();var b=function(){c.removeChild(a);c.removeChild(d);c.removeChild(e);c.m_back_func=p};c.m_back_func=b;var d=new ccui.Layout;d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0,0);d.setTouchEnabled(!0);d.addClickEventListener(b);c.addChild(d);var e=new cc.Sprite(ADDutchpayRes.devil_popup);e.setAnchorPoint(0.5,
0.5);e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(e);var f=new cc.LabelTTF("\u4fe1\u3058\u3089\u308c\u306a\u3044...");f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)-20,e.getContentSize().height-300);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(32);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);var h=new cc.LabelTTF("\u60aa\u9b54\u306b\u3064\u304b\u307e\u3063\u3066\u3057\u307e\u3063\u305f");h.setAnchorPoint(0.5,1);h.setPosition((e.getContentSize().width>>
1)-20,f.getPosition().y-f.getContentSize().height-10);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(32);h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);f=new cc.LabelTTF(g);f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>1)-20,h.getPosition().y-h.getContentSize().height-40);f.setFontName(GAME_FONT.PRO_W6);f.setFontSize(60);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);h=new cc.LabelTTF("\u69d8");h.setAnchorPoint(0,0);h.setPosition(f.getPosition().x+(f.getContentSize().width>>
1)+10,f.getPosition().y-f.getContentSize().height);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(40);h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);h=new cc.LabelTTF("\uffe5"+k);h.setAnchorPoint(0.5,1);h.setPosition((e.getContentSize().width>>1)-20,f.getPosition().y-f.getContentSize().height-40);h.setFontName(GAME_FONT.PRO_W6);h.setFontSize(60);h.setFontFillColor(cc.color("#6fcdc1"));e.addChild(h);f=new cc.LabelTTF("\u304a\u652f\u6255\u3044\u4e0b\u3055\u3044");f.setAnchorPoint(0.5,1);f.setPosition((e.getContentSize().width>>
1)-20,h.getPosition().y-h.getContentSize().height-10);f.setFontName(GAME_FONT.PRO_W3);f.setFontSize(32);f.setFontFillColor(cc.color("#6fcdc1"));e.addChild(f);h=new ccui.Layout;h.setContentSize(200,80);h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(cc.color("#6fcdc1"));h.setAnchorPoint(0.5,1);h.setPosition((e.getContentSize().width>>1)-20,f.getPosition().y-f.getContentSize().height-20);h.setTouchEnabled(!0);h.addClickEventListener(b);e.addChild(h);b=new cc.LabelTTF("\u9589\u3058\u308b");
b.setAnchorPoint(0.5,0.5);b.setPosition(100,40);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(32);b.setFontFillColor(cc.color("#ffffff"));h.addChild(b)});n.pushBackCustomItem(d);q=new cc.Sprite(ADDutchpayRes.devil_button);q.setAnchorPoint(0.5,0);q.setPosition(d.getContentSize().width/2,52);d.addChild(q);s=new cc.LabelTTF("\u5730\u7344\u884c\u304d\u306e\u53c2\u52a0\u8005?");s.setFontName(GAME_FONT.PRO_W6);s.setFontSize(32);s.setFontFillColor(cc.color(111,205,193,255));s.setAnchorPoint(cc.p(0.5,0));
s.setPosition(q.getPositionX(),0);d.addChild(s);b?(this.m_back_func=null,p=function(){c.loadAngelView(a)},n=new ccui.Layout,n.setContentSize(300,80),n.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID),n.setBackGroundColor(cc.color("#6fcdc1")),n.setAnchorPoint(0.5,0),n.setPosition(d.getContentSize().width>>1,10),n.setTouchEnabled(!0),n.addClickEventListener(p),this.addChild(n),e=new cc.LabelTTF("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f"),e.setFontName(GAME_FONT.PRO_W3),e.setFontSize(26),e.setFontFillColor(cc.color("#ffffff")),
e.setAnchorPoint(0.5,0.5),e.setPosition(n.getContentSize().width>>1,n.getContentSize().height>>1),e.setScanPhixelRGB(),n.addChild(e)):(d=new ccui.Layout,d.setContentSize(300,80),d.setAnchorPoint(0,0),d.setPosition(cc.winSize.width/2-230-5,30),this.addChild(d),n=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1),n.setScale(d.getContentSize().width,80),n.setAnchorPoint(0,0),n.setTouchEnabled(!0),n.addClickEventListener(e),d.addChild(n),e=new cc.LabelTTF("\u5168\u4f53\u7d50\u679c\u3092\u898b\u308b"),
e.setFontName(GAME_FONT.PRO_W3),e.setFontSize(26),e.setFontFillColor(cc.color(255,255,255,255)),e.setScanPhixelRGB(),e.setAnchorPoint(0.5,0.5),e.setPosition(d.getContentSize().width/2,d.getContentSize().height/2),d.addChild(e),e=new ccui.Layout,e.setContentSize(150,80),e.setAnchorPoint(0,0),e.setPosition(cc.winSize.width/2-230-5+10+d.getContentSize().width,30),this.addChild(e),n=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1),n.setScale(e.getContentSize().width,80),n.setAnchorPoint(0,
0),n.setTouchEnabled(!0),n.addClickEventListener(p),e.addChild(n),n=new cc.LabelTTF("\u30db\u30fc\u30e0"),n.setFontName(GAME_FONT.PRO_W3),n.setFontSize(26),n.setFontFillColor(cc.color(255,255,255,255)),n.setScanPhixelRGB(),n.setAnchorPoint(0.5,0.5),n.setPosition(e.getContentSize().width/2,e.getContentSize().height/2),e.addChild(n))},modeBtnCallback:function(a){if(a.getParent().getChildByTag(1))d=a.getParent().getChildByTag(1),f=a.getParent().getChildByTag(3),d.runAction(new cc.MoveTo(0.2,cc.p(cc.winSize.width-
50,a.getPosition().y+a.getBoundingBox().height/2))),f.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(3);a.getParent().removeChildByTag(4);a.getParent().getChildByTag(100).close()},this)));else{var b=this;a.setTouchEnabled(!1);a.getParent().getChildByTag(100).open();var c=new ccui.Layout;c.setContentSize(cc.winSize.width,
cc.winSize.height);c.setAnchorPoint(0,0);c.setTag(4);c.setTouchEnabled(!0);c.addTouchEventListener(function(){d=a.getParent().getChildByTag(1);f=a.getParent().getChildByTag(3);d.runAction(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)));f.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(3);
a.getParent().removeChildByTag(4);a.getParent().getChildByTag(100).close()},this)))});a.getParent().addChild(c);var d=new ccui.Button(ADDutchpayRes.angel_play_btn,ADDutchpayRes.angel_play_btn);d.setTag(1);d.setAnchorPoint(cc.p(1,0));d.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);d.addClickEventListener(function(){b.loadAngelView()});c=new cc.LabelTTF("\u5929\u56fd\u3068\u5730\u7344");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,
243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,d.getContentSize().height/2);var e=new cc.LabelTTF("\uff11\u4eba\u304c\u30bf\u30c0\u3001\uff11\u4eba\u304c\uff12\u500d\u652f\u6255\u3046");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(28);e.setFontFillColor(cc.color("#6fcdc1"));e.setScanPhixelRGB();e.setAnchorPoint(1,1);e.setPosition(-20,d.getContentSize().height/2);d.addChild(c);d.addChild(e);c=new cc.MoveTo(0.2,cc.p(d.getPosition().x,a.y+a.getBoundingBox().height+22));d.runAction(c);
a.getParent().addChild(d);var f=new ccui.Button(ADDutchpayRes.equal_play_btn,ADDutchpayRes.equal_play_btn);f.setTag(3);f.setAnchorPoint(cc.p(1,0));f.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);f.addClickEventListener(function(){b.loadEqualView()});c=new cc.LabelTTF("\u5747\u7b49\u30e2\u30fc\u30c9");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,f.getContentSize().height/
2);e=new cc.LabelTTF("\u5168\u984d\u3092\u5747\u7b49\u306b\u5206\u3051\u308b");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(28);e.setFontFillColor(cc.color("#6fcdc1"));e.setScanPhixelRGB();e.setAnchorPoint(1,1);e.setPosition(-20,f.getContentSize().height/2);f.addChild(c);f.addChild(e);c=new cc.Sequence(new cc.MoveTo(0.2,cc.p(f.getPosition().x,a.y+a.getBoundingBox().height+22+15+d.getBoundingBox().height)),new cc.callFunc(function(){a.setTouchEnabled(!0)},this));f.runAction(c);a.getParent().addChild(f)}},
stateBack:function(a){a.m_state==a.STATE_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.m_state){case a.STATE_EQUAL:case a.STATE_RANDOM:a.m_isResult?a.m_back_func():a.loadMainView();break;case a.STATE_ANGEL:a.loadMainView();break;case a.STATE_ANGEL_RESULT:a.m_back_func?a.m_back_func():a.loadMainView()}}}),ADDutchpayScene=cc.Scene.extend({onEnter:function(){this._super();var a=new ADDutchpayLayer;this.addChild(a)}});var RussianRouletteLayer=cc.LayerColor.extend({toolBar:null,mainGun:null,startBtn:null,selectNumScroll:null,settingMagazineBg:null,bulletNum:null,bulletNumTemp:null,bulletNumSel:null,gameState:0,screenWidth:null,screenHeight:null,TAG_SETTING:200,TAG_READY:201,TAG_GAME:202,TAG_MAIN_BULLET:204,TAG_ANIM:205,ORDER_Z_MAIN:10,ORDER_Z_SETTING:20,ORDER_Z_TUTORIAL:50,ORDER_Z_EFFECT:60,ctor:function(){this._super(cc.color(111,205,192,255));mainView=this;this.screenWidth=cc.winSize.width;this.screenHeight=cc.winSize.height;
this.init();return!0},init:function(){this.gameState=0;this.mainGun=new cc.Sprite(RussianRouletteRes.animation_shot_gun4);this.mainGun.setAnchorPoint(cc.p(0.5,1));this.mainGun.setPosition(cc.winSize.width/2,cc.winSize.height-200);this.addChild(this.mainGun);this.startBtn=new ccui.Button(RussianRouletteRes.main_start_btn,RussianRouletteRes.main_start_btn);this.startBtn.setAnchorPoint(cc.p(1,0));this.startBtn.setPosition(cc.winSize.width-22,50);this.startBtn.setName("setting_start");this.startBtn.addTouchEventListener(this.touchEvent,
this);this.addChild(this.startBtn,this.ORDER_Z_MAIN);this.toolBar=new Toolbar(GAME_TYPE.RussianRoulette);this.toolBar.setAnchorPoint(cc.p(0,1));this.toolBar.setPosition(cc.p(0,cc.winSize.height));this.addChild(this.toolBar,this.ORDER_Z_MAIN);var a=new ccui.Button(RussianRouletteRes.main_info);a.setAnchorPoint(1,1);a.setPosition(cc.winSize.width-20,cc.winSize.height-20);a.setName("tutorial_info");a.addTouchEventListener(this.touchEvent,this);this.addChild(a,this.ORDER_Z_SETTING+1);this.setTutorialView(!0,
"main_Tutorial",RussianRouletteRes.main_tutorial_top,100,RussianRouletteRes.main_tutorial_bottom)},touchEvent:function(a,b){switch(b){case ccui.Widget.TOUCH_ENDED:if(cc.log("touchEvent "+a.getName()),"setting_start"==a.getName()){if(0<mainView.gameState)break;mainView.getChildByTag(mainView.TAG_READY);mainView.removeChildByTag(mainView.TAG_READY,!0);mainView.getChildByTag(mainView.TAG_GAME);mainView.removeChildByTag(mainView.TAG_GAME,!0);mainView.bulletNumTemp=mainView.bulletNum=6;mainView.bulletNumSel=
1;mainView.startBtn.setTouchEnabled(!1);mainView.toolBar.setToolbarTouchEnable(!1);mainView.settingView();this.schedule(this.setBulletNumbr,0)}else if("setting_confirm"==a.getName())mainView.startBtn.setTouchEnabled(!0),mainView.toolBar.setToolbarTouchEnable(!0),this.unschedule(this.setBulletNumbr),mainView.removeChildByTag(mainView.TAG_SETTING,!0),mainView.readyGame();else if("tutorial_info"==a.getName())if(mainView.getChildByTag(mainView.TAG_SETTING)){var c=150;0>cc.winSize.height-820-c&&(c=0);
this.setTutorialView(!1,"setting_Tutorial",RussianRouletteRes.setting_tutorial_top,c+50)}else this.setTutorialView(!1,"main_Tutorial",RussianRouletteRes.main_tutorial_top,100,RussianRouletteRes.main_tutorial_bottom)}},settingView:function(){var a=new ccui.Layout;a.setContentSize(cc.winSize.width,cc.winSize.height);a.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);a.setBackGroundColor(cc.color(0,0,0,180));a.setBackGroundColorOpacity(180);a.setAnchorPoint(0,0);a.setTouchEnabled(!0);a.setTag(this.TAG_SETTING);
a.addTouchEventListener(function(){this.removeFromParent();mainView.startBtn.setTouchEnabled(!0);mainView.toolBar.setToolbarTouchEnable(!0)});this.addChild(a,this.ORDER_Z_SETTING);var b=150;0>cc.winSize.height-820-b&&(b=0);var c=new RoundRect(640,820);c.setPosition((cc.winSize.width-640)/2,cc.winSize.height-820-b);a.addChild(c);a=new cc.LayerColor(cc.color(111,205,192,255),640,100);a.setPosition(0,0);c.addChild(a);var d=new ccui.Button;d.setContentSize(640,100);d.setPosition(320,50);d.setTouchEnabled(!0);
d.setScale9Enabled(!0);d.setName("setting_confirm");d.setTitleText("\u78ba\u8a8d");d.setTitleColor(cc.color.WHITE);d.setTitleFontName(GAME_FONT.PRO_W6);d.setTitleFontSize(30);d._titleRenderer.setScanPhixelRGB();d.addTouchEventListener(this.touchEvent,this);a.addChild(d);this.selectNumScroll=new ScrollNum(2,13,this.bulletNum);this.selectNumScroll.setPosition(320,160);c.addChild(this.selectNumScroll);this.settingMagazineBg=new cc.Sprite(RussianRouletteRes.setting_magazine_bg);this.settingMagazineBg.setPosition(320,
490);c.addChild(this.settingMagazineBg);this.setSettingBullet(this.settingMagazineBg);this.setTutorialView(!0,"setting_Tutorial",RussianRouletteRes.setting_tutorial_top,b+50)},setTutorialView:function(a,b,c,d,e){var f=GAME_TYPE.RussianRoulette.name+"_"+b;if(a&&1!=DataManager.instance().getData(f)||!a)b=new cc.LayerColor(cc.color(0,0,0,255),cc.winSize.width,cc.winSize.height),b.setOpacity(180),this.addChild(b,this.ORDER_Z_TUTORIAL),c=new cc.Sprite(c),c.setAnchorPoint(cc.p(0,1)),c.setPosition(0,cc.winSize.height-
d),b.addChild(c),e&&(d=new cc.Sprite(e),d.setAnchorPoint(cc.p(0,0)),d.setPosition(0,-6),b.addChild(d)),cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(c,d)?!0:!1},onTouchEnded:function(b,c){var d=c.getCurrentTarget();a&&DataManager.instance().saveData(f,1);mainView.removeChild(d,
!0)}}),b)},setSettingBullet:function(a){var b=[[-230,0,230,0],[0,230,-200,-130,200,-130],[0,230,-230,0,0,-230,230,0],[0,240,-220,80,-150,-180,150,-180,220,80],[0,-230,0,230,-210,110,-210,-110,210,-110,210,110],[0,235,-190,140,-230,-60,-100,-210,100,-210,230,-60,190,140],[-90,220,-220,90,-220,-90,-90,-220,90,-220,220,-90,220,90,90,220],[0,240,-150,175,-230,24,-205,-130,-80,-220,80,-220,205,-130,230,24,150,175],[-80,230,-200,140,-240,0,-200,-140,-80,-230,80,-230,200,-140,240,0,200,140,80,230],[0,250,
-140,200,-230,100,-250,-40,-190,-170,-70,-250,70,-250,190,-170,250,-40,230,100,140,200],[-70,245,-180,180,-240,60,-240,-60,-180,-180,-70,-245,70,-245,180,-180,240,-60,240,60,180,180,70,245]];0<a.getChildrenCount()&&a.removeAllChildren(!0);for(var c,d=this.bulletNumSel=1,e=0;e<b[this.bulletNum-2].length/2;e++){c=new cc.Sprite(RussianRouletteRes.setting_bullet_empty);if(8<=this.bulletNum){var f=Math.pow(0.9,this.bulletNum-7);c.setScale(f,f)}c.setPosition(a.getTextureRect().width/2-0.63*b[this.bulletNum-
2][2*e],a.getTextureRect().height/2+10+0.63*b[this.bulletNum-2][2*e+1]);a.addChild(c);0<d&&(d--,f=new cc.Sprite(RussianRouletteRes.setting_bullet),f.setPosition(c.getContentSize().width/2,c.getContentSize().height/2),c.addChild(f));f=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height);if(cc.rectContainsPoint(e,d)){cc.log("sprite began... x \x3d "+
c.getContentSize().width/2+", y \x3d "+c.getContentSize().height/2);if(0==c.getChildrenCount())mainView.bulletNumSel++,d=new cc.Sprite(RussianRouletteRes.setting_bullet),d.setPosition(c.getContentSize().width/2,c.getContentSize().height/2),c.addChild(d);else{if(1==mainView.bulletNumSel)return!1;mainView.bulletNumSel--;c.removeAllChildren(!0)}SoundManager.instance().playEffect(RussianRouletteRes.sound_magazine_on_off);return!0}return!1}});cc.eventManager.addListener(f,c)}},setBulletNumbr:function(){this.selectNumScroll.getNumber()!=
this.bulletNum&&(this.bulletNumTemp=this.bulletNum=this.selectNumScroll.getNumber(),this.setSettingBullet(this.settingMagazineBg))},setBulletView:function(){var a=this.getChildByTag(this.TAG_MAIN_BULLET);a||(a=new cc.LayerColor(cc.color(0,0,0,0),this.screenWidth,this.screenHeight),a.setTag(this.TAG_MAIN_BULLET),this.addChild(a));0<a.getChildrenCount()&&a.removeAllChildren(!0);for(var b=0;b<this.bulletNum;b++){var c=new cc.Sprite(RussianRouletteRes.main_bullet_marking);c.setAnchorPoint(cc.p(0.5,1));
c.setPosition(this.screenWidth/2-28-280+56*b,this.screenHeight-200-560-10);a.addChild(c)}for(b=0;b<this.bulletNumSel;b++)c=new cc.Sprite(RussianRouletteRes.main_bullet),c.setAnchorPoint(cc.p(0.5,1)),c.setPosition(this.screenWidth/2-28-280+56*b,this.screenHeight-200-560-10),a.addChild(c)},readyGame:function(){this.setBulletView();var a=new cc.LayerColor(cc.color(255,255,0,0),175,175);a.setTag(this.TAG_READY);a.setAnchorPoint(cc.p(0.5,1));a.setPosition(this.screenWidth/2-110,this.screenHeight-500);
this.addChild(a);var b,c=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,c){var f=c.getCurrentTarget(),g=f.convertToNodeSpace(a.getLocation()),f=f.getContentSize(),f=cc.rect(0,0,f.width,f.height);return cc.rectContainsPoint(f,g)?(b=a.getLocation(),!0):!1},onTouchMoved:function(a,b){b.getCurrentTarget();a.getDelta();a.getLocation();a.getID()},onTouchEnded:function(a,c){if(0<mainView.gameState)return!1;c.getCurrentTarget();var f=a.getLocation();
a.getID();cc.log("onTouchEnded at: "+f.x+" "+f.y);f=cc.p(f.x-b.x,f.y-b.y);Math.abs(f.x)>Math.abs(f.y)?30<f.x?cc.log("right"):-30>f.x&&cc.log("left"):30<f.y?(cc.log("up"),mainView.magazineAnimation("up")):-30>f.y&&(cc.log("down"),mainView.magazineAnimation("down"))},onTouchCancelled:function(a,b){var c=a.getLocation();a.getID();cc.log("onTouchCancelled at: "+c.x+" "+c.y)}});cc.eventManager.addListener(c,a)},startGame:function(){var a=new cc.LayerColor(cc.color(255,255,0,0),70,74);a.setTag(this.TAG_GAME);
a.setAnchorPoint(cc.p(0.5,1));a.setPosition(this.screenWidth/2+75,this.screenHeight-600);this.addChild(a);var b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var e=b.getCurrentTarget(),f=e.convertToNodeSpace(a.getLocation()),e=e.getContentSize(),e=cc.rect(0,0,e.width,e.height);return cc.rectContainsPoint(e,f)?!0:!1},onTouchEnded:function(a,b){if(0<mainView.gameState||mainView.getChildByTag(mainView.TAG_ANIM))return!1;if(0>=mainView.bulletNumSel)return mainView.gameState=
4,mainView.scheduleOnce(function(){mainView.shotFailGunAnimation();SoundManager.instance().playEffect(RussianRouletteRes.sound_empty_gun)},0.2),!1;var e=getRandomInt(1,mainView.bulletNumTemp);cc.log(": "+mainView.bulletNumTemp+"::"+mainView.bulletNumSel+"::"+mainView.bulletNum);e<=mainView.bulletNumSel||mainView.bulletNumSel==mainView.bulletNum?(mainView.bulletNumSel--,mainView.gameState=2,mainView.scheduleOnce(function(){mainView.shotGunAnimation()},0.2)):(mainView.gameState=1,mainView.scheduleOnce(function(){mainView.shotFailGunAnimation();
SoundManager.instance().playEffect(RussianRouletteRes.sound_no_bang)},0.2));mainView.bulletNumTemp--;mainView.startBtn.setTouchEnabled(!1);mainView.toolBar.setToolbarTouchEnable(!1)}});cc.eventManager.addListener(b,a)},magazineAnimation:function(a){SoundManager.instance().playEffect(RussianRouletteRes.sound_revolver_shuffle);this.gameState=3;var b=new cc.Sprite;b.setAnchorPoint(0,1);b.setPosition(0.5,this.screenHeight-200-3);for(var c=[],d=1;15>=d;d++){var e="_00";10<=d&&(e="_0");c.push(new cc.SpriteFrame("res/Scene/RussianRoulette/animation/"+
a+e+d+".png",new cc.Rect(0,0,750,560)))}a=new cc.Animation(c,0.02);c=cc.animate(a);b.runAction(new cc.Sequence(c));this.addChild(b);b.scheduleOnce(function(){b.removeFromParent(!0);null==mainView.getChildByTag(mainView.TAG_GAME)&&mainView.startGame();mainView.gameState=0},0.02*a.getTotalDelayUnits())},shotFailGunAnimation:function(){this.mainGun.setVisible(!1);var a=new cc.LayerColor(cc.color(0,0,0,0),this.screenWidth,this.screenHeight);a.setPosition(0,0);a.setTag(this.TAG_ANIM);this.addChild(a);
anim=new cc.Sprite;anim.setAnchorPoint(0,1);anim.setPosition(0.5,this.screenHeight-200);var b=[];b.push(new cc.SpriteFrame(RussianRouletteRes.animation_shot_gun4_1,new cc.Rect(0,0,750,560)));b.push(new cc.SpriteFrame(RussianRouletteRes.animation_shot_gun4,new cc.Rect(0,0,750,560)));b.push(new cc.SpriteFrame(RussianRouletteRes.animation_shot_gun4,new cc.Rect(0,0,750,560)));b.push(new cc.SpriteFrame(RussianRouletteRes.animation_shot_gun4,new cc.Rect(0,0,750,560)));b.push(new cc.SpriteFrame(RussianRouletteRes.animation_shot_gun4,
new cc.Rect(0,0,750,560)));b=new cc.Animation(b,0.2);b=cc.animate(b);anim.runAction(new cc.Sequence(b));a.addChild(anim);a.scheduleOnce(function(){mainView.mainGun.setVisible(!0);a.removeFromParent(!0);4==mainView.gameState?mainView.gameState=0:mainView.clearAnimation()},0.6)},shotGunAnimation:function(){SoundManager.instance().playEffect(RussianRouletteRes.sound_bang);this.mainGun.setVisible(!1);var a=new cc.LayerColor(cc.color(0,0,0,0),this.screenWidth,this.screenHeight);a.setPosition(0,0);a.setTag(this.TAG_ANIM);
this.addChild(a);for(var b=0;1>=b;b++){anim=new cc.Sprite;0==b?(anim.setAnchorPoint(0,1),anim.setPosition(0.5,this.screenHeight-200)):(anim.setAnchorPoint(0.5,0.5),anim.setPosition(this.screenWidth/2,this.screenHeight/2));for(var c=[],d=1;4>=d;d++){var e=560,f="res/Scene/RussianRoulette/animation/shot_gun_"+d+".png";1==b&&(f="res/Scene/RussianRoulette/animation/shot_dim_"+d+".png",e=1334);c.push(new cc.SpriteFrame(f,new cc.Rect(0,0,750,e)));1==d&&c.push(new cc.SpriteFrame(f,new cc.Rect(0,0,750,e)))}c=
new cc.Animation(c,0.1);d=cc.animate(c);anim.runAction(new cc.Sequence(d));a.addChild(anim)}a.scheduleOnce(function(){mainView.mainGun.setVisible(!0);a.removeFromParent(!0);mainView.scheduleOnce(function(){mainView.outAnimation()},0.2)},0.1*c.getTotalDelayUnits())},clearAnimation:function(){SoundManager.instance().playEffect(RussianRouletteRes.sound_clear);var a=new cc.LayerColor(cc.color(0,0,0,180),this.screenWidth,this.screenHeight);a.setPosition(0,0);a.setTag(this.TAG_ANIM);this.addChild(a,this.ORDER_Z_EFFECT);
var b=new cc.Sprite;b.setAnchorPoint(0.5,0.5);b.setPosition(this.screenWidth/2,this.screenHeight/2);for(var c=[],d=1;21>=d;d++){var e="0";10<=d&&(e="");c.push(new cc.SpriteFrame("res/Scene/RussianRoulette/animation/clear"+e+d+".png",new cc.Rect(0,0,750,1334)))}c=new cc.Animation(c,0.1);c=cc.animate(c);b.runAction((new cc.Sequence(c)).repeatForever());a.addChild(b);a.scheduleOnce(function(){mainView.resetGameState(a)},3);b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,
onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(c,d)?!0:!1},onTouchEnded:function(b,c){mainView.resetGameState(a)}});cc.eventManager.addListener(b,a)},outAnimation:function(){SoundManager.instance().playEffect(RussianRouletteRes.sound_sorry);var a=new cc.LayerColor(cc.color(0,0,0,180),this.screenWidth,this.screenHeight);a.setPosition(0,0);a.setTag(this.TAG_ANIM);this.addChild(a,
this.ORDER_Z_EFFECT);var b=new cc.Sprite;b.setAnchorPoint(0.5,0.5);b.setPosition(this.screenWidth/2,this.screenHeight/2);for(var c=[],d=1;13>=d;d++){var e="res/Scene/RussianRoulette/animation/out01.png";10==d?e="res/Scene/RussianRoulette/animation/out02.png":11==d&&(e="res/Scene/RussianRoulette/animation/out03.png");c.push(new cc.SpriteFrame(e,new cc.Rect(0,0,750,1334)))}c=new cc.Animation(c,0.1);c=cc.animate(c);b.runAction((new cc.Sequence(c)).repeatForever());a.addChild(b);a.scheduleOnce(function(){mainView.resetGameState(a)},
3);b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(c,d)?!0:!1},onTouchEnded:function(b,c){mainView.resetGameState(a)}});cc.eventManager.addListener(b,a)},resetGameState:function(a){this.getChildByTag(this.TAG_ANIM)&&(SoundManager.instance().stopAllEffects(),this.removeChildByTag(this.TAG_ANIM,
!0),this.gameState=0,this.startBtn.setTouchEnabled(!0),this.toolBar.setToolbarTouchEnable(!0),this.setBulletView())}}),RussianRouletteScene=cc.Scene.extend({onEnter:function(){this._super();var a=new RussianRouletteLayer;this.addChild(a)}});var SortilegeLayer=cc.LayerColor.extend({maxPer:null,joinInPersonslistView:null,penaltyPer:null,penaltyPerlistView:null,textFiledAddArray:null,isCanRock:null,ROCK_MAX:6,selMode:null,isClearResult:!0,gameStage:0,TAG_MAIN:0,TAG_SETTING:200,TAG_READY:201,TAG_GAME:202,TAG_MASK:205,TAG_ANIM:206,ORDER_Z_MAIN:10,ORDER_Z_SETTING:20,ORDER_Z_TUTORIAL:50,ORDER_Z_EFFECT:60,ORDER_Z_RESULT:60,_itemPositionArray:null,_itemPositionArrayA:[[124,85],[480,54],[270,270],[20,380],[460,350],[195,400],[430,305],[62,205],
[480,105],[176,30]],_itemPositionArrayB:[[64,25],[420,-36],[210,180],[-40,320],[451,290],[140,300],[364,205],[14,105],[390,5],[110,-70]],_cuItemNode:null,ctor:function(){this._super(cc.color(111,205,192,255));mainView=this;this.initMainView();ADD_CHANGESTATE_CALLBACK(this.stateBack,this);return!0},stateBack:function(a){a.gameStage==a.TAG_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.gameStage){case a.TAG_SETTING:case a.TAG_GAME:mainView.removeAllChildren(),
mainView.initMainView()}},initMainView:function(){this._cuItemNode=[];this.selMode=-1;this.isCanRock=this.ROCK_MAX;this.gameStage=this.TAG_MAIN;this.textFiledAddArray=[];var a=new Toolbar(GAME_TYPE.Sortilege);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,this.ORDER_Z_MAIN);a=0;500>window.screen.height?a=80:600>window.screen.height&&(a=40);var b=260-a,a=110-a;this.initButton("mode1","",cc.winSize.width/2-237+10,cc.winSize.height/2+b,SortilegeRes.icon_bom_off);
this.initButton("mode2","",cc.winSize.width/2+10,cc.winSize.height/2+b,SortilegeRes.icon_kuji_off);this.initButton("mode3","",cc.winSize.width/2+247,cc.winSize.height/2+b,SortilegeRes.icon_gacha_off);this.initLabel("\u304f\u3058\u30bf\u30a4\u30d6\u3092\u9078\u629e",cc.winSize.width/2,this.getChildByName("mode1").getPositionY()+120);this.initLabel("\u304f\u3058\u306e\u6570\u3092\u9078\u629e",cc.winSize.width/2,cc.winSize.height/2+47);this.joinInPersonslistView=new ScrollNum(2,11,2,1);this.joinInPersonslistView.setPosition(cc.winSize.width/
2,cc.winSize.height/2-50);this.addChild(this.joinInPersonslistView);var b=new cc.DrawNode,c=[cc.p(cc.winSize.width/2-235,cc.winSize.height/2-107),cc.p(cc.winSize.width/2+235,cc.winSize.height/2-107)];this.addChild(b);b.drawPoly(c,null,2,cc.color("#a1ded7"));this.initLabel("\u306f\u305a\u308c\u306e\u6570\u3092\u9078\u629e",cc.winSize.width/2,cc.winSize.height/2-163);this.penaltyPerlistView=new ScrollNum(1,10,1,1);this.penaltyPerlistView.setPosition(cc.winSize.width/2,cc.winSize.height/2-260);this.addChild(this.penaltyPerlistView);
this.buttonBackColorText("Start","\u4eca\u3059\u3050\u958b\u59cb",cc.winSize.width/2-150,a,cc.size(280,100),cc.color("#448f94"));this.buttonBackColorText("SetWinners","\u306f\u305a\u308c\u8a2d\u5b9a",cc.winSize.width/2+150,a,cc.size(280,100),cc.color("#448f94"))},initWinnersLayerView:function(){this.removeAllChildren();this.gameStage=this.TAG_SETTING;var a=new cc.LayerColor(cc.color("#ffffff"),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);this.addChild(a);var b=this.penaltyPer,c=new cc.LayerColor(cc.color("#6fcdc1"),
a.getContentSize().width,100);c.setPosition(0,a.getContentSize().height-c.getContentSize().height);a.addChild(c);var d=new cc.LabelTTF("\u7f70\u30b2\u30fc\u30e0\u306e\u5185\u5bb9\u3092\u6c7a\u3081\u308b",GAME_FONT.PRO_W3);d.setFontSize(32);d.setFontFillColor(cc.color("#fff3bf"));d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width>>1,c.getContentSize().height>>1));c.addChild(d);c=new ccui.ScrollView;c.setAnchorPoint(0,0);c.setDirection(ccui.ScrollView.DIR_VERTICAL);c.setContentSize(cc.size(a.getContentSize().width,
a.getContentSize().height-100-148));c.setBounceEnabled(!1);d=c.getContentSize();c.setInnerContainerSize(cc.size(d.width,138*b));c.setPosition(0,148);a.addChild(c);this.itemEditMode(c,138,b);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(cc.p(0,1));a.setPosition(0,148);a.setScaleX(cc.winSize.width);this.addChild(a);this.buttonBackColorText("Start","\u958b\u59cb",cc.winSize.width/2,30,cc.size(200,80),cc.color("#c8c8c8"))},isInputHavNull:function(){for(var a=!1,b=0;b<this.textFiledAddArray.length;b++)if(""==
this.textFiledAddArray[b]){a=!0;break}return a},editBoxEditingDidEnd:function(a){mainView.textFiledAddArray.splice(a.getParent().getTag(),1,a.getString());a=mainView.getChildByName("Start");mainView.isInputHavNull()?(a.removeFromParent(),mainView.buttonBackColorText("Start","\u958b\u59cb",cc.winSize.width/2,30,cc.size(200,80),cc.color("#c8c8c8"))):(a.removeFromParent(),mainView.buttonBackColorText("Start","\u958b\u59cb",cc.winSize.width/2,30,cc.size(200,80),cc.color("#6fcdc1")))},itemEditMode:function(a,
b,c){for(var d=a.getContentSize().height,e=a.getInnerContainerSize().height,f=(b-60)/2+15,g=0;g<c;g++){var h=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,b);h.setTag(g);h.setAnchorPoint(cc.p(0,0));h.setPosition(0,a.getInnerContainerSize().height-(g+1)*b);a.addChild(h);var k=new cc.Sprite(GlobalRes.color_eeeeee);k.setAnchorPoint(0,0);k.setPosition(0,0);k.setScale(h.getContentSize().width,2);h.addChild(k);k=new cc.Sprite(GlobalRes.addition_d);k.setAnchorPoint(0,0.5);k.setName("defalutTxt");
k.setPosition(30,h.getContentSize().height/2);h.addChild(k);k.setVisible(!1);var m=new cc.LabelTTF(cc.sys.os==cc.sys.OS_IOS?"       ":"          \u3064\u76ee\u306e\u7f70\u30b2\u30fc\u30e0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",GAME_FONT.PRO_W3);m.setFontSize(36);m.setFontFillColor(cc.color("#c8c8c8"));m.setAnchorPoint(cc.p(0,0.5));m.setPosition(cc.p(0,k.getContentSize().height/2-2));k.addChild(m);m=new cc.LabelTTF(g+1,GAME_FONT.PRO_W6);m.setFontSize(36);m.setFontFillColor(cc.color("#c8c8c8"));
m.setAnchorPoint(cc.p(1,0.5));m.setPosition(cc.p(k.getPositionX()+k.getContentSize().width+15,k.getContentSize().height/2-2));k.addChild(m);k=new cc.LabelTTF;k.setName("text");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(36);k.setFontFillColor(cc.color("#6fcdc1"));k.setAnchorPoint(cc.p(0,0.5));k.setPosition(cc.p(32,h.getContentSize().height/2-3));h.addChild(k);k=new cc.EditBox(cc.size(h.getContentSize().width-200,80),new cc.Scale9Sprite);k.setPlaceholderFontColor(cc.color("#c8c8c8"));k.setPlaceholderFontSize(36);
k.setPlaceholderFontName(GAME_FONT.PRO_W3);k.setPlaceHolder(cc.sys.os==cc.sys.OS_IOS?"       ":"          \u3064\u76ee\u306e\u7f70\u30b2\u30fc\u30e0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");k.setAnchorPoint(cc.p(0,0.5));k.setPosition(30,h.getContentSize().height/2);k.setDelegate(this);k.setFontName(GAME_FONT.PRO_W3);k.setFontColor(cc.color("#6fcdc1"));k.setFontSize(36);k.setMaxLength(12);k.setName("textField");k.setAdd(!0,g+1);h.addChild(k);this.textFiledAddArray.length==c?k.setString(this.textFiledAddArray[g]):
this.textFiledAddArray.push("")}a.schedule(function(){var g=e-d;if(0<g){var h=function(d){var e=Math.abs(parseInt(a.getContainerPosition().y));d&&(e=Math.abs(g-e));for(var h=parseInt(e/b),e=parseInt(e%b)>f?1:0,k=function(b,e){var f=c-1-b;d&&(f=b);var g=a.getChildByTag(f).getChildByName("textField");if(e)g=function(b){var c=a.getChildByTag(b).getChildByName("textField");if(!c.isVisible()){var d=a.getChildByTag(b).getChildByName("defalutTxt");b=a.getChildByTag(b).getChildByName("text");c.setVisible(!0);
d.setVisible(!1);b.setVisible(!1)}},d?(g(f),g(f+1),g(f+2),g(f+3)):(g(f),g(f-1),g(f-2),g(f-3));else if(g.isVisible()){var h=a.getChildByTag(f).getChildByName("defalutTxt"),f=a.getChildByTag(f).getChildByName("text");g.setVisible(!1);""==g.getString()?(h.setVisible(!0),f.setVisible(!1)):(h.setVisible(!1),f.setString(g.getString()),f.setVisible(!0))}},m=0;m<h;m++)k(m,!1);0==e?k(h,!0):1==e&&k(h,!1)};h(!0);h(!1)}})},touchEvent:function(a,b){switch(b){case ccui.Widget.TOUCH_ENDED:cc.log("touchEvent "+a.getName()),
"mode1"==a.getName()||"mode2"==a.getName()||"mode3"==a.getName()?mainView.setIconMode(a):("SetWinners"==a.getName()||"Start"==a.getName()&&!mainView.isInputHavNull())&&mainView.initSetting(a)}},initLabel:function(a,b,c){a=new ccui.Text(a,GAME_FONT.PRO_W3,34);a.setAnchorPoint(cc.p(0.5,0.5));a.setColor(cc.color("#dbf2ef"));a.setPosition(b,c);this.addChild(a);return a},initButton:function(a,b,c,d,e){e=new ccui.Button(e,e);e.setTouchEnabled(!0);e.setAnchorPoint(cc.p(0.5,0.5));e.setName(a);e.setPosition(c,
d);e.setTitleText(b);e.setTitleColor(cc.color.BLACK);e.addTouchEventListener(mainView.touchEvent,mainView);this.addChild(e);return e},buttonBackColorText:function(a,b,c,d,e,f){var g=new ccui.Button;g.setContentSize(e);g.setAnchorPoint(0.5,0);g.setPosition(c,d);g.setScale9Enabled(!0);g.setName(a);g.setTouchEnabled(!0);g.addTouchEventListener(this.touchEvent,this);this.addChild(g);a=new cc.LayerColor(f,g.getContentSize().width,g.getContentSize().height);a.setPosition(0,0);g.addChild(a);b=new cc.LabelTTF(b);
b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(26);b.setFontFillColor(cc.color.WHITE);b.setAnchorPoint(0.5,0.5);b.setPosition(g.getContentSize().width/2,g.getContentSize().height/2);g.addChild(b);return g},setIconMode:function(a){if("mode1"==a.getName()){if(0==this.selMode)return;this.selMode=0;a.loadTextures(SortilegeRes.icon_bom_on,SortilegeRes.icon_bom_on);a=a.getParent().getChildren();for(var b=0;b<a.length;b++)"mode2"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_kuji_off,SortilegeRes.icon_kuji_off),
"mode3"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_gacha_off,SortilegeRes.icon_gacha_off)}else if("mode2"==a.getName()){if(1==this.selMode)return;this.selMode=1;a.loadTextures(SortilegeRes.icon_kuji_on,SortilegeRes.icon_kuji_on);a=a.getParent().getChildren();for(b=0;b<a.length;b++)"mode1"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_bom_off,SortilegeRes.icon_bom_off),"mode3"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_gacha_off,SortilegeRes.icon_gacha_off)}else if("mode3"==
a.getName()){if(2==this.selMode)return;this.selMode=2;a.loadTextures(SortilegeRes.icon_gacha_on,SortilegeRes.icon_gacha_on);a=a.getParent().getChildren();for(b=0;b<a.length;b++)"mode1"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_bom_off,SortilegeRes.icon_bom_off),"mode2"==a[b].getName()&&a[b].loadTextures(SortilegeRes.icon_kuji_off,SortilegeRes.icon_kuji_off)}SoundManager.instance().playEffect(SortilegeRes.sound_kuji_seleted)},initSetting:function(a){0>this.selMode?this.initAlert("\u304f\u3058\u30bf\u30a4\u30d6\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"):
(this.maxPer=this.joinInPersonslistView.selectNum,this.penaltyPer=this.penaltyPerlistView.selectNum,this.penaltyPer>=this.maxPer?this.initAlert("\u5f53\u305f\u308a\u6570\u304c\u304f\u3058\u6570\u3092\u8d85\u904e\u3057\u307e\u3057\u305f\u3002"):"SetWinners"==a.getName()?this.initWinnersLayerView():this.startGame())},initAlert:function(a){alert(a)},startGame:function(){this.gameStage=this.TAG_GAME;this.removeAllChildren();var a;if(0==this.selMode)this._itemPositionArray=this._itemPositionArrayA,a=SortilegeRes.anim_bomb;
else if(1==this.selMode)this._itemPositionArray=this._itemPositionArrayB,a=SortilegeRes.anim_kuji;else if(2==this.selMode){this.startGameMode3();return}for(var b=[],c=0;c<this.maxPer;c++){for(var d=getRandomInt(0,this._itemPositionArray.length),e=0;e<b.length;e++)for(;b[e]==d;)d=getRandomInt(0,this._itemPositionArray.length),e=0;b.push(d)}for(c=0;c<b.length;c++)d=new cc.Sprite(a),d.setAnchorPoint(cc.p(0.5,0.5)),4<b[c]?d.setPosition(this._itemPositionArray[b[c]][0]+d.getContentSize().width/2,this._itemPositionArray[b[c]][1]+
d.getContentSize().height/2):d.setPosition(this._itemPositionArray[b[c]][0]+d.getContentSize().width/2,cc.winSize.height-this._itemPositionArray[b[c]][1]-d.getContentSize().height/2),this._cuItemNode.push(d),this.addChild(d),e=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height);1==mainView.selMode&&(e=cc.rect(70,120,210,190));
return cc.rectContainsPoint(e,d)?(mainView.setResultAnim(c),!0):!1}}),cc.eventManager.addListener(e,d);a=new ccui.Button(SortilegeRes.result_shaking,SortilegeRes.result_shaking);a.setAnchorPoint(cc.p(0.5,0.5));a.setPosition(cc.winSize.width-15-a.getContentSize().width/2,20+a.getContentSize().width/2);this.addChild(a);a.addClickEventListener(function(a){mainView.setItemPostion()})},startGameMode3:function(){this.gaChaTutorialAnimation();for(var a=(cc.winSize.width-20)/10,b=0;b<this.maxPer;b++){var c=
new cc.Sprite(SortilegeRes.result_gacha_ball_off);c.setAnchorPoint(cc.p(0,0));c.setPosition(10+a*b,20);this.addChild(c)}for(b=0;b<this.maxPer;b++)c=new cc.Sprite(SortilegeRes.result_gacha_ball_on),c.setAnchorPoint(cc.p(0,0)),c.setPosition(10+a*b,20),this._cuItemNode.push(c),this.addChild(c)},setMode3TouchArea:function(a){var b=new cc.Sprite(SortilegeRes.animation_gacha001);b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.winSize.width/2,cc.winSize.height/2);this.addChild(b);var c=new cc.LayerColor(cc.color(255,
255,0,0),200,200);c.setPosition(b.getContentSize().width/4+35,b.getContentSize().height/4);b.addChild(c);b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),g=c.convertToNodeSpace(a.getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(c,g)?!0:!1},onTouchEnded:function(b,c){mainView.isCanRock==mainView.ROCK_MAX&&0<mainView._cuItemNode.length&&(a&&(a.removeFromParent(),a=
null),mainView.isCanRock=-1,mainView.gaChaAnimation());return!0}});cc.eventManager.addListener(b,c)},setResultAnim:function(a){if(-1!=this.isCanRock){var b=this;0<this._cuItemNode.length&&(this.isCanRock=-1,0==this.selMode?mainView.getPenaltyRandom()?this.bombOutAnimation(a.getPositionX()-36,a.getPositionY()-1):this.bombSafeAnimation(a.getPositionX()-36,a.getPositionY()-1):1==this.selMode&&this.kujiAnimation(a.getPositionX(),a.getPositionY()),a.scheduleOnce(function(){for(var c=0;c<b._cuItemNode.length;c++)if(b._cuItemNode[c]==
a){b._cuItemNode.splice(c,1);break}a.removeFromParent()},0.2))}},setPenaltyView:function(){SoundManager.instance().playEffect(SortilegeRes.sound_kuji_popup);var a=!0,b=new cc.LayerColor(cc.color(0,0,0,180),cc.winSize.width,cc.winSize.height);b.setPosition(0,0);b.setTag(this.TAG_ANIM);this.addChild(b,this.ORDER_Z_RESULT);var c=new cc.Sprite(SortilegeRes.result_atari_bg);c.setAnchorPoint(cc.p(0.5,0.5));c.setScale(cc.winSize.width/c.getContentSize().width,cc.winSize.height/c.getContentSize().height);
c.setPosition(b.getContentSize().width/2,b.getContentSize().height/2);b.addChild(c);if(this.textFiledAddArray&&0<this.textFiledAddArray.length){var d=getRandomInt(0,this.textFiledAddArray.length),d=this.textFiledAddArray.splice(d,1),d=new cc.LabelTTF(d);d.setFontName(GAME_FONT.PRO_W6);d.setFontSize(60);d.setFontFillColor(cc.color("#568f95"));d.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);d._setBoundingWidth(420);d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width/2,c.getContentSize().height/
2+180))}else d=new cc.Sprite(SortilegeRes.result_atari_txt),d.setAnchorPoint(cc.p(0.5,0.5)),d.setPosition(c.getContentSize().width/2,c.getContentSize().height/2+180);c.addChild(d);b.scheduleOnce(function(){a&&(mainView.setNextView(b),a=!1)},5);c=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(c,
d)?!0:!1},onTouchEnded:function(c,d){a&&(mainView.setNextView(b),a=!1)}});cc.eventManager.addListener(c,b)},setNextView:function(a){SoundManager.instance().stopAllEffects();2==this.selMode&&this._cuItemNode.pop().removeFromParent();0<this._cuItemNode.length&&0!=this.penaltyPer?a&&a.removeFromParent():(a=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height),a.setPosition(0,0),this.addChild(a,this.ORDER_Z_RESULT),a.runAction(cc.sequence(cc.fadeTo(1,250))),a.scheduleOnce(function(){mainView.removeAllChildren();
mainView.initMainView();var a=new cc.LayerColor(cc.color(0,0,0,255),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);mainView.addChild(a,mainView.ORDER_Z_RESULT);a.runAction(cc.sequence(cc.fadeTo(1,0),new cc.callFunc(function(){a.removeFromParent(!0)},this)))},1.2));this.isCanRock=this.ROCK_MAX},setItemPostion:function(){SoundManager.instance().playEffect(SortilegeRes.sound_kuji_shaking);if(-1!=this.isCanRock){for(var a=mainView._cuItemNode.length,b=[],c=0;c<a;c++){for(var d=getRandomInt(0,
this._itemPositionArray.length),e=0;e<b.length;e++)for(;b[e]==d;)d=getRandomInt(0,this._itemPositionArray.length),e=0;b.push(d)}for(c=0;c<a;c++)4<b[c]?(d=this._itemPositionArray[b[c]][0]+this._cuItemNode[c].getContentSize().width/2,e=this._itemPositionArray[b[c]][1]+this._cuItemNode[c].getContentSize().height/2):(d=this._itemPositionArray[b[c]][0]+this._cuItemNode[c].getContentSize().width/2,e=cc.winSize.height-this._itemPositionArray[b[c]][1]-this._cuItemNode[c].getContentSize().height/2),console.log(d+
"::"+e),this._cuItemNode[c].setPosition(d,e)}},bombSafeAnimation:function(a,b){SoundManager.instance().playEffect(SortilegeRes.sound_kuji_safe);var c=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height);c.setPosition(0,0);c.setTag(this.TAG_ANIM);this.addChild(c,this.ORDER_Z_EFFECT);var d=new cc.Sprite;d.setAnchorPoint(0.5,0.5);d.setPosition(a,b);for(var e=[],f=1;16>=f;f++){var g="0";10<=f&&(g="");e.push(new cc.SpriteFrame("res/Scene/Sortilege/animation/bomb_safe_0"+g+f+".png",new cc.Rect(0,
0,360,360)))}e=new cc.Animation(e,0.1);f=cc.animate(e);d.runAction((new cc.Sequence(f)).repeatForever());c.addChild(d);c.scheduleOnce(function(){c.removeFromParent();mainView.setNextView(c)},0.1*e.getTotalDelayUnits())},bombOutAnimation:function(a,b){var c=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height);c.setPosition(0,0);c.setTag(this.TAG_ANIM);this.addChild(c,this.ORDER_Z_EFFECT);var d=new cc.Sprite;d.setAnchorPoint(0.5,0.5);d.setPosition(a,b);for(var e=[],f=1;15>=f;f++){var g=
"0";10<=f&&(g="");var g="res/Scene/Sortilege/animation/bomb_out_0"+g+f+".png",h=4;4>=f?h=6:11>=f?h=5:16>=f&&(h=6);for(var k=0;k<h;k++)e.push(new cc.SpriteFrame(g,new cc.Rect(0,0,600,600)))}e=new cc.Animation(e,0.02);f=cc.animate(e);d.runAction((new cc.Sequence(f)).repeatForever());c.addChild(d);c.scheduleOnce(function(){c.removeFromParent();mainView.setPenaltyView()},0.02*e.getTotalDelayUnits());c.scheduleOnce(function(){SoundManager.instance().playEffect(SortilegeRes.sound_bomb)},0.36)},kujiAnimation:function(a,
b){SoundManager.instance().playEffect(SortilegeRes.sound_kuji_safe);var c=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height);c.setPosition(0,0);c.setTag(this.TAG_ANIM);this.addChild(c,this.ORDER_Z_EFFECT);var d=new cc.Sprite;d.setAnchorPoint(0.5,0.5);d.setPosition(a,b);for(var e=[],f=1;10>=f;f++){var g="0";10<=f&&(g="");e.push(new cc.SpriteFrame("res/Scene/Sortilege/animation/kuji_0"+g+f+".png",new cc.Rect(0,0,360,360)))}e=new cc.Animation(e,0.1);f=cc.animate(e);d.runAction((new cc.Sequence(f)).repeatForever());
c.addChild(d);c.scheduleOnce(function(){c.removeFromParent();mainView.getPenaltyRandom()?mainView.setPenaltyView():mainView.setNextView()},0.1*e.getTotalDelayUnits())},gaChaTutorialAnimation:function(){SoundManager.instance().playEffect(SortilegeRes.sound_arrow_pointing);var a=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);a.setTag(this.TAG_ANIM);this.addChild(a,this.ORDER_Z_EFFECT);var b=new cc.Sprite;b.setAnchorPoint(0.5,0.5);b.setPosition(cc.winSize.width/
2,cc.winSize.height/2);var c=[];c.push(new cc.SpriteFrame("res/Scene/Sortilege/animation/gacha_001.png",new cc.Rect(0,0,550,900)));for(var d=cc.animate(new cc.Animation(c,0.2)),c=[],e=2;4>=e;e++)c.push(new cc.SpriteFrame("res/Scene/Sortilege/animation/gacha_00"+e+".png",new cc.Rect(0,0,550,900)));c=cc.animate(new cc.Animation(c,0.5));b.runAction((new cc.Sequence(d,c)).repeatForever());a.addChild(b);a.scheduleOnce(function(){a.removeFromParent()},1.7);mainView.setMode3TouchArea(a)},gaChaAnimation:function(){SoundManager.instance().playEffect(SortilegeRes.sound_lever_gacha_ball);
var a=new cc.LayerColor(cc.color(0,0,0,0),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);a.setTag(this.TAG_ANIM);this.addChild(a,this.ORDER_Z_EFFECT);var b=new cc.Sprite;b.setAnchorPoint(0.5,0.5);b.setPosition(cc.winSize.width/2,cc.winSize.height/2);for(var c=[],d=5;19>=d;d++){var e="0";10<=d&&(e="");e="res/Scene/Sortilege/animation/gacha_0"+e+d+".png";24==d&&c.push(new cc.SpriteFrame(e,new cc.Rect(0,0,550,900)));c.push(new cc.SpriteFrame(e,new cc.Rect(0,0,550,900)))}c=new cc.Animation(c,
0.1);d=cc.animate(c);b.runAction((new cc.Sequence(d)).repeatForever());a.addChild(b);a.scheduleOnce(function(){a.removeFromParent();mainView.getPenaltyRandom()?mainView.setPenaltyView():mainView.setNextView()},0.1*c.getTotalDelayUnits())},getPenaltyRandom:function(){return getRandomInt(0,this._cuItemNode.length)<this.penaltyPer?(this.penaltyPer--,!0):!1}}),SortilegeScene=cc.Scene.extend({onEnter:function(){this._super();var a=new SortilegeLayer;this.addChild(a)}});var MajorityVoteLayer=cc.LayerColor.extend({gameStage:0,fromHistory:!1,cuSelected:null,textFiledAddVIew:null,textFiledVoteNum:null,photoTitle:null,photoList:null,cuPhotoWH:null,cMode:null,photoRect:null,photoScale:null,photoPos:null,TAG_MAIN:0,TAG_SETTING:200,TAG_READY:201,TAG_GAME:202,TAG_MASK:205,TAG_RESULT:206,ORDER_Z_MAIN:10,ORDER_Z_SETTING:20,ORDER_Z_TUTORIAL:50,ORDER_Z_EFFECT:60,IMAGE_WH:340,ctor:function(){this._super(cc.color(111,205,192,255));mainView=this;this.initMain();ADD_CHANGESTATE_CALLBACK(this.stateBack,
this);return!0},stateBack:function(a){a.gameStage==a.TAG_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.gameStage){case a.TAG_SETTING:case a.TAG_GAME:mainView.removeAllChildren();mainView.initMain();break;case a.TAG_READY:0==mainView.cMode?mainView.startTextMode():mainView.startPhotoMode();break;case a.TAG_RESULT:mainView.fromHistory?(mainView.fromHistory=!1,mainView.removeAllChildren(),mainView.initMain()):(mainView.textFiledVoteNum[mainView.cuSelected]--,
0==mainView.cMode?mainView.textModeVote():mainView.photoModeVote())}},initMain:function(){this.gameStage=this.TAG_MAIN;this.clearData();var a=new cc.Sprite(MajorityVoteRes.main_vote_bg);a.setAnchorPoint(cc.p(0,0));this.addChild(a);a=new Toolbar(GAME_TYPE.MajorityVote);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,this.ORDER_Z_MAIN);this.mainAnimation();a=new HistorysListView(cc.winSize.height-550,GAME_TYPE.MajorityVote,MajorityVoteRes.common_photo_list_btn,MajorityVoteRes.common_text_list_btn,
this.gotoReplayView,this.gotoResultView,1);this.addChild(a);this.addChild(new MainModeBtn(this.startTextMode,this.startPhotoMode,MajorityVoteRes.common_start_btn,"\u753b\u50cf","\u9078\u629e\u80a2\u3092\u5199\u771f\u3067\u767b\u9332",MajorityVoteRes.common_photo_play_btn,"\u30c6\u30ad\u30b9\u30c8","\u9078\u629e\u80a2\u3092\u30c6\u30ad\u30b9\u30c8\u3067\u767b\u9332",MajorityVoteRes.common_text_play_btn))},mainAnimation:function(){var a=new cc.Sprite;a.setAnchorPoint(0,1);a.setPosition(0,cc.winSize.height-
100);for(var b=[],c=1;13>c;c++)10>c?b.push(new cc.SpriteFrame("res/Scene/MajorityVote/main/vote_00"+c+".png",new cc.Rect(0,0,750,450))):b.push(new cc.SpriteFrame("res/Scene/MajorityVote/main/vote_0"+c+".png",new cc.Rect(0,0,750,450)));c=cc.animate(new cc.Animation(b,0.15));b=[];b.push(new cc.SpriteFrame(MajorityVoteRes.main_vote013,new cc.Rect(0,0,750,450)));b=cc.animate(new cc.Animation(b,0.5));a.runAction((new cc.Sequence(c,b)).repeatForever());this.addChild(a)},touchEvent:function(a,b){var c=mainView;
switch(b){case ccui.Widget.TOUCH_ENDED:switch(cc.log("touchEvent "+a.getName()),a.getName()){case "Start":0==mainView.cMode?2<=mainView.textFiledAddVIew.listView.getItems().length&&(""==this.textFiledAddVIew.getTitleString()?window.alert("\u8cea\u554f\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"):mainView.textModeVote()):2<=mainView.getphtoMaxNum()&&(mainView.photoTitle&&""==mainView.photoTitle.getString()?window.alert("\u8cea\u554f\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"):mainView.photoModeVote());
break;case "voteContinue":if(-1<c.cuSelected){c.textFiledVoteNum[c.cuSelected]++;var d=c.getChildByTag(c.TAG_READY),e=d.getChildByName("voteContinue");e&&(e.removeFromParent(),c.buttonBackColorText("voteContinue","\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#c8c8c8"),d));0==c.cMode?(d=d.getChildByName("listView"),e=c.textFiledAddVIew.getListChildern(c.cuSelected),d.removeItem(c.cuSelected),d.insertCustomItem(c.addListLayout(!1,e),c.cuSelected)):
c.photoList[c.cuSelected].getChildByTag(3).setVisible(!1);c.cuSelected=-1}break;case "seeResult":-1<c.cuSelected&&c.textFiledVoteNum[c.cuSelected]++;0==c.cMode?c.textModeVoteResult():c.photoModeVoteResult();break;case "reVote":0==mainView.cMode?mainView.textModeVote():mainView.photoModeVote();break;case "home":mainView.savPopup();break;case "dataImport":0==mainView.cMode?(mainView.fromHistory=!1,mainView.startTextMode()):(mainView.fromHistory=!1,mainView.startPhotoMode());break;case "cutImgCancel":a.getParent().removeFromParent();
this.photoTitle.setVisible(!0);for(c=0;c<this.photoList.length;c++)this.photoList[c].setVisible(!0);this.getChildByName("Start").setVisible(!0)}}},startTextMode:function(a){mainView.cMode=0;mainView.removeAllChildren();mainView.gameStage=mainView.TAG_SETTING;a=new cc.LayerColor(cc.color("#ffffff"),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);mainView.addChild(a);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(cc.p(0,0));a.setPosition(0,164);a.setScaleX(cc.winSize.width);mainView.addChild(a);
a=new cc.LabelTTF("\u3000\u3000\u500b\u306e\u9078\u629e\u80a2\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color("#999999"));a.setAnchorPoint(cc.p(0.5,0.5));a.setPosition(cc.p(cc.winSize.width>>1,127));mainView.addChild(a);var b=new cc.LabelTTF;b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color("#6fcdc1"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width/2-a.getContentSize().width/
2+34,127));b.setString("0");mainView.addChild(b);if(mainView.textFiledAddVIew){var c=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1"));a=mainView.textFiledAddVIew.listView.getItems().length;9<a?b.setString(a):b.setString("0"+a)}else mainView.textFiledAddVIew=new TextFiledAddList(10,172,2),c=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8"));mainView.addChild(mainView.textFiledAddVIew);
b.schedule(function(){if(mainView.textFiledAddVIew.isAddChanged){var a=mainView.textFiledAddVIew.listView.getItems().length;9<a?b.setString(a):b.setString("0"+a);2<=a?(c.removeFromParent(),c=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1"))):(c.removeFromParent(),c=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8")));mainView.textFiledVoteNum=[];for(var e=
0;e<a;e++)mainView.textFiledVoteNum.push(0);mainView.textFiledAddVIew.isAddChanged=!1}})},textModeVote:function(){this.cuSelected=-1;this.removeAllChildren();this.gameStage=this.TAG_READY;var a=new cc.LayerColor(cc.color(255,255,255,255),cc.winSize.width,cc.winSize.height);a.setTag(this.TAG_READY);this.addChild(a);var b=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,100);b.setPosition(0,a.getContentSize().height-b.getContentSize().height);a.addChild(b);var c=new cc.LabelTTF("\u591a\u6570\u6c7a\u6295\u7968",
GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color("#fff3bf"));c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(b.getContentSize().width>>1,b.getContentSize().height>>1));b.addChild(c);var d=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,122);d.setPosition(0,a.getContentSize().height-b.getContentSize().height-d.getContentSize().height);a.addChild(d);c=new cc.LabelTTF(this.textFiledAddVIew.getTitleString(),GAME_FONT.PRO_W6);c.setFontSize(36);c.setFontFillColor(cc.color("#6fcdc1"));
c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(d.getContentSize().width>>1,d.getContentSize().height>>1));d.addChild(c);c=new cc.Sprite(GlobalRes.line_8);c.setAnchorPoint(cc.p(0,0));c.setPosition(0,a.getContentSize().height-b.getContentSize().height-d.getContentSize().height-8);c.setScaleX(a.getContentSize().width);a.addChild(c);c=new ccui.ListView;c.setDirection(ccui.ScrollView.DIR_VERTICAL);c.setAnchorPoint(cc.p(0,1));c.setPosition(0,a.getContentSize().height-b.getContentSize().height-d.getContentSize().height-
8);c.setTouchEnabled(!0);c.setBounceEnabled(!1);c.setBackGroundColor(cc.color.WHITE);c.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);c.setName("listView");c.setContentSize(cc.size(a.getContentSize().width,a.getContentSize().height-b.getContentSize().height-d.getContentSize().height-128));c.addEventListener(this.selectedItemEvent,this);a.addChild(c);for(var b=this.textFiledAddVIew.listView.getItems().length,e=0;e<b;e++)d=this.textFiledAddVIew.getListChildern(e),c.pushBackDefaultItem(),c.pushBackCustomItem(this.addListLayout(!1,
d));b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,128);b.setScaleX(a.getContentSize().width);a.addChild(b);this.buttonBackColorText("voteContinue","\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#c8c8c8"),a);this.buttonBackColorText("seeResult","\u6295\u7968\u7d50\u679c\u3092\u898b\u308b",cc.winSize.width/2+155,20,cc.size(300,80),cc.color("#6fcdc1"),a)},selectedItemEvent:function(a,b){switch(b){case ccui.ListView.ON_SELECTED_ITEM_END:var c=
mainView;if(a.getCurSelectedIndex()==c.cuSelected)break;if(-1==c.cuSelected){var d=c.getChildByTag(c.TAG_READY),e=d.getChildByName("voteContinue");e&&(e.removeFromParent(),c.buttonBackColorText("voteContinue","\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#6fcdc1"),d))}d=c.cuSelected;c.cuSelected=a.getCurSelectedIndex();-1<d&&(e=c.textFiledAddVIew.getListChildern(d),a.removeItem(d),a.insertCustomItem(c.addListLayout(!1,e),d));d=c.textFiledAddVIew.getListChildern(c.cuSelected);
a.removeItem(c.cuSelected);a.insertCustomItem(c.addListLayout(!0,d),c.cuSelected)}},addListLayout:function(a,b){var c="#b0e2cf",d="#ffffff",e=GAME_FONT.PRO_W6,f=30;a&&(c="#6fcdc1",d="#999999",e=GAME_FONT.PRO_W3,f=36);var g=new ccui.Layout;g.setContentSize(cc.winSize.width,90);g.setTouchEnabled(!0);c=new cc.LayerColor(cc.color(c),cc.winSize.width-80,80);c.setPositionY(5);c.setPositionX(40);g.addChild(c);e=new cc.LabelTTF(b,e);e.setFontSize(f);e.setFontFillColor(cc.color(d));e.setAnchorPoint(cc.p(0.5,
0.5));e.setPosition(cc.p(c.getContentSize().width>>1,c.getContentSize().height>>1));c.addChild(e);return g},textModeVoteResult:function(a){this.removeAllChildren();this.gameStage=this.TAG_RESULT;var b="\u591a\u6570\u6c7a\u306e\u7d50\u679c";a&&(b=a);var c=new cc.LayerColor(cc.color(255,255,255,255),cc.winSize.width,cc.winSize.height);this.addChild(c);var d=this.voteMaxIndex(),e=new cc.LayerColor(cc.color("#6fcdc1"),c.getContentSize().width,100);e.setPosition(0,c.getContentSize().height-e.getContentSize().height);
c.addChild(e);b=new cc.LabelTTF(b,GAME_FONT.PRO_W3);b.setFontSize(36);b.setFontFillColor(cc.color("#fff3bf"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(e.getContentSize().width>>1,e.getContentSize().height>>1));e.addChild(b);var f=new cc.LayerColor(cc.color("#ffffff"),c.getContentSize().width,208);f.setPosition(0,c.getContentSize().height-e.getContentSize().height-f.getContentSize().height);c.addChild(f);b=new cc.LabelTTF(this.textFiledAddVIew.getTitleString(),GAME_FONT.PRO_W3);b.setFontSize(32);
b.setFontFillColor(cc.color("#6fcdc1"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(f.getContentSize().width>>1,(f.getContentSize().height>>1)+26));f.addChild(b);b=new cc.LabelTTF(this.textFiledAddVIew.getListChildern(d),GAME_FONT.PRO_W6);b.setFontSize(36);b.setFontFillColor(cc.color("#568f95"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(f.getContentSize().width>>1,(f.getContentSize().height>>1)-26));f.addChild(b);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,0));b.setPosition(0,
c.getContentSize().height-e.getContentSize().height-f.getContentSize().height);b.setScaleX(c.getContentSize().width);c.addChild(b);b=new ccui.ListView;b.setDirection(ccui.ScrollView.DIR_VERTICAL);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,c.getContentSize().height-e.getContentSize().height-f.getContentSize().height);b.setTouchEnabled(!0);b.setBounceEnabled(!1);b.setBackGroundColor(cc.color.WHITE);b.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);b.setName("listView");b.setContentSize(cc.size(c.getContentSize().width,
c.getContentSize().height-e.getContentSize().height-f.getContentSize().height-160));b.addEventListener(this.selectedItemEvent,this);c.addChild(b);for(var e=this.textFiledAddVIew.listView.getItems().length,g,h=0;h<e;h++)f=this.textFiledAddVIew.getListChildern(h),g=this.textFiledVoteNum[h].toString(),b.pushBackDefaultItem(),d==h?b.pushBackCustomItem(this.addListLayoutResult(!0,f,g)):b.pushBackCustomItem(this.addListLayoutResult(!1,f,g));d=new cc.Sprite(GlobalRes.line_8);d.setAnchorPoint(cc.p(0,1));
d.setPosition(0,160);d.setScaleX(c.getContentSize().width);c.addChild(d);if(a)this.buttonBackColorText("dataImport","\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f",cc.winSize.width/2,40,cc.size(300,80),cc.color("#6fcdc1"),c);else{a=new cc.LabelTTF;a.setFontName(GAME_FONT.PRO_W6);a.setString("\u4eba\u304c\u6295\u7968\u306b\u53c2\u52a0\u3057\u307e\u3057\u305f");a.setFontSize(26);a.setFontFillColor(cc.color("#999999"));a.setAnchorPoint(cc.p(0.5,0));a.setPosition(cc.p(cc.winSize.width/2,105));c.addChild(a);
a=0;d=mainView.textFiledVoteNum;for(e=0;e<d.length;e++)a+=d[e];d=new cc.LabelTTF;d.setFontName(GAME_FONT.PRO_W3);9<a?d.setString(a):d.setString("0"+a);d.setFontSize(26);d.setFontFillColor(cc.color("#6fcdc1"));d.setAnchorPoint(cc.p(0.5,0));d.setPosition(cc.p(cc.winSize.width/2-156-7,105));c.addChild(d);this.buttonBackColorText("reVote","\u518d\u6295\u7968",cc.winSize.width/2-105,5,cc.size(200,80),cc.color("#6fcdc1"),c);this.buttonBackColorText("home","\u30db\u30fc\u30e0",cc.winSize.width/2+105,5,cc.size(200,
80),cc.color("#6fcdc1"),c)}},addListLayoutResult:function(a,b,c){var d="#bee8e3",e=GAME_FONT.PRO_W3;a&&(d="#6fcdc1");var f=new ccui.Layout;f.setContentSize(cc.winSize.width,80);var g=new cc.LayerColor(cc.color(d),cc.winSize.width-60,50);g.setPositionX(30);f.addChild(g);a||(a=this.textFiledVoteNum[this.voteMaxIndex()],d=new cc.LayerColor(cc.color("#6fcdc1"),g.getContentSize().width*c/a,50),g.addChild(d));b=new cc.LabelTTF(b,e);b.setFontSize(30);b.setFontFillColor(cc.color("#ffffff"));b.setAnchorPoint(cc.p(0,
0.5));b.setPosition(cc.p(15,g.getContentSize().height>>1));g.addChild(b);c=new cc.LabelTTF(c,e);c.setFontSize(30);c.setFontFillColor(cc.color("#ffffff"));c.setAnchorPoint(cc.p(1,0.5));c.setPosition(cc.p(g.getContentSize().width-15,g.getContentSize().height>>1));g.addChild(c);return f},savPopup:function(){var a=new Mask;this.addChild(a);a.open();a=new RoundRect(570,300);a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);this.addChild(a);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");
b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setAnchorPoint(0,1);b.setPosition(35,a.getContentSize().height-40);a.addChild(b);var c=new cc.Sprite(GlobalRes.color_eeeeee);c.setAnchorPoint(0,0);c.setPosition(35,b.getPosition().y-b.getContentSize().height-30-58);c.setScale(498,1);a.addChild(c);var c=this.voteMaxIndex(),d=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),e="",e=0==mainView.cMode?this.textFiledAddVIew.getTitleString()+" "+this.textFiledAddVIew.getListChildern(c):
this.photoTitle.getString();d.setFontSize(34);d.setFontColor(new cc.Color(111,205,193,255));d.setString(e);d.setFontName(GAME_FONT.PRO_W3);d.setAnchorPoint(0,1);d.setPosition(36,b.getPosition().y-b.getContentSize().height-30-1);a.addChild(d);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){""===d.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):
(mainView.setHistory(mainView.cMode,d.getString()),mainView.removeAllChildren(),mainView.initMain())});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){mainView.removeAllChildren();mainView.initMain()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,
50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,50);a.addChild(b)},voteMaxIndex:function(){var a=0,b=this.textFiledVoteNum,c=0;if(1>=b.length)return a;for(var d=0;d<b.length;d++)b[d]>c&&(a=d,c=b[d]);return a},isSameMaxIndex:function(){for(var a=this.voteMaxIndex(),b=0,c=this.textFiledVoteNum,d=0;d<c.length;d++)c[d]==c[a]&&b++;return 1<
b?!0:!1},startPhotoMode:function(a){mainView.cMode=1;mainView.removeAllChildren();mainView.gameStage=mainView.TAG_SETTING;a=new cc.LayerColor(cc.color("#ffffff"),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);mainView.addChild(a);var b=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,100);b.setPosition(0,a.getContentSize().height-b.getContentSize().height);a.addChild(b);var c=new cc.LabelTTF("\u591a\u6570\u6c7a\u9805\u76ee\u767b\u9332",GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color("#fff3bf"));
c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(b.getContentSize().width>>1,b.getContentSize().height>>1));b.addChild(c);c=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,122);c.setPosition(0,a.getContentSize().height-b.getContentSize().height-c.getContentSize().height);a.addChild(c);mainView.photoTitle?(mainView.photoTitle.setString(mainView.photoTitle.getString()),mainView.photoTitle.removeFromParent()):mainView.photoTitle=mainView.setPhotoTitleView(122);c.addChild(mainView.photoTitle);
var d=new cc.Sprite(GlobalRes.line_8);d.setAnchorPoint(cc.p(0,0));d.setPosition(0,a.getContentSize().height-b.getContentSize().height-c.getContentSize().height);d.setScaleX(a.getContentSize().width);a.addChild(d);d=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,124);d.setPosition(0,a.getContentSize().height-b.getContentSize().height-c.getContentSize().height-d.getContentSize().height);a.addChild(d);b=new cc.LabelTTF("\u9078\u629e\u80a2\u306e\u6570\uff1a\uff12\uff5e4\u679a\u767b\u9332\u53ef\u80fd",
GAME_FONT.PRO_W3);b.setFontSize(24);b.setFontFillColor(cc.color("#c8c8c8"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(d.getContentSize().width>>1,d.getContentSize().height>>1));d.addChild(b);if(0<mainView.photoList.length)for(b=0;b<mainView.photoList.length;b++)mainView.photoList[b].removeFromParent(),a.addChild(mainView.photoList[b]),mainView.photoList[b].getChildByTag(4).isVisible()?mainView.photoList[b].getChildByTag(1).setVisible(!0):mainView.photoList[b].getChildByTag(5).setVisible(!0),
mainView.photoList[b].getChildByTag(2).setVisible(!1),mainView.photoList[b].getChildByTag(3).setVisible(!1);else{b=a.getContentSize().height-100-122-124-172;mainView.addphotoListView(b,172);for(b=0;b<mainView.photoList.length;b++)a.addChild(mainView.photoList[b])}d=new cc.Sprite(GlobalRes.line_8);d.setAnchorPoint(cc.p(0,1));d.setPosition(0,172);d.setScaleX(cc.winSize.width);mainView.addChild(d);a=new cc.LabelTTF("\u3000\u3000\u500b\u306e\u9078\u629e\u80a2\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");
a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color("#999999"));a.setAnchorPoint(cc.p(0.5,0.5));a.setPosition(cc.p(cc.winSize.width>>1,127));mainView.addChild(a);var e=new cc.LabelTTF;e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(26);e.setFontFillColor(cc.color("#6fcdc1"));e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(cc.winSize.width/2-a.getContentSize().width/2+34,127));e.setString("0");mainView.addChild(e);var f=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",
cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8")),g=0;e.schedule(function(){var a=mainView.getphtoMaxNum();g!=a&&(e.setString("0"+a),2<=a?(f.removeFromParent(),f=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1"))):(f.removeFromParent(),f=mainView.buttonBackColorText("Start","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8"))),g=a)});mainView.textFiledVoteNum=[];for(b=0;4>b;b++)mainView.textFiledVoteNum.push(0)},
photoModeVote:function(){this.cuSelected=-1;this.removeAllChildren();this.gameStage=this.TAG_READY;var a=new cc.LayerColor(cc.color(255,255,255,255),cc.winSize.width,cc.winSize.height);a.setTag(this.TAG_READY);this.addChild(a);var b=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,100);b.setPosition(0,a.getContentSize().height-b.getContentSize().height);a.addChild(b);var c=new cc.LabelTTF("\u591a\u6570\u6c7a\u6295\u7968",GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color("#fff3bf"));
c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(b.getContentSize().width>>1,b.getContentSize().height>>1));b.addChild(c);c=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,200);c.setPosition(0,a.getContentSize().height-b.getContentSize().height-c.getContentSize().height);a.addChild(c);var d=new cc.LabelTTF(mainView.photoTitle.getString(),GAME_FONT.PRO_W6);d.setFontSize(32);d.setFontFillColor(cc.color("#6fcdc1"));d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width>>
1,c.getContentSize().height>>1));c.addChild(d);d=new cc.Sprite(GlobalRes.line_8);d.setAnchorPoint(cc.p(0,0));d.setPosition(0,a.getContentSize().height-b.getContentSize().height-c.getContentSize().height-8);d.setScaleX(a.getContentSize().width);a.addChild(d);b=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,a.getContentSize().height-100-200-128);b.setAnchorPoint(cc.p(0.5,1));b.setPosition(0,a.getContentSize().height-100-200-128-b.getContentSize().height);a.addChild(b);for(c=0;c<mainView.photoList.length;c++)mainView.photoList[c].removeFromParent(),
b.addChild(mainView.photoList[c]),mainView.photoList[c].getChildByTag(1).setVisible(!1),mainView.photoList[c].getChildByTag(4).isVisible()&&mainView.photoList[c].getChildByTag(2).setVisible(!0),mainView.photoList[c].getChildByTag(3).setVisible(!1),mainView.photoList[c].getChildByTag(5).setVisible(!1);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,128);b.setScaleX(a.getContentSize().width);a.addChild(b);var e=this.buttonBackColorText("voteContinue","\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",
cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#c8c8c8"),a);this.buttonBackColorText("seeResult","\u6295\u7968\u7d50\u679c\u3092\u898b\u308b",cc.winSize.width/2+155,20,cc.size(300,80),cc.color("#6fcdc1"),a);var f=-1;a.schedule(function(){var b=mainView;b.cuSelected!=f&&(-1==b.cuSelected?(e.removeFromParent(),e=b.buttonBackColorText("voteContinue","\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#c8c8c8"),a)):(e.removeFromParent(),e=b.buttonBackColorText("voteContinue",
"\u6b21\u306e\u4eba\u306e\u6295\u7968\u3078",cc.winSize.width/2-155,20,cc.size(300,80),cc.color("#6fcdc1"),a)),f=b.cuSelected)})},photoModeVoteResult:function(a){this.removeAllChildren();this.gameStage=this.TAG_RESULT;var b="\u591a\u6570\u6c7a\u306e\u7d50\u679c";a&&(b=a);var c=new cc.LayerColor(cc.color(255,255,255,255),cc.winSize.width,cc.winSize.height);c.setTag(this.TAG_READY);this.addChild(c);var d=new cc.LayerColor(cc.color("#6fcdc1"),c.getContentSize().width,100);d.setPosition(0,c.getContentSize().height-
d.getContentSize().height);c.addChild(d);b=new cc.LabelTTF(b,GAME_FONT.PRO_W3);b.setFontSize(36);b.setFontFillColor(cc.color("#fff3bf"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(d.getContentSize().width>>1,d.getContentSize().height>>1));d.addChild(b);var e=new cc.LayerColor(cc.color("#ffffff"),c.getContentSize().width,100);e.setPosition(0,c.getContentSize().height-d.getContentSize().height-e.getContentSize().height);c.addChild(e);b=new cc.LabelTTF(mainView.photoTitle.getString(),GAME_FONT.PRO_W3);
b.setFontSize(32);b.setFontFillColor(cc.color("#6fcdc1"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(e.getContentSize().width>>1,e.getContentSize().height>>1));e.addChild(b);var f=new cc.LayerColor(cc.color("#ffffff"),c.getContentSize().width,370);f.setPosition(0,c.getContentSize().height-d.getContentSize().height-e.getContentSize().height-f.getContentSize().height);c.addChild(f);var b=this.voteMaxIndex(),g=this.photoList[b].getChildByTag(4).getTexture(),b=new cc.Sprite;b.initWithTexture(g);
b.setAnchorPoint(cc.p(0.5,1));b.setPosition(c.getContentSize().width/2,f.getContentSize().height);var h=340/g.getContentSize().height,k=h=g.getContentSize().width>g.getContentSize().height?k:h;b.setScale(k,h);f.addChild(b);this.isSameMaxIndex()&&f.setVisible(!1);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,0));b.setPosition(0,c.getContentSize().height-d.getContentSize().height-e.getContentSize().height-f.getContentSize().height-8);b.setScaleX(c.getContentSize().width);c.addChild(b);b=
new cc.LayerColor(cc.color("#ffffff"),c.getContentSize().width,c.getContentSize().height-100-100-370-160);b.setPosition(0,c.getContentSize().height-d.getContentSize().height-e.getContentSize().height-f.getContentSize().height-b.getContentSize().height);c.addChild(b);k=b.getContentSize().height-20;e=d=250;k<2*d&&(d=e=k/2);for(var e=[-d/2-10,e/2+20,d/2+10,e/2+20,-d/2-10,-e/2+10,d/2+10,-e/2+10],m,f=0;f<this.photoList.length;f++)if(k=this.photoList[f].getChildByTag(4),k.isVisible()){g=k.getTexture();
m=new cc.Sprite;m.initWithTexture(g);m.setAnchorPoint(cc.p(0.5,0.5));m.setPosition(b.getContentSize().width/2+e[2*f],b.getContentSize().height/2+e[2*f+1]);var k=d/g.getContentSize().width,h=d/g.getContentSize().height,k=g.getContentSize().width>g.getContentSize().height?k:h;m.setScale(k,k);b.addChild(m);k=new cc.LayerColor(cc.color("#6fcdc1"),100,50);k.setPosition(m.getPositionX()-d/2,m.getPositionY()+d/2-50);b.addChild(k);g=new cc.Sprite(MajorityVoteRes.common_user_icon);g.setAnchorPoint(cc.p(0,
0.5));g.setPosition(10,k.getContentSize().height/2);k.addChild(g);h=new cc.LabelTTF;h.setFontName(GAME_FONT.PRO_W3);m=this.textFiledVoteNum[f];9<m?h.setString(m.toString()):h.setString("0"+m.toString());h.setFontSize(24);h.setFontFillColor(cc.color("#fff3bf"));h.setAnchorPoint(cc.p(0.5,0.5));h.setPosition(cc.p((k.getContentSize().width+10+g.getContentSize().width)/2,k.getContentSize().height/2-3));k.addChild(h)}b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,160);b.setScaleX(c.getContentSize().width);
c.addChild(b);if(a)this.buttonBackColorText("dataImport","\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f",cc.winSize.width/2,40,cc.size(300,80),cc.color("#6fcdc1"),c);else{a=new cc.LabelTTF;a.setFontName(GAME_FONT.PRO_W6);a.setString("\u4eba\u304c\u6295\u7968\u306b\u53c2\u52a0\u3057\u307e\u3057\u305f");a.setFontSize(26);a.setFontFillColor(cc.color("#999999"));a.setAnchorPoint(cc.p(0.5,0));a.setPosition(cc.p(cc.winSize.width/2,105));c.addChild(a);a=0;b=mainView.textFiledVoteNum;for(k=0;k<b.length;k++)a+=
b[k];b=new cc.LabelTTF;b.setFontName(GAME_FONT.PRO_W3);9<a?b.setString(a):b.setString("0"+a);b.setFontSize(26);b.setFontFillColor(cc.color("#6fcdc1"));b.setAnchorPoint(cc.p(0.5,0));b.setPosition(cc.p(cc.winSize.width/2-156-7,105));c.addChild(b);this.buttonBackColorText("reVote","\u518d\u6295\u7968",cc.winSize.width/2-105,5,cc.size(200,80),cc.color("#6fcdc1"),c);this.buttonBackColorText("home","\u30db\u30fc\u30e0",cc.winSize.width/2+105,5,cc.size(200,80),cc.color("#6fcdc1"),c)}},gotoReplayView:function(a,
b){mainView.getResultData(a,b);0==mainView.cMode&&mainView.startTextMode()},gotoResultView:function(a,b,c){mainView.fromHistory=!0;mainView.getResultData(a,c,b);0==mainView.cMode&&mainView.textModeVoteResult(b)},buttonBackColorText:function(a,b,c,d,e,f,g){var h=new ccui.Button;h.setContentSize(e);h.setAnchorPoint(0.5,0);h.setPosition(c,d);h.setScale9Enabled(!0);h.setName(a);h.setTouchEnabled(!0);h.addTouchEventListener(this.touchEvent,this);g?g.addChild(h):this.addChild(h);a=new cc.LayerColor(f,h.getContentSize().width,
h.getContentSize().height);a.setPosition(0,0);h.addChild(a);b=new cc.LabelTTF(b);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color.WHITE);b.setAnchorPoint(0.5,0.5);b.setPosition(h.getContentSize().width/2,h.getContentSize().height/2);h.addChild(b);return h},setHistory:function(a,b,c,d,e){d=0==mainView.cMode?this.textFiledAddVIew.listView.getItems().length:this.photoList.length;c=new ArrayList;for(e=0;1>e;e++){var f={};f.name=0==mainView.cMode?this.textFiledAddVIew.getTitleString():
this.photoTitle.getString();f.icon=this.voteMaxIndex().toString();f.members=[];for(var g=0;g<d;g++){var h={};h.name=0==mainView.cMode?this.textFiledAddVIew.getListChildern(g):DataManager.instance().createPhotoHistory(GAME_TYPE.MajorityVote,this.photoList[g].getChildByTag(4).getName(),0==g);h.number=this.textFiledVoteNum[g];f.members.push(h)}c.add(f)}d={};d.mode=a;d.groups=c.arr;d.title=b;DataManager.instance().createHistory(GAME_TYPE.MajorityVote,d)},clearData:function(){mainView.cuPhotoWH=null;this.textFiledAddVIew&&
(this.textFiledAddVIew.listView.removeAllItems(),this.textFiledAddVIew.removeFromParent(),this.textFiledAddVIew=null);this.textFiledVoteNum=[];this.photoList=[];this.photoTitle&&(this.photoTitle.removeFromParent(),this.photoTitle=null)},getResultData:function(a,b,c){this.cMode=b;0==this.cMode?this.textFiledAddVIew=new TextFiledAddList(30,172,2):(this.photoTitle=this.setPhotoTitleView(122),this.addphotoListView(cc.winSize.height-100-122-124-172,172));if(a)for(b=0;b<a.length;b++){0==this.cMode?this.textFiledAddVIew.setTitleString(a[b].name):
this.photoTitle.setString(a[b].name);for(var d=0;d<a[b].members.length;d++){if(0==this.cMode)this.textFiledAddVIew.setListChildern(a[b].members[d].name);else{var e=DataManager.instance().getPhotoHistory(a[b].members[d].name,d);this.setPhotoTexture(e,null,d,c)}this.textFiledVoteNum.push(a[b].members[d].number)}}},loadClientDataChanged:function(a,b,c,d){mainView.scheduleOnce(function(){for(;0<b.length;){mainView.imageCutView(b[0],c[0],a.getName(),d);break}},0.01)},imageCutView:function(a,b,c,d){this.photoTitle.setVisible(!1);
for(d=0;d<this.photoList.length;d++)this.photoList[d].setVisible(!1);this.getChildByName("Start").setVisible(!1);var e=this,f=new ccui.Layout;f.setContentSize(cc.winSize.width,cc.winSize.height);f.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);f.setBackGroundColor(cc.color(115,115,115,255));this.addChild(f);var g=new ccui.Layout;g.setName("scrollViewRect");g.setContentSize(f.getContentSize().width,f.getContentSize().height-80);g.setAnchorPoint(0,0);g.setPosition(0,0);f.addChild(g);d=new cc.Texture2D;
d.initWithElement(a);d.handleLoadedTexture();var h=new cc.Sprite;h.setName("photo");h.initWithTexture(d);h.setAnchorPoint(cc.p(0.5,0.5));h.setPosition(g.width/2,g.height/2);var k=g.width/d.getContentSize().width,m=g.height/d.getContentSize().height,l=d.getContentSize().height/d.getContentSize().width,p=g.height/g.width,k=m=d.getContentSize().width<d.getContentSize().height&&l>p?m:k;h.setScale(k,m);g.addChild(h);d=null;var n=0,r=k,q=null,s=null,t=h.getPosition(),w=0,u=0;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,
onTouchesBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a[0].getLocation()),c=c.getContentSize(),c=cc.rect(0,0,c.width,c.height);cc.rectContainsPoint(c,d)&&0==n&&(2<=a.length?(d=a[0].getLocation(),c=a[1].getLocation(),n=cc.pDistance(d,c)):null==q?q=a[0].getLocation():(d=a[0].getLocation(),c=q,n=cc.pDistance(d,c)));return!1},onTouchesMoved:function(a,b){b.getCurrentTarget();if(0!=n&&2<=a.length){var c=a[0].getLocation(),d=a[1].getLocation(),c=cc.pDistance(c,d);c>n?r<4*k&&(r+=
0.1,h.setScale(r,r)):r>k&&(r-=0.1,r<=k?(r=k,h.setPosition(t.x,t.y)):(h.setScale(r,r),h.getPositionX()>t.x?(d=h.getPositionX()-t.x,h.setPositionX(h.getPositionX()-0.1*d/(r-k))):h.getPositionX()<t.x&&(d=t.x-h.getPositionX(),h.setPositionX(h.getPositionX()+0.1*d/(r-k))),h.getPositionY()>t.y?(d=h.getPositionY()-t.y,h.setPositionY(h.getPositionY()-0.1*d/(r-k))):h.getPositionY()<t.y&&(d=t.y-h.getPositionY(),h.setPositionY(h.getPositionY()+0.1*d/(r-k)))));n=c;e.photoScale=r}},onTouchesEnded:function(a,b){n=
0;q=null}},h);cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height);return cc.rectContainsPoint(e,d)&&0==n?(w=c.getPositionX(),u=c.getPositionY(),d=c.getContentSize().width*c.getScaleX(),c=c.getContentSize().height*c.getScaleY(),console.log(w+"::"+u+":CW:"+d+":CH:"+c+":SW:"+g.width+":SH:"+g.height),!0):!1},onTouchMoved:function(a,b){if(0!=
n||0==w&&0==u)return!1;var c=b.getCurrentTarget(),d=a.getLocation();if(null==s||d==s)s=a.getLocation();else{if(r>k){var f=c.getContentSize().width*c.getScaleX(),h=c.getContentSize().height*c.getScaleY();f>g.width&&(f=f-g.width>>1,c.setPositionX(w+(d.x-s.x)),c.getPositionX()-t.x>f&&c.setPositionX(t.x+f),t.x-c.getPositionX()>f&&c.setPositionX(t.x-f));h>g.height&&(h=h-g.height>>1,c.setPositionY(u+(d.y-s.y)),c.getPositionY()-t.y>h&&c.setPositionY(t.y+h),t.y-c.getPositionY()>h&&c.setPositionY(t.y-h))}d=
t.x-c.getPosition().x;c=c.getPosition().y-t.y;e.photoPos=cc.p(d,c)}},onTouchEnded:function(a,b){s=null;u=w=0}},h);e.photoPos=cc.p(0,0);e.photoScale=k;e.photoRect=cc.rect(cc.winSize.width/2-150,cc.winSize.height/2-150,300,300);this.drawRectCutPhoto(e.photoRect,g);d=this.buttonBackColorText("cutImgOK","\u4fdd\u5b58",cc.winSize.width/2+cc.winSize.width/4,cc.winSize.height-80,cc.size(cc.winSize.width/2,80),cc.color("#6fcdc1"),f);this.buttonBackColorText("cutImgCancel","\u30ad\u30e3\u30f3\u30bb\u30eb",
cc.winSize.width/4,cc.winSize.height-80,cc.size(cc.winSize.width/2,80),cc.color("#6fcdc1"),f);d.addClickEventListener(function(){var d=h.getContentSize().width*h.getScaleX(),g=h.getContentSize().height*h.getScaleY(),k=h.getPositionX(),l=h.getPositionY(),d=cc.rect(k-d/2,l-g/2,d,g),d=cc.rectIntersection(e.photoRect,d);if(0.5>=Math.abs(d.width-e.photoRect.width)&&0.5>=Math.abs(d.height-e.photoRect.height)){f.removeFromParent();e.photoTitle.setVisible(!0);for(d=0;d<e.photoList.length;d++)e.photoList[d].setVisible(!0);
e.getChildByName("Start").setVisible(!0);e.setPhotoTexture(a,b,c)}else window.alert("\u30a4\u30e1\u30fc\u30b8\u5185\u306b\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044")})},drawRectCutPhoto:function(a,b){var c=b.getChildByName("photo"),d=b.getContentSize().width,e=b.getContentSize().height,f,g=this;c&&(f=c.getContentSize().width*c.getScaleX(),c=c.getContentSize().height*c.getScaleY(),f<c?f<a.width&&(a=cc.rect(cc.winSize.width/2-f/2,cc.winSize.height/2-f/2,f,f)):c<a.height&&(a=cc.rect(cc.winSize.width/
2-c/2,cc.winSize.height/2-c/2,c,c)));f=new ccui.Layout;f.setContentSize(d,e);b.addChild(f);var h=new cc.LayerColor(cc.color(0,0,0,100),a.x,e);h.setPosition(cc.p(0,0));f.addChild(h);var k=new cc.LayerColor(cc.color(0,0,0,100),d-a.x-a.width,e);k.setPosition(cc.p(a.x+a.width,0));f.addChild(k);var m=new cc.LayerColor(cc.color(0,0,0,100),a.width,e-a.y-a.height);m.setPosition(cc.p(a.x,a.y+a.height));f.addChild(m);var l=new cc.LayerColor(cc.color(0,0,0,100),a.width,a.y);l.setPosition(cc.p(a.x,0));f.addChild(l);
var p=new ccui.Layout;p.setContentSize(a.width,a.height);p.setPosition(cc.p(a.x,a.y));f.addChild(p);f=new cc.Sprite(GlobalRes.color_b0e2cf);f.setAnchorPoint(0,0);f.setPosition(0,0);p.addChild(f);f=new cc.DrawNode;f.setTag(0);p.addChild(f);f.drawRect(cc.p(0,0),cc.p(a.width,a.height),null,2,cc.color(255,255,255,255));f.drawPoly([cc.p(a.width/3,0),cc.p(a.width/3,a.height)],null,2,cc.color(255,255,255,255));f.drawPoly([cc.p(2*a.width/3,0),cc.p(2*a.width/3,a.height)],null,2,cc.color(255,255,255,255));
f.drawPoly([cc.p(0,a.height/3),cc.p(a.width,a.height/3)],null,2,cc.color(255,255,255,255));f.drawPoly([cc.p(0,2*a.height/3),cc.p(a.width,2*a.height/3)],null,2,cc.color(255,255,255,255));var n=new ccui.Button(GlobalRes.dot);n.setAnchorPoint(0.5,0.5);n.setPosition(0,0);n.setTag(1);n.setScale(2,2);p.addChild(n);var r=new ccui.Button(GlobalRes.dot);r.setAnchorPoint(0.5,0.5);r.setPosition(a.width,0);r.setTag(2);r.setScale(2,2);p.addChild(r);var q=new ccui.Button(GlobalRes.dot);q.setAnchorPoint(0.5,0.5);
q.setPosition(a.width,a.height);q.setTag(3);q.setScale(2,2);p.addChild(q);var s=new ccui.Button(GlobalRes.dot);s.setAnchorPoint(0.5,0.5);s.setPosition(0,a.height);s.setTag(4);s.setScale(2,2);p.addChild(s);var t=function(a){0>a.x&&(a.x=0);0>a.y&&(a.y=0);a.x+a.width>d&&(a.x=d-a.width);a.y+a.height>e&&(a.y=e-a.height);100>a.width&&(a.width=100);100>a.height&&(a.height=100);a.width>d&&(a.width=d);a.height>e&&(a.height=e);g.photoRect=a;h.setContentSize(a.x,e);k.setContentSize(d-a.x-a.width,e);k.setPosition(cc.p(a.x+
a.width,0));m.setContentSize(a.width,e-a.y-a.height);m.setPosition(cc.p(a.x,a.y+a.height));l.setContentSize(a.width,a.y);l.setPosition(cc.p(a.x,0));p.setContentSize(a.width,a.height);p.setPosition(cc.p(a.x,a.y));n.setPosition(0,0);r.setPosition(a.width,0);q.setPosition(a.width,a.height);s.setPosition(0,a.height);p.getChildByTag(0).removeFromParent();var b=new cc.DrawNode;b.setTag(0);p.addChild(b);b.drawRect(cc.p(0,0),cc.p(a.width,a.height),null,2,cc.color(255,255,255,255));b.drawPoly([cc.p(a.width/
3,0),cc.p(a.width/3,a.height)],null,2,cc.color(255,255,255,255));b.drawPoly([cc.p(2*a.width/3,0),cc.p(2*a.width/3,a.height)],null,2,cc.color(255,255,255,255));b.drawPoly([cc.p(0,a.height/3),cc.p(a.width,a.height/3)],null,2,cc.color(255,255,255,255));b.drawPoly([cc.p(0,2*a.height/3),cc.p(a.width,2*a.height/3)],null,2,cc.color(255,255,255,255))},w,u;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),
e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height);return cc.rectContainsPoint(e,d)?(u=c.getPosition(),!0):!1},onTouchMoved:function(b,c){var d=b.getLocation();null==w||d==w?w=b.getLocation():(a.x=u.x+(d.x-w.x),a.y=u.y+(d.y-w.y),t(a))},onTouchEnded:function(a,b){w=null;py=px=0}},p);f=function(b,c){switch(c){case ccui.Widget.TOUCH_MOVED:var d=a.x,e=a.y,f=a.width,g=a.height,h=0,k=0;switch(b.getTag()){case 1:h=a.x-b.getTouchMovePosition().x;k=a.y-b.getTouchMovePosition().y;a.width+=h;a.height+=k;Math.abs(h)>
Math.abs(k)?a.width=a.height:a.height=a.width;a.x=d+f-a.width;a.y=e+g-a.width;break;case 2:h=b.getTouchMovePosition().x-a.x-a.width;k=a.y-b.getTouchMovePosition().y;a.width+=h;a.height+=k;Math.abs(h)>Math.abs(k)?a.width=a.height:a.height=a.width;a.y=e+g-a.width;break;case 3:h=b.getTouchMovePosition().x-a.x-a.width;k=b.getTouchMovePosition().y-a.y-a.height;a.width+=h;a.height+=k;Math.abs(h)>Math.abs(k)?a.width=a.height:a.height=a.width;break;case 4:h=a.x-b.getTouchMovePosition().x,k=b.getTouchMovePosition().y-
a.y-a.height,a.width+=h,a.height+=k,Math.abs(h)>Math.abs(k)?a.width=a.height:a.height=a.width,a.x=d+f-a.width}100>=a.width&&(a.x=d,a.width=f);100>=a.height&&(a.y=e,a.height=g);t(a)}};n.addTouchEventListener(f);r.addTouchEventListener(f);q.addTouchEventListener(f);s.addTouchEventListener(f);return a},setPhotoTexture:function(a,b,c,d){var e=this;if(b){var f=e.getCutImageRes(a);cc.loader.loadImg(f,{isCrossOrigin:!1},function(a,b){var d=new cc.Texture2D;d.initWithElement(b);d.handleLoadedTexture();e.photoList[c].getChildByTag(5).setVisible(!1);
e.photoList[c].getChildByTag(4).initWithTexture(d);d=e.cuPhotoWH?e.cuPhotoWH/b.width:e.IMAGE_WH/b.height;e.photoList[c].getChildByTag(4).setScale(d,d);e.photoList[c].getChildByTag(4).setName(f);e.photoList[c].getChildByTag(4).setVisible(!0);e.photoList[c].getChildByTag(1).setVisible(!0)})}else cc.loader.loadImg(a,{isCrossOrigin:!1},function(b,f){if(null!=a&&""!=a){var k=new cc.Texture2D;k.initWithElement(f);k.handleLoadedTexture();e.photoList[c].getChildByTag(5).setVisible(!1);e.photoList[c].getChildByTag(4).initWithTexture(k);
e.photoList[c].getChildByTag(4).setName(a);k=e.cuPhotoWH?e.cuPhotoWH/f.width:e.IMAGE_WH/f.height;e.photoList[c].getChildByTag(4).setScale(k,k);e.photoList[c].getChildByTag(4).setVisible(!0);e.photoList[c].getChildByTag(1).setVisible(!0)}c==e.photoList.length-1&&(e.fromHistory?e.photoModeVoteResult(d):e.startPhotoMode())})},getCutImageRes:function(a){var b=this.photoRect.width/this.photoScale,c=this.photoRect.height/this.photoScale,d=this.photoRect.x/this.photoScale-(cc.winSize.width-a.width*this.photoScale)/
2/this.photoScale,e=a.height-this.photoRect.y/this.photoScale-c+(cc.winSize.height-80-a.height*this.photoScale)/2/this.photoScale,f=this.photoPos.y/this.photoScale,d=this.photoPos.x/this.photoScale+d,b=cc.rect(d,f+e,b,c),c=new cc.Texture2D;c.initWithElement(a);c.handleLoadedTexture();c=c.getHtmlElementObj();a=cc.newElement("canvas");a.width=b.width;a.height=b.height;d=a.getContext("2d");d.translate(a.width/2,a.height/2);d.drawImage(c,b.x,b.y,b.height,b.width,-b.height/2,-b.width/2,b.height,b.width);
b=a.toDataURL("image/jpeg",0.8);a.remove();return b},getphtoMaxNum:function(){for(var a=0,b=0;b<mainView.photoList.length;b++)mainView.photoList[b].getChildByTag(4).isVisible()&&a++;return a},setPhotoTitleView:function(a){var b=new cc.EditBox(cc.size(cc.winSize.width-70,a),new cc.Scale9Sprite);b.setPlaceholderFontSize(36);b.setPlaceHolder("     \u8cea\u554f\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044");b.setPlaceholderFontColor(cc.color.GRAY);b.setPosition(30,a/2);b.setMaxLength(16);b.setAnchorPoint(cc.p(0,
0.5));b.setDelegate(this);b.setFontName(GAME_FONT.PRO_W3);b.setFontColor(cc.color(111,205,193,255));b.setFontSize(36);b.setAdd(!0);return b},addphotoListView:function(a,b){var c=a-20,d=cc.winSize.width,e=this.IMAGE_WH,f=this.IMAGE_WH;c<2*e&&(mainView.cuPhotoWH=e=f=c/2);for(var g=[-e/2-5,f/2+20,e/2+5,f/2+20,-e/2-5,-f/2+10,e/2+5,-f/2+10],h=0;4>h;h++){var k=new ccui.Layout;k.setAnchorPoint(cc.p(0.5,0.5));k.setPosition(d/2+g[2*h],c/2+b+g[2*h+1]);k.setTag(h);k.setContentSize(e,f);var m=parseInt(e+2),l=
parseInt(f+2),m=new cc.LoadClientData(cc.size(m,l),1,new cc.Scale9Sprite(MajorityVoteRes.setting_image_btn,cc.rect(0,0,292,292),cc.rect(30,30,232,232)));m.setDelegate(this);m.setAnchorPoint(cc.p(0.5,0.5));m.setPosition(e/2,f/2);m.setName(h);m.setTag(5);k.addChild(m);m=new cc.Sprite;m.setVisible(!1);m.setAnchorPoint(cc.p(0.5,0.5));m.setPosition(e/2,f/2);m.setName("");m.setTag(4);k.addChild(m);m=new cc.Sprite(MajorityVoteRes.common_delete_p);m.setVisible(!1);m.setAnchorPoint(cc.p(1,1));m.setPosition(cc.p(e,
f));m.setTag(1);mainView.cuPhotoWH&&m.setScale(mainView.cuPhotoWH/this.IMAGE_WH,mainView.cuPhotoWH/this.IMAGE_WH);k.addChild(m);cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,b){var c=b.getCurrentTarget(),d=c.convertToNodeSpace(a.getLocation()),e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height);return cc.rectContainsPoint(e,d)?(c.getParent().getChildByTag(5).setVisible(!0),c.getParent().getChildByTag(4).setVisible(!1),
c.getParent().getChildByTag(4).setName(""),c.getParent().getChildByTag(3).setVisible(!1),c.getParent().getChildByTag(2).setVisible(!1),c.setVisible(!1),!0):!1}}),m);m=new cc.Sprite(MajorityVoteRes.common_img_cover);m.setVisible(!1);m.setAnchorPoint(cc.p(0.5,0.5));m.setPosition(e/2,f/2);mainView.cuPhotoWH?m.setScale(1.05*(mainView.cuPhotoWH/this.IMAGE_WH),1.05*(mainView.cuPhotoWH/this.IMAGE_WH)):m.setScale(1.05,1.05);m.setTag(3);k.addChild(m);m=new ccui.Layout;m.setVisible(!1);m.setTouchEnabled(!0);
m.setContentSize(e,f);m.setAnchorPoint(cc.p(0.5,0.5));m.setPosition(e/2,f/2);m.setTag(2);k.addChild(m);m.addTouchEventListener(function(a,b){if(b==ccui.Widget.TOUCH_BEGAN)for(var c=0;c<mainView.photoList.length;c++)a.getParent().getChildByTag(3)==mainView.photoList[c].getChildByTag(3)?(a.getParent().getChildByTag(3).setVisible(!a.getParent().getChildByTag(3).isVisible()),a.getParent().getChildByTag(3).isVisible()?mainView.cuSelected=c:mainView.cuSelected=-1):mainView.photoList[c].getChildByTag(3).setVisible(!1)},
this);mainView.photoList.push(k)}}}),MajorityVoteScene=cc.Scene.extend({onEnter:function(){this._super();var a=new MajorityVoteLayer;this.addChild(a)}});var GhostLegLayer=cc.LayerColor.extend({gameStage:0,endAnimCount:null,currentMaxPer:null,lineHeightX:null,lineHeightY:null,lineWidthStart:null,lineWidthEnd:null,lineHeight:16,scrollView:null,textFiledAddVIew:null,mode:null,reusltStr:null,rStrIndex:null,drawLineIndex:null,cuDrawLineIndex:null,selectedEditItem:null,isChaMoving:!1,TAG_MAIN:0,TAG_ENTRY:100,TAG_SETTING:200,TAG_READY:201,TAG_GAME:202,TAG_RESULT:203,TAG_MASK:205,ORDER_Z_MAIN:10,ORDER_Z_SETTING:20,ORDER_Z_GAME:30,ORDER_Z_TUTORIAL:50,ORDER_Z_LINE:100,
ORDER_Z_MAX:500,ctor:function(){this._super(cc.color(111,205,192,255));mainView=this;this.init();ADD_CHANGESTATE_CALLBACK(this.stateBack,this);return!0},stateBack:function(a){a.gameStage==a.TAG_MAIN?this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.gameStage){case a.TAG_ENTRY:mainView.removeAllChildren();mainView.init();break;case a.TAG_SETTING:mainView.initLineData();mainView.removeAllChildren();mainView.additionEntry();break;case a.TAG_READY:mainView.initLineData();
mainView.removeAllChildren();mainView.settingMode();break;case a.TAG_GAME:mainView.removeAllChildren(),mainView.readyGame()}},initLineData:function(){this.selectedEditItem=-1;this.currentMaxPer=0;this.lineHeightX=[];this.lineHeightY=[];this.lineWidthStart=[];this.lineWidthEnd=[];this.drawLineIndex=[];this.cuDrawLineIndex=null},initData:function(){this.initLineData();this.mode=0;this.reusltStr=[];this.rStrIndex=[];this.scrollView&&(this.scrollView.removeAllChildren(),this.scrollView=null);this.textFiledAddVIew&&
(this.textFiledAddVIew.listView.removeAllItems(),this.textFiledAddVIew.removeFromParent(),this.textFiledAddVIew=null)},init:function(){this.gameStage=this.TAG_MAIN;this.initData();var a=new cc.Sprite(GhostLegRes.main_bg);a.setAnchorPoint(cc.p(0,0));this.addChild(a);a=new Toolbar(GAME_TYPE.GhostLeg);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,this.ORDER_Z_MAIN);this.mainAnimation();a=new HistorysListView(cc.winSize.height-550,GAME_TYPE.GhostLeg,GhostLegRes.main_setting_list_btn,
GhostLegRes.main_simple_list_btn,this.gotoReplayView,this.gotoResultView);this.addChild(a);this.addChild(new MainModeBtn(this.startSimpleMode,this.startSettingMode,GhostLegRes.main_start_btn,"\u7d50\u679c\u8a2d\u5b9a","\u7d50\u679c\u3092\u81ea\u5206\u3067\u767b\u9332",GhostLegRes.main_setting_play_btn,"\u3059\u3050\u306b\u958b\u59cb","\u7d50\u679c\u3092\u3042\u305f\u308a\u3068\u306f\u305a\u308c\u304b\u3089\u9078\u629e",GhostLegRes.main_simple_play_btn))},mainAnimation:function(){var a=new cc.Sprite;
a.setAnchorPoint(0,1);a.setPosition(0,cc.winSize.height-100);var b=[];b.push(new cc.SpriteFrame("res/Scene/GhostLeg/main/001.png",new cc.Rect(0,0,750,450)));for(var c=cc.animate(new cc.Animation(b,0.8)),b=[],d=2;9>d;d++)b.push(new cc.SpriteFrame("res/Scene/GhostLeg/main/00"+d+".png",new cc.Rect(0,0,750,450)));d=cc.animate(new cc.Animation(b,0.2));b=[];b.push(new cc.SpriteFrame("res/Scene/GhostLeg/main/010.png",new cc.Rect(0,0,750,450)));var e=cc.animate(new cc.Animation(b,0.15)),b=[];b.push(new cc.SpriteFrame("res/Scene/GhostLeg/main/011.png",
new cc.Rect(0,0,750,450)));b=cc.animate(new cc.Animation(b,0.8));a.runAction((new cc.Sequence(c,d,e,b)).repeatForever());this.addChild(a)},touchEvent:function(a,b){switch(b){case ccui.Widget.TOUCH_ENDED:switch(cc.log("touchEvent "+a.getName()),a.getName()){case "addEntry":1<mainView.textFiledAddVIew.listView.getItems().length&&(mainView.reusltStr=[],mainView.removeAllChildren(),mainView.settingMode());break;case "toSetting":if(0==mainView.mode||1==mainView.mode&&!mainView.isInputHavNull())mainView.removeAllChildren(),
mainView.readyGame();break;case "toGame":mainView.removeAllChildren();mainView.drawGame();break;case "toResult":mainView.endAnimCount==mainView.currentMaxPer&&mainView.drawResultView();break;case "toHome":mainView.savPopup()}}},startSimpleMode:function(a){mainView.initData();mainView.mode=0;mainView.removeAllChildren(!0);mainView.additionEntry()},startSettingMode:function(a){mainView.initData();mainView.mode=1;mainView.removeAllChildren(!0);mainView.additionEntry()},additionEntry:function(){this.gameStage=
this.TAG_ENTRY;var a=new cc.LayerColor(cc.color("#ffffff"),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);this.addChild(a);var b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,0));b.setPosition(0,164);b.setScaleX(cc.winSize.width);a.addChild(b);b=new cc.LabelTTF("\u3000\u3000\u4eba\u304c\u53c2\u52a0\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color("#999999"));b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>
1,127));a.addChild(b);var c=new cc.LabelTTF;c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color("#6fcdc1"));c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(cc.winSize.width/2-b.getContentSize().width/2+34,127));c.setString("0");a.addChild(c);if(this.textFiledAddVIew){this.textFiledAddVIew.removeFromParent();this.textFiledAddVIew.setInputListener();var d=this.buttonBackColorText("addEntry","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1"),
a),b=mainView.textFiledAddVIew.listView.getItems().length;9<b?c.setString(b):c.setString("0"+b)}else this.textFiledAddVIew=new TextFiledAddList(15,172,0),d=this.buttonBackColorText("addEntry","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8"),a);a.addChild(this.textFiledAddVIew,this.ORDER_Z_MAX);c.schedule(function(){if(mainView.textFiledAddVIew.isAddChanged){var b=mainView.textFiledAddVIew.listView.getItems().length;9<b?c.setString(b):c.setString("0"+b);1<b?(d.removeFromParent(),
d=mainView.buttonBackColorText("addEntry","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1"),a)):(d.removeFromParent(),d=mainView.buttonBackColorText("addEntry","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8"),a));mainView.textFiledAddVIew.isAddChanged=!1}})},settingMode:function(){this.gameStage=this.TAG_SETTING;var a=new cc.LayerColor(cc.color("#ffffff"),cc.winSize.width,cc.winSize.height);a.setPosition(0,0);this.addChild(a);
var b=this.textFiledAddVIew.listView.getItems().length,c=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,100);c.setPosition(0,a.getContentSize().height-c.getContentSize().height);a.addChild(c);var d=new cc.LabelTTF("\u7d50\u679c\u767b\u9332",GAME_FONT.PRO_W3);d.setFontSize(32);d.setFontFillColor(cc.color("#fff3bf"));d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(cc.p(c.getContentSize().width>>1,c.getContentSize().height>>1));c.addChild(d);c=new ccui.ScrollView;c.setAnchorPoint(0,0);
c.setDirection(ccui.ScrollView.DIR_VERTICAL);c.setContentSize(cc.size(a.getContentSize().width,a.getContentSize().height-100-148));c.setBounceEnabled(!1);d=c.getContentSize();c.setInnerContainerSize(cc.size(d.width,138*b));c.setPosition(0,148);a.addChild(c);0==this.mode?this.itemSimpleMode(c,138,b):this.itemEditMode(c,138,b);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,148);b.setScaleX(cc.winSize.width);a.addChild(b);0==this.mode?this.buttonBackColorText("toSetting",
"\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,30,cc.size(200,80),cc.color("#6fcdc1"),a):this.isInputHavNull()?this.buttonBackColorText("toSetting","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,30,cc.size(200,80),cc.color("#c8c8c8")):this.buttonBackColorText("toSetting","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,30,cc.size(200,80),cc.color("#6fcdc1"))},isInputHavNull:function(){for(var a=!1,b=0;b<this.reusltStr.length;b++)if(""==this.reusltStr[b]){a=!0;break}return a},itemSimpleMode:function(a,
b,c){for(var d=0;d<c;d++){var e=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,b);e.setAnchorPoint(cc.p(0,0));e.setPosition(0,a.getInnerContainerSize().height-(d+1)*b);a.addChild(e);var f=new cc.Sprite(GlobalRes.color_eeeeee);f.setAnchorPoint(0,0);f.setPosition(0,0);f.setScale(e.getContentSize().width,2);e.addChild(f);f=new cc.LabelTTF(d+1+"\u756a\u76ee\u306e\u7d50\u679c",GAME_FONT.PRO_W6);f.setFontSize(36);f.setFontFillColor(cc.color("#6fcdc1"));f.setAnchorPoint(cc.p(0,0.5));f.setPosition(cc.p(30,
e.getContentSize().height/2));e.addChild(f);for(var g=["\u306f\u305a\u308c","\u5f53\u305f\u308a"],h=function(a){return e.getContentSize().width-(30+160*(1-a))},f=0;2>f;f++){if(1==f){var k=new cc.Sprite(GhostLegRes.setting_atari_160);k.setAnchorPoint(cc.p(1,0.5));k.setName(d.toString());k.setTag(10);k.setPosition(cc.p(h(f),e.getContentSize().height/2));e.addChild(k);this.reusltStr.length==c?k.setPosition(cc.p(h(this.reusltStr[d]===g[0]?0:1),e.getContentSize().height/2)):this.reusltStr.push(g[f])}k=
new ccui.Button;k.setContentSize(cc.size(160,80));k.setScale9Enabled(!0);k.setTag(f);k.setAnchorPoint(cc.p(1,0.5));k.setPosition(cc.p(h(f),e.getContentSize().height/2));k.setTitleText(g[f]);k.setTitleColor(cc.color("#6fcdc1"));k.setTitleFontName(GAME_FONT.PRO_W3);k.setTitleFontSize(36);k.addClickEventListener(function(a){var b=a.getParent().getChildByTag(10),c=Number(b.getName());a=a.getTag();b.setPositionX(h(a));mainView.reusltStr.splice(c,1,g[a])});e.addChild(k,this.ORDER_Z_MAX)}}},itemEditMode:function(a,
b,c){for(var d=a.getContentSize().height,e=a.getInnerContainerSize().height,f=(b-60)/2+15,g=0;g<c;g++){var h=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width,b);h.setTag(g);h.setAnchorPoint(cc.p(0,0));h.setPosition(0,a.getInnerContainerSize().height-(g+1)*b);a.addChild(h);var k=new cc.Sprite(GlobalRes.color_eeeeee);k.setAnchorPoint(0,0);k.setPosition(0,0);k.setScale(h.getContentSize().width,2);h.addChild(k);k=new cc.Sprite(GlobalRes.addition_d);k.setAnchorPoint(0,0.5);k.setName("defalutTxt");
k.setPosition(30,h.getContentSize().height/2);h.addChild(k);k.setVisible(!1);var m=new cc.LabelTTF("       \u756a\u76ee\u306e\u7d50\u679c\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",GAME_FONT.PRO_W3);m.setFontSize(36);m.setFontFillColor(cc.color("#c8c8c8"));m.setAnchorPoint(cc.p(0,0.5));m.setPosition(cc.p(0,k.getContentSize().height/2-2));k.addChild(m);m=new cc.LabelTTF(g+1,GAME_FONT.PRO_W6);m.setFontSize(36);m.setFontFillColor(cc.color("#c8c8c8"));m.setAnchorPoint(cc.p(1,0.5));m.setPosition(cc.p(k.getPositionX()+
k.getContentSize().width+15,k.getContentSize().height/2-2));k.addChild(m);k=new cc.LabelTTF;k.setName("text");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(36);k.setFontFillColor(cc.color("#6fcdc1"));k.setAnchorPoint(cc.p(0,0.5));k.setPosition(cc.p(32,h.getContentSize().height/2-3));h.addChild(k);k=new cc.EditBox(cc.size(h.getContentSize().width-200,80),new cc.Scale9Sprite);k.setPlaceholderFontColor(cc.color("#c8c8c8"));k.setPlaceholderFontSize(36);k.setPlaceholderFontName(GAME_FONT.PRO_W3);k.setPlaceHolder("       \u756a\u76ee\u306e\u7d50\u679c\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");
k.setAnchorPoint(cc.p(0,0.5));k.setPosition(30,h.getContentSize().height/2);k.setDelegate(this);k.setFontName(GAME_FONT.PRO_W3);k.setFontColor(cc.color("#6fcdc1"));k.setFontSize(36);k.setMaxLength(12);k.setName("textField");k.setAdd(!0,g+1);h.addChild(k);this.reusltStr.length==c?k.setString(this.reusltStr[g]):this.reusltStr.push("")}a.schedule(function(){var g=e-d;if(0<g){var h=function(d){var e=Math.abs(parseInt(a.getContainerPosition().y));d&&(e=Math.abs(g-e));for(var h=parseInt(e/b),e=parseInt(e%
b)>f?1:0,k=function(b,e){var f=c-1-b;d&&(f=b);var g=a.getChildByTag(f).getChildByName("textField");if(e)g=function(b){var c=a.getChildByTag(b).getChildByName("textField");if(!c.isVisible()){var d=a.getChildByTag(b).getChildByName("defalutTxt");b=a.getChildByTag(b).getChildByName("text");c.setVisible(!0);d.setVisible(!1);b.setVisible(!1)}},d?(g(f),g(f+1),g(f+2),g(f+3)):(g(f),g(f-1),g(f-2),g(f-3));else if(g.isVisible()){var h=a.getChildByTag(f).getChildByName("defalutTxt"),f=a.getChildByTag(f).getChildByName("text");
g.setVisible(!1);""==g.getString()?(h.setVisible(!0),f.setVisible(!1)):(h.setVisible(!1),f.setString(g.getString()),f.setVisible(!0))}},m=0;m<h;m++)k(m,!1);0==e?k(h,!0):1==e&&k(h,!1)};h(!0);h(!1)}})},editBoxEditingDidEnd:function(a){mainView.reusltStr.splice(a.getParent().getTag(),1,a.getString());a=mainView.getChildByName("toSetting");mainView.isInputHavNull()?(a.removeFromParent(),mainView.buttonBackColorText("toSetting","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#c8c8c8"))):
(a.removeFromParent(),mainView.buttonBackColorText("toSetting","\u767b\u9332\u5b8c\u4e86",cc.winSize.width/2,10,cc.size(200,80),cc.color("#6fcdc1")))},readyGame:function(){this.gameStage=this.TAG_READY;this.currentMaxPer=this.textFiledAddVIew.listView.getItems().length;var a=new cc.LayerColor(cc.color.WHITE,cc.winSize.width,cc.winSize.height);a.setAnchorPoint(0,0);a.setPosition(0,0);this.addChild(a);var b=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,100);b.setPosition(0,a.getContentSize().height-
b.getContentSize().height);a.addChild(b);var c=new cc.LabelTTF("\u3042\u307f\u3060\u304f\u3058\u306e\u8a2d\u5b9a",GAME_FONT.PRO_W3);c.setFontSize(32);c.setFontFillColor(cc.color("#fff3bf"));c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(b.getContentSize().width>>1,b.getContentSize().height>>1));b.addChild(c);var d=[GhostLegRes.setting_random_on,GhostLegRes.setting_draw_on,GhostLegRes.setting_delete_on,GhostLegRes.setting_reset_on],e=[GhostLegRes.setting_random_off,GhostLegRes.setting_draw_off,
GhostLegRes.setting_delete_off,GhostLegRes.setting_reset_off],c=["\u30e9\u30f3\u30c0\u30e0","\u7dda\u306e\u8ffd\u52a0","\u7dda\u306e\u524a\u9664","\u30ea\u30bb\u30c3\u30c8"],f=new cc.LayerColor(cc.color.WHITE,a.getContentSize().width,200);f.setPosition(0,a.getContentSize().height-b.getContentSize().height-f.getContentSize().height);a.addChild(f);for(b=0;4>b;b++){var g=0==b||3==b?new ccui.Button(e[b],d[b]):new ccui.Button(e[b]);g.setTouchEnabled(!0);g.setTag(b);g.setAnchorPoint(cc.p(0.5,1));g.setPosition(a.getContentSize().width/
2-a.getContentSize().width/8+a.getContentSize().width/4*(b-1),f.getContentSize().height-10);g.addClickEventListener(function(a){var b=mainView,c=a.getTag();0==c||3==c?(b.lineWidthStart=[],b.lineWidthEnd=[],0==c?b.setWidthLine():b.drawWidthLine(),(1==b.selectedEditItem||2==b.selectedEditItem)&&f.getChildByTag(b.selectedEditItem).loadTextures(e[b.selectedEditItem]),b.selectedEditItem=c):b.selectedEditItem==c?(a.loadTextures(e[c]),b.selectedEditItem=-1):(a.loadTextures(d[c]),-1!=b.selectedEditItem&&
f.getChildByTag(b.selectedEditItem).loadTextures(e[b.selectedEditItem]),b.selectedEditItem=c)});f.addChild(g);var h=new cc.LabelTTF(c[b],GAME_FONT.PRO_W3);h.setFontSize(30);h.setFontFillColor(cc.color("#6fcdc1"));h.setAnchorPoint(cc.p(0.5,1));h.setPosition(cc.p(g.getPositionX(),g.getPositionY()-g.getContentSize().height-10));f.addChild(h)}c=new cc.Sprite(GlobalRes.line_50);c.setAnchorPoint(cc.p(0,0));c.setPosition(0,0);c.setScaleX(cc.winSize.width);f.addChild(c);c=new cc.LabelTTF("\u30bf\u30c3\u30c1\u3067\u7dda\u306e\u7de8\u96c6\u304c\u3067\u304d\u307e\u3059\u3002",
GAME_FONT.PRO_W3);c.setFontSize(24);c.setFontFillColor(cc.color("#c8c8c8"));c.setAnchorPoint(cc.p(0.5,0));c.setPosition(cc.p(f.getContentSize().width>>1,10));f.addChild(c);c=new cc.LayerColor(cc.color.WHITE,cc.winSize.width,cc.winSize.height-148-300);c.setAnchorPoint(0,0);c.setPosition(0,148);a.addChild(c);this.scrollView=this.setHeightLine(c,50,50);0<this.lineWidthStart.length?this.drawWidthLine(-125):this.setWidthLine();c=new cc.Sprite(GlobalRes.line_8);c.setAnchorPoint(cc.p(0,1));c.setPosition(0,
148);c.setScaleX(cc.winSize.width);a.addChild(c);this.buttonBackColorText("toGame","\u3042\u307f\u3060\u958b\u59cb",cc.winSize.width/2,30,cc.size(200,80),cc.color("#6fcdc1"),a)},drawGame:function(){this.gameStage=this.TAG_GAME;this.currentMaxPer=this.textFiledAddVIew.listView.getItems().length;var a=new cc.LayerColor(cc.color.WHITE,cc.winSize.width,cc.winSize.height);a.setTag(this.ORDER_Z_GAME);a.setAnchorPoint(0,0);a.setPosition(0,0);this.addChild(a);var b=new cc.LayerColor(cc.color("#6fcdc1"),a.getContentSize().width,
100);b.setPosition(0,a.getContentSize().height-b.getContentSize().height);a.addChild(b);var c=new cc.LabelTTF("\u3042\u307f\u3060\u304f\u3058",GAME_FONT.PRO_W3);c.setFontSize(32);c.setFontFillColor(cc.color("#fff3bf"));c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(b.getContentSize().width>>1,b.getContentSize().height>>1));b.addChild(c);b=new cc.LayerColor(cc.color.WHITE,cc.winSize.width,cc.winSize.height-148-100);b.setAnchorPoint(0,0);b.setPosition(0,148);a.addChild(b);this.scrollView=this.setHeightLine(b,
125,175,!0);this.drawWidthLine(125);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(cc.p(0,1));b.setPosition(0,148);b.setScaleX(cc.winSize.width);a.addChild(b);this.buttonBackColorText("toResult","\u7d50\u679c\u3092\u898b\u308b",cc.winSize.width/2-110,30,cc.size(200,80),cc.color("#c8c8c8"),a);this.buttonBackColorText("toHome","\u30db\u30fc\u30e0",cc.winSize.width/2+110,30,cc.size(200,80),cc.color("#6fcdc1"),a);this.getreusltStrWithPersonData(125,175)},drawResultView:function(a){var b=new Mask;
this.addChild(b);b.open();var c=new ccui.Layout;c.setContentSize(cc.winSize.width,cc.winSize.height);c.setAnchorPoint(0,0);c.setTouchEnabled(!0);c.addClickEventListener(function(){c.removeFromParent();b.removeFromParent()});this.addChild(c);var d=new RoundRect(cc.winSize.width-60,cc.winSize.height-306);d.setAnchorPoint(0.5,0.5);d.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);c.addChild(d);var e=new cc.LayerColor(cc.color("#fdfcf3"),d.getContentSize().width,100);e.setPosition(0,d.getContentSize().height-
e.getContentSize().height);d.addChild(e);var f="\u3042\u307f\u3060\u304f\u3058\u306e\u7d50\u679c";a&&(f=a);f=new cc.LabelTTF(f,GAME_FONT.PRO_W3);f.setFontSize(36);f.setFontFillColor(cc.color("#c8c8c8"));f.setAnchorPoint(cc.p(0.5,0.5));f.setPosition(cc.p(e.getContentSize().width>>1,e.getContentSize().height>>1));e.addChild(f);var f=new cc.DrawNode,g=[cc.p(0,0),cc.p(e.getContentSize().width,0)];e.addChild(f);f.drawPoly(g,null,2,cc.color("#6fcdc1"));this.currentMaxPer=this.textFiledAddVIew.listView.getItems().length;
e=new ccui.ScrollView;e.setAnchorPoint(0,0);e.setTouchEnabled(!0);e.setDirection(ccui.ScrollView.DIR_VERTICAL);e.setContentSize(cc.size(d.getContentSize().width,d.getContentSize().height-100-100));e.setBounceEnabled(!1);f=e.getContentSize();e.setInnerContainerSize(cc.size(f.width,144*this.currentMaxPer));e.setPosition(0,100);d.addChild(e);for(f=0;f<this.currentMaxPer;f++){g=new cc.LayerColor(cc.color("#ffffff"),e.getContentSize().width,144);g.setPosition(0,e.getInnerContainerSize().height-144*(f+
1));e.addChild(g);if(f!=this.currentMaxPer-1){var h=new cc.Sprite(GlobalRes.color_eeeeee);h.setAnchorPoint(0,0);h.setPosition(0,0);h.setScale(g.getContentSize().width,2);g.addChild(h)}var h=this.textFiledAddVIew.getListChildernIcon(f),k=new cc.Sprite("res/Scene/GhostLeg/result/amd_"+h+"_off.png");k.setAnchorPoint(0,0.5);k.setPosition(30,g.getContentSize().height>>1);g.addChild(k);h=new cc.LabelTTF(f+1+"."+this.reusltStr[this.rStrIndex[f]],GAME_FONT.PRO_W6);h.setFontSize(36);h.setFontFillColor(cc.color("#6fcdc1"));
h.setAnchorPoint(cc.p(0,0.5));h.setPosition(cc.p(30+k.getContentSize().width+30,g.getContentSize().height/2+20));g.addChild(h);k=new cc.LabelTTF(this.textFiledAddVIew.getListChildern(f),GAME_FONT.PRO_W3);k.setFontSize(36);k.setFontFillColor(cc.color("#6fcdc1"));k.setAnchorPoint(cc.p(0,0.5));k.setPosition(cc.p(h.getPositionX(),g.getContentSize().height/2-20));g.addChild(k)}e=new cc.LayerColor(cc.color("#6fcdc1"),d.getContentSize().width,100);e.setAnchorPoint(cc.p(0,0));e.setPosition(0,0);d.addChild(e);
d=new ccui.Button;d.setContentSize(e.getContentSize().width,100);d.setAnchorPoint(cc.p(0.5,0.5));d.setPosition(e.getContentSize().width>>1,50);d.setTouchEnabled(!0);d.setScale9Enabled(!0);a?d.setTitleText("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f"):d.setTitleText("\u78ba\u8a8d");d.setTitleColor(cc.color.WHITE);d.setTitleFontName(GAME_FONT.PRO_W6);d.setTitleFontSize(30);e.addChild(d);d.addClickEventListener(function(d){c.removeFromParent();b.removeFromParent();a&&(mainView.removeAllChildren(!0),
mainView.additionEntry())})},savPopup:function(){var a=new Mask;this.addChild(a);a.open();a=new RoundRect(570,300);a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);this.addChild(a);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);b.setFontFillColor(new cc.Color(111,205,193,255));b.setAnchorPoint(0,1);b.setPosition(35,a.getContentSize().height-40);a.addChild(b);var c=new cc.Sprite(GlobalRes.color_eeeeee);
c.setAnchorPoint(0,0);c.setPosition(35,b.getPosition().y-b.getContentSize().height-30-58);c.setScale(498,1);a.addChild(c);for(var d=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),c="",e=mainView.textFiledAddVIew.listView.getItems().length,f=0;f<e;f++)c+=this.textFiledAddVIew.getListChildern(f),f!=e-1&&(c+="\u3001");d.setFontSize(34);d.setFontColor(new cc.Color(111,205,193,255));d.setString(c);d.setFontName(GAME_FONT.PRO_W3);d.setAnchorPoint(0,1);d.setPosition(36,b.getPosition().y-b.getContentSize().height-
30-1);a.addChild(d);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){""===d.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):(mainView.setHistory(mainView.mode,d.getString()),mainView.removeAllChildren(),mainView.init())});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,
0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){mainView.removeAllChildren();mainView.init()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,
50);a.addChild(b)},setHeightLine:function(a,b,c,d){var e=new cc.DrawNode;this.lineHeightX=[];this.lineHeightY=[];var f=this,g,h;2==this.currentMaxPer?(g=cc.winSize.width/3,h=cc.winSize.width/3):3==this.currentMaxPer?(g=cc.winSize.width/4,h=cc.winSize.width/4):4==this.currentMaxPer?(g=cc.winSize.width/5,h=cc.winSize.width/5):(g=cc.winSize.width/6,h=cc.winSize.width/6);var k=new ccui.ScrollView;k.setAnchorPoint(0,0);k.setName("scrollView");k.setDirection(ccui.ScrollView.DIR_BOTH);k.setContentSize(cc.size(a.getContentSize().width,
a.getContentSize().height));k.setBounceEnabled(!1);var m=k.getContentSize();k._setInnerWidth(h*(this.currentMaxPer+1));k.setPosition(0,0);a.addChild(k);k.addChild(e);for(var l=0;l<this.currentMaxPer;l++)e.drawPoly([cc.p(g+h*l,c),cc.p(g+h*l,k._getInnerHeight()-b)],null,5,cc.color("#6fcdc1")),this.lineHeightX.push(g+h*l);for(l=k._getInnerHeight()-b-this.lineHeight;l>c;l-=this.lineHeight)this.lineHeightY.push(l);if(d){for(l=f.endAnimCount=0;l<this.currentMaxPer;l++)d=this.textFiledAddVIew.getListChildernIcon(l),
d=new ccui.Button("res/Scene/GhostLeg/result/amd_"+d+"_off.png"),d.setTouchEnabled(!0),d.setTag(l),d.setAnchorPoint(cc.p(0.5,1)),d.setPosition(g+h*l,m.height-15),d.addClickEventListener(function(a){a.setTouchEnabled(!1);var d=a.getTag(),e="res/Scene/GhostLeg/result/amd_"+f.textFiledAddVIew.getListChildernIcon(d)+"_on.png";a.loadTextures(e);f.setPersonLine(b,c,d,e,p)}),k.addChild(d),d=new cc.Sprite(GhostLegRes.cha_block),d.setAnchorPoint(cc.p(0.5,0)),d.setPosition(g+h*l,88),k.addChild(d),e=new cc.LabelTTF(""+
(l+1)),e.setFontName(GAME_FONT.PRO_W6),e.setFontSize(36),e.setFontFillColor(cc.color.WHITE),e.setAnchorPoint(cc.p(0.5,0.5)),e.setPosition(d.getContentSize().width>>1,d.getContentSize().height>>1),d.addChild(e);a=new cc.LayerColor(cc.color("#ffffff"),a.getContentSize().width>k.getInnerContainerSize().width?a.getContentSize().width:k.getInnerContainerSize().width,80);a.setAnchorPoint(0,0);a.setPosition(0,0);k.addChild(a);var p=new cc.LabelTTF("",GAME_FONT.PRO_W6,32);p.setFontFillColor(cc.color("#6fcdc1"));
p.setAnchorPoint(cc.p(0.5,0.5));p.setPosition(a.getContentSize().width>>1,a.getContentSize().height>>1);k.addChild(p)}else this.setTouchScrollView(k);return k},setScrollViewTouch:function(a){if(this.scrollView)if(a)for(a=0;a<this.currentMaxPer;a++)this.scrollView.getChildByTag(a).setTouchEnabled(!0);else for(a=0;a<this.currentMaxPer;a++)this.scrollView.getChildByTag(a).setTouchEnabled(!1)},setWidthLine:function(){var a;for(a=0;a<this.currentMaxPer-1;a++){var b=getRandomInt(3,7),c=parseInt(this.lineHeightY.length/
b)+1;c<=b&&(b=c=parseInt(this.lineHeightY.length/6)+1);for(var d=0;d<b;d++){var e=c*d+getRandomInt(0,c);if(1<=a)for(var f=0;f<this.lineWidthStart.length/2;f++)for(;this.lineWidthStart[2*f]==this.lineHeightX[a-1]&&this.lineWidthStart[2*f+1]==this.lineHeightY[e];)e=c*d+getRandomInt(0,c),f=0;this.lineWidthStart.push(this.lineHeightX[a]);this.lineWidthStart.push(this.lineHeightY[e]);this.lineWidthEnd.push(this.lineHeightX[a+1]);this.lineWidthEnd.push(this.lineHeightY[e])}}this.drawWidthLine()},drawWidthLine:function(a){var b=
this.scrollView.getChildByName("widthLine");b&&b.removeFromParent();b=new cc.DrawNode;b.setName("widthLine");this.scrollView.addChild(b);for(var c=0;c<this.lineWidthStart.length/2;c++)a&&(this.lineWidthStart[2*c+1]+=a,this.lineWidthEnd[2*c+1]+=a),b.drawPoly([cc.p(this.lineWidthStart[2*c],this.lineWidthStart[2*c+1]),cc.p(this.lineWidthEnd[2*c],this.lineWidthEnd[2*c+1])],null,5,cc.color("#6fcdc1"))},setPersonLine:function(a,b,c,d,e){var f=SoundManager.instance().playEffect(GhostLegRes.sound_character_moving),
g=this.scrollView,h=-1,k,m=this,l=[];a=g._getInnerHeight()-a;var p=function(){for(var a=0;a<g.getChildrenCount();a++){var b=g.getChildren()[a];"personLine"===b.getName()&&1===b.getTag()&&b.setLocalZOrder(-1)}};p();var n=new cc.DrawNode;n.setName("personLine");n.setTag(0);g.addChild(n,this.ORDER_Z_LINE);l.push(cc.p(this.lineHeightX[c],a));var r=new ccui.Button(d,d);r.setTouchEnabled(!1);r.setName("itemSprite");r.setTag(c);r.setAnchorPoint(cc.p(0.5,0.5));r.setPosition(cc.p(this.lineHeightX[c],a));g.addChild(r,
this.ORDER_Z_MAX);var q=a,s=!0,t;d=new ccui.Layout;m.addChild(d);d.schedule(function(){var a=function(a,b,c,d,e,f){f?1==f?b.push(cc.p(d+2,e)):2==f?b.push(cc.p(d-2,e)):b.push(cc.p(d,e-2)):b.push(cc.p(d,e));c.setPosition(cc.p(d,e));c=b.length;0<c&&a.drawPoly([b[c-2],b[c-1]],null,5,cc.color("#fed053"));f&&b.splice(c-1,1,cc.p(d,e))};if(q>b)if(m.isChaMoving=!0,-1<h)0==h?(k+=m.lineHeight,k>=m.lineWidthEnd[t]?(a(n,l,r,m.lineWidthEnd[t],m.lineWidthEnd[t+1],1),h=-1):a(n,l,r,k,m.lineWidthEnd[t+1])):(k-=m.lineHeight,
k<=m.lineWidthStart[t]?(a(n,l,r,m.lineWidthStart[t],m.lineWidthStart[t+1],2),h=-1):a(n,l,r,k,m.lineWidthStart[t+1]));else{q-=m.lineHeight;for(var d=l[l.length-1],x=0;x<m.lineWidthStart.length/2;x++)if(m.lineWidthStart[2*x]==d.x&&m.lineWidthStart[2*x+1]==q){t=2*x;h=0;k=m.lineWidthStart[t];a(n,l,r,m.lineWidthStart[t],m.lineWidthStart[t+1],3);break}for(x=0;x<m.lineWidthEnd.length/2;x++)if(m.lineWidthEnd[2*x]==d.x&&m.lineWidthEnd[2*x+1]==q){t=2*x;h=1;k=m.lineWidthEnd[t];a(n,l,r,m.lineWidthEnd[t],m.lineWidthEnd[t+
1],3);break}-1==h&&a(n,l,r,d.x,q)}else if(s){f&&SoundManager.instance().stopEffect(f);n.setTag(1);m.drawLineIndex[c]=n;s=m.isChaMoving=!1;var v=function(a,b){e.setString(m.reusltStr[m.rStrIndex[a]]);e.setAnchorPoint(0.5,0.5);e.setPositionX(r.getPositionX());var d=g._getInnerWidth();e.getPositionX()<e.getContentSize().width/2?(e.setPositionX(10),e.setAnchorPoint(0,0.5)):e.getPositionX()+e.getContentSize().width/2>d-10&&(e.setPositionX(d-10),e.setAnchorPoint(1,0.5));if(d=g.getChildByName("spriteBack"))d.setPositionX(r.getPositionX()),
d.isVisible()||d.setVisible(!0);p();m.drawLineIndex[c].setLocalZOrder(m.ORDER_Z_LINE)};r.setTouchEnabled(!0);r.setPosition(cc.p(l[l.length-1].x,b-45));g.getChildByName("spriteBack")||(a=new cc.Sprite(GhostLegRes.result_amd_selected),a.setAnchorPoint(cc.p(0.5,1)),a.setName("spriteBack"),a.setPosition(cc.p(r.getPositionX(),r.getPositionY()+r.getContentSize().height/2+5)),g.addChild(a,m.ORDER_Z_MAX-1));v(c);for(a=0;a<g.getChildrenCount();a++)if(d=g.getChildren()[a],"personLine"===d.getName()&&0===d.getTag()){n.setLocalZOrder(-1);
break}m.endAnimCount++;m.endAnimCount==m.currentMaxPer&&(a=m.getChildByTag(m.ORDER_Z_GAME),a.getChildByName("toResult").removeFromParent(),m.buttonBackColorText("toResult","\u7d50\u679c\u3092\u898b\u308b",cc.winSize.width/2-110,30,cc.size(200,80),cc.color("#6fcdc1"),a));r.addTouchEventListener(function(a,b){switch(b){case ccui.Widget.TOUCH_ENDED:SoundManager.instance().playEffect(GhostLegRes.sound_result_selected),v(a.getTag())}});this.removeFromParent()}},0.01)},getreusltStrWithPersonData:function(a,
b){this.rStrIndex=[];var c=[];this.currentMaxPer=this.textFiledAddVIew.listView.getItems().length;for(var d=this.scrollView._getInnerHeight()-a,e=0;e<this.currentMaxPer;e++){c.push(cc.p(this.lineHeightX[e],d));for(var f=d;f>b;f-=this.lineHeight){for(var g=c[c.length-1],h=0;h<this.lineWidthStart.length/2;h++)if(this.lineWidthStart[2*h]==g.x&&this.lineWidthStart[2*h+1]==f){h*=2;c.push(cc.p(this.lineWidthStart[h],this.lineWidthStart[h+1]));c.push(cc.p(this.lineWidthEnd[h],this.lineWidthEnd[h+1]));break}for(h=
0;h<this.lineWidthEnd.length/2;h++)if(this.lineWidthEnd[2*h]==g.x&&this.lineWidthEnd[2*h+1]==f){h*=2;c.push(cc.p(this.lineWidthEnd[h],this.lineWidthEnd[h+1]));c.push(cc.p(this.lineWidthStart[h],this.lineWidthStart[h+1]));break}}for(f=0;f<this.lineHeightX.length;f++)if(this.lineHeightX[f]==c[c.length-1].x){this.rStrIndex.push(f);break}}},setTouchScrollView:function(a){var b=this,c=-1,d=new ccui.Layout;d.setContentSize(a._getInnerWidth(),a._getInnerHeight());d.setAnchorPoint(0,0);d.setPosition(0,0);
a.addChild(d);var e=-1,f=-1,g=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(a,d){var g=d.getCurrentTarget(),h=g.convertToNodeSpace(a.getLocation()),g=g.getContentSize(),g=cc.rect(0,0,g.width,g.height);if(cc.rectContainsPoint(g,h)){f=e=-1;for(g=0;g<b.lineHeightX.length-1;g++)if(h.x>b.lineHeightX[g]&&h.x<b.lineHeightX[g+1]){e=g;break}for(g=0;g<b.lineHeightY.length;g++)if(Math.abs(h.y-b.lineHeightY[g])<b.lineHeight/2){f=g;break}if(-1<e&&-1<f)for(g=
0;g<b.lineWidthStart.length/2;g++){if(b.lineHeightX[e]==b.lineWidthStart[2*g]&&b.lineHeightY[f]==b.lineWidthStart[2*g+1]&&2==b.selectedEditItem){c=2*g;break}if(b.lineHeightX[e]==b.lineWidthStart[2*g]&&b.lineHeightY[f]==b.lineWidthStart[2*g+1]||b.lineHeightX[e+1]==b.lineWidthStart[2*g]&&b.lineHeightY[f]==b.lineWidthStart[2*g+1]||b.lineHeightX[e]==b.lineWidthEnd[2*g]&&b.lineHeightY[f]==b.lineWidthEnd[2*g+1]){f=e=-1;break}}}return!1},onTouchMoved:function(a,b){cc.log("onTouchMoved");return!1},onTouchEnded:function(a,
b){cc.log("onTouchMoved");return!1}});cc.eventManager.addListener(g,d);var h;a.setTouchDelegate(function(a,d,g){a=d.getCurrentTarget().convertToNodeSpace(a.getLocation());switch(g){case ccui.Widget.TOUCH_BEGAN:h=a;break;case ccui.Widget.TOUCH_ENDED:g=Math.abs(h.x-a.x);a=Math.abs(h.y-a.y);if(10<g||10<a)f=e=-1;-1<c?(b.lineWidthStart.splice(c,2),b.lineWidthEnd.splice(c,2),b.drawWidthLine(),c=-1):-1<e&&(-1<f&&1==b.selectedEditItem)&&(b.lineWidthStart.push(b.lineHeightX[e]),b.lineWidthStart.push(b.lineHeightY[f]),
b.lineWidthEnd.push(b.lineHeightX[e+1]),b.lineWidthEnd.push(b.lineHeightY[f]),b.drawWidthLine())}})},gotoReplayView:function(a,b){console.log("gotoReplayView");mainView.getHistory(a,b);mainView.removeAllChildren(!0);mainView.additionEntry()},gotoResultView:function(a,b,c){console.log("gotoResultView");mainView.getHistory(a,c);mainView.drawResultView(b)},getHistory:function(a,b){this.initData();this.mode=b;this.textFiledAddVIew=new TextFiledAddList(15,172,0);if(a)for(var c=0;c<a.length;c++)for(var d=
0;d<a[c].members.length;d++)this.textFiledAddVIew.setListChildern(a[c].members[d].name,a[c].members[d].iconIdx),this.reusltStr.push(a[c].members[d].rStr),this.rStrIndex.push(a[c].members[d].rStrWithP)},setHistory:function(a,b,c,d,e){c=new ArrayList;for(d=0;1>d;d++){e={name:"title",icon:"icon",members:[]};for(var f=0;f<this.currentMaxPer;f++){var g={};g.name=this.textFiledAddVIew.getListChildern(f);g.iconIdx=this.textFiledAddVIew.getListChildernIcon(f);g.rStr=this.reusltStr[f];g.rStrWithP=this.rStrIndex[f];
e.members.push(g)}c.add(e)}d={};d.mode=a;d.groups=c.arr;d.title=b;DataManager.instance().createHistory(GAME_TYPE.GhostLeg,d)},buttonBackColorText:function(a,b,c,d,e,f,g){var h=new ccui.Button;h.setContentSize(e);h.setAnchorPoint(0.5,0);h.setPosition(c,d);h.setScale9Enabled(!0);h.setName(a);h.setTouchEnabled(!0);h.addTouchEventListener(this.touchEvent,this);g?g.addChild(h):this.addChild(h);a=new cc.LayerColor(f,h.getContentSize().width,h.getContentSize().height);a.setPosition(0,0);h.addChild(a);b=
new cc.LabelTTF(b);b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(26);b.setFontFillColor(cc.color.WHITE);b.setAnchorPoint(0.5,0.5);b.setPosition(h.getContentSize().width/2,h.getContentSize().height/2);h.addChild(b);return h}}),GhostLegScene=cc.Scene.extend({onEnter:function(){this._super();var a=new GhostLegLayer;this.addChild(a)}});var GroupingLayer=cc.LayerColor.extend({m_groupdata:null,m_memberdata:null,m_mode:null,m_state:-1,STATE_MAIN:0,STATE_QUICKSETTING:1,STATE_MEMBERSETTING:2,STATE_GROUPSETTING:3,STATE_REPLAY:4,STATE_RESULT1:5,STATE_RESULT2:6,m_func_isbacktomain:null,ctor:function(){this._super(cc.color(255,255,255,255));this.m_groupdata=new ArrayList;this.m_memberdata=new ArrayList;this.loadMainView();ADD_CHANGESTATE_CALLBACK(this.stateBack,this);return!0},loadMainView:function(){this.m_memberdata.clear();this.m_groupdata.clear();
this.m_state=this.STATE_MAIN;this.removeAllChildren();var a=new Toolbar(GAME_TYPE.Grouping);a.setTag(4);a.setAnchorPoint(cc.p(0,1));a.setPosition(cc.p(0,cc.winSize.height));this.addChild(a,9999);a=new cc.Sprite(GroupingRes.bg);a.setAnchorPoint(cc.p(0,0));a.setPosition(cc.p(0,0));this.addChild(a);var b=new cc.Sprite;b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height-100);for(var c=[],a=0;7>a;a++)c.push(new cc.SpriteFrame("res/Scene/Grouping/top_00"+(a+1)+".png",new cc.Rect(0,0,750,450)));c=new cc.Animation(c,
0.15);a=cc.animate(c);c=[];c.push(new cc.SpriteFrame("res/Scene/Grouping/top_008.png",new cc.Rect(0,0,750,450)));var c=new cc.Animation(c,1),d=cc.animate(c),c=[];c.push(new cc.SpriteFrame("res/Scene/Grouping/top_009.png",new cc.Rect(0,0,750,450)));c=new cc.Animation(c,0.15);c=cc.animate(c);b.runAction((new cc.Sequence(a,d,c)).repeatForever());this.addChild(b);var e=new ccui.ListView;e.setDirection(ccui.ScrollView.DIR_VERTICAL);e.setTouchEnabled(!0);e.setBounceEnabled(!0);e.setContentSize(cc.size(cc.winSize.width,
cc.winSize.height-100-450));e.setAnchorPoint(0,1);e.setPosition(0,cc.winSize.height-100-450);e.setBreakPoint(100);this.addChild(e);if(b=DataManager.instance().getHistory(GAME_TYPE.Grouping)){for(a=b.size()-1;-1<a;a--){var f=this,d=new ccui.Layout,c=new ccui.Layout;c.setTouchEnabled(!0);c.setContentSize(cc.winSize.width,156);c.setUserData(b.get(a));d.setContentSize(cc.winSize.width,c.getContentSize().height);d.addChild(c);var g=new ccui.Layout;g.setContentSize(cc.winSize.width+302,1);g.setAnchorPoint(0,
0);g.setPosition(0,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(255,243,191,255));c.addChild(g);g=new ccui.Layout;g.setContentSize(cc.winSize.width,156);g.setAnchorPoint(0,0);g.setPosition(302,0);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(111,205,193,255));g.setTag(99);g.setVisible(!1);c.addChild(g);var h=(c.getContentSize().height-80)/2,g="quick"===b.get(a).data.mode?GroupingRes.simple_list_btn:GroupingRes.setting_list_btn,
g=new cc.Sprite(g);g.setAnchorPoint(0,1);g.setPosition(30,c.getContentSize().height-h);c.addChild(g);var k=new cc.LabelTTF(""+b.get(a).month+"."+b.get(a).day);k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(30);k.setFontFillColor(cc.color(255,243,191));k.setScanPhixelRGB();k.setAnchorPoint(1,1);k.setPosition(c.getContentSize().width-30,c.getContentSize().height-h);c.addChild(k);var m=new cc.LabelTTF(b.get(a).data.title);m.setFontName(GAME_FONT.PRO_W6);m.setFontSize(40);m.setFontFillColor(cc.color(255,
243,191));m.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);m.setScanPhixelRGB();m.setContentSize(c.getContentSize().width-g.getContentSize().width-30-30-30-30-k.getContentSize().width,m.getContentSize().height);m.setAnchorPoint(0,1);m.setPosition(g.getContentSize().width+30+30,c.getContentSize().height-h);m.setTextWidth(c.getContentSize().width-g.getContentSize().width-30-30-30-30-k.getContentSize().width);c.addChild(m);str="";for(j=0;j<b.get(a).data.groups.length;j++)for(h=0;h<b.get(a).data.groups[j].members.length;h++){if(j==
b.get(a).data.groups.length-1&&h==b.get(a).data.groups[j].members.length-1){str+=b.get(a).data.groups[j].members[h].name;break}str+=b.get(a).data.groups[j].members[h].name+"\u3001"}h=new cc.LabelTTF(str);h.setFontName(GAME_FONT.PRO_W3);h.setFontSize(30);h.setFontFillColor(cc.color(255,243,191));h.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);h.setScanPhixelRGB();h.setContentSize(c.getContentSize().width-g.getContentSize().width-30-30-30-30-k.getContentSize().width,h.getContentSize().height);h.setAnchorPoint(0,
1);h.setPosition(g.getContentSize().width+30+30,m.getPositionY()-m.getFontSize()-10);h.setTextWidth(c.getContentSize().width-g.getContentSize().width-30-30-30-30-k.getContentSize().width);c.addChild(h);g=new ccui.Layout;g.setContentSize(150,c.getContentSize().height-1);g.setAnchorPoint(0,0);g.setPosition(c.getContentSize().width,1);g.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);g.setBackGroundColor(cc.color(72,133,146,255));c.addChild(g);k=new ccui.Button(GlobalRes.history_replay_btn,GlobalRes.history_replay_btn);
k.setAnchorPoint(0.5,1);k.setPosition(g.getContentSize().width/2,g.getContentSize().height-40);m=b.get(a).data.mode;h=[];for(j=0;j<b.get(a).data.groups.length;j++)h=h.concat(b.get(a).data.groups[j].members);k.setUserData({members:h,mode:m});k.addClickEventListener(function(a){f.loadReplayView(a.getUserData().members,a.getUserData().mode)});g.addChild(k);m=new cc.LabelTTF("\u3084\u308a\u76f4\u3057");m.setFontName(GAME_FONT.PRO_W3);m.setFontSize(22);m.setFontFillColor(cc.color(255,243,191));m.setScanPhixelRGB();
m.setAnchorPoint(0.5,1);m.setPosition(k.getPosition().x,k.getPosition().y-k.getContentSize().height-10);g.addChild(m);k=new ccui.Layout;k.setContentSize(2,c.getContentSize().height-1);k.setAnchorPoint(0,0.5);k.setPosition(c.getContentSize().width+g.getContentSize().width,c.getContentSize().height/2);k.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);k.setBackGroundColor(cc.color(72,133,146,255));c.addChild(k);m=new cc.Sprite(GlobalRes.history_line);m.setAnchorPoint(0,0.5);m.setPosition(c.getContentSize().width+
g.getContentSize().width,c.getContentSize().height/2);c.addChild(m);k=new ccui.Layout;k.setContentSize(150,c.getContentSize().height-1);k.setAnchorPoint(0,0);k.setPosition(c.getContentSize().width+g.getContentSize().width+m.getContentSize().width,1);k.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);k.setBackGroundColor(cc.color(72,133,146,255));c.addChild(k);g=new ccui.Button(GlobalRes.history_delete_btn,GlobalRes.history_delete_btn);g.setAnchorPoint(0.5,1);g.setPosition(k.getContentSize().width/
2,k.getContentSize().height-40);g.setUserData({time:b.get(a).time,item:d});g.addClickEventListener(function(a){DataManager.instance().deleteHistory(GAME_TYPE.Grouping,a.getUserData().time);e.removeLastItem();e.removeItem(e.getIndex(a.getUserData().item));a=new ccui.Layout;a.setContentSize(cc.winSize.width,3<=e.getItems().length?250:0);e.pushBackCustomItem(a)});k.addChild(g);m=new cc.LabelTTF("\u524a\u9664");m.setFontName(GAME_FONT.PRO_W3);m.setFontSize(22);m.setFontFillColor(cc.color(255,243,191));
m.setScanPhixelRGB();m.setAnchorPoint(0.5,1);m.setPosition(g.getPosition().x,g.getPosition().y-g.getContentSize().height-10);k.addChild(m);c.setAnchorPoint(0,0);c.setPosition(0,0);c.addTouchEventListener(function(a,b){switch(b){case ccui.Widget.TOUCH_BEGAN:a.isMoved=!1;break;case ccui.Widget.TOUCH_MOVED:if(-100>a.getTouchBeganPosition().x-a.getTouchMovePosition().x){if(1==a.pos&&!a.isAction){a.isAction=!0;var c=function(){a.isAction=!1;a.pos=0},c=new cc.Sequence(new cc.MoveTo(0.2,{x:0,y:a.getPosition().y}),
new cc.CallFunc(c));a.runAction(c);a.getChildByTag(99).setVisible(!1)}}else 100<a.getTouchBeganPosition().x-a.getTouchMovePosition().x&&(0==a.pos&&!a.isAction)&&(a.isAction=!0,c=function(){a.isAction=!1;a.pos=1;a.getChildByTag(99).setVisible(!0)},c=new cc.Sequence(new cc.MoveTo(0.2,{x:-302,y:a.getPosition().y}),new cc.CallFunc(c)),a.runAction(c));break;case ccui.Widget.TOUCH_ENDED:if(!a.isMoved&&0==a.pos){var c=a.getUserData().data.groups,d=a.getUserData().year,e=a.getUserData().month,g=a.getUserData().day;
f.loadResult2View(c,d,e,g,a.getUserData().data.mode)}}});c.pos=0;c.isAction=!1;e.pushBackDefaultItem();e.pushBackCustomItem(d)}a=new ccui.Layout;a.setContentSize(cc.winSize.width,3<=b.size()?250:0);e.pushBackCustomItem(a)}a=new Mask;a.setTag(3);a.close();this.addChild(a);var l=new ccui.Button(GroupingRes.start_btn,GroupingRes.start_btn);l.setTag(0);l.setAnchorPoint(cc.p(1,0));l.setPosition(cc.p(cc.winSize.width-22,30));f=this;l.addClickEventListener(function(){f.modeBtnCallback(l)});this.addChild(l,
999)},loadQuickSettingView:function(){this.m_state=this.STATE_QUICKSETTING;this.m_mode="quick";var a=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var b=new cc.Sprite(GlobalRes.color_6fcdc1);b.setScaleX(cc.winSize.width);b.setScaleY(100);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height));this.addChild(b);var c=new cc.LabelTTF("\u53c2\u52a0\u8005\u767b\u9304");c.setFontName(GAME_FONT.PRO_W6);c.setFontSize(36);c.setFontFillColor(new cc.Color(255,
243,191,255));c.setScanPhixelRGB();c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(c);var d=new cc.Sprite(GlobalRes.line_50);d.setScaleX(cc.winSize.width);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height-100-120));this.addChild(d);c=new cc.LabelTTF("3\u4eba\u4ee5\u4e0a\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,
0.5);c.setPosition(cc.winSize.width/2,d.getPosition().y-30);this.addChild(c);var e=new ccui.Button(GlobalRes.addition_btn,GlobalRes.addition_btn);e.setAnchorPoint(1,0.5);e.setPosition(cc.winSize.width-30,cc.winSize.height-100-60);e.setVisible(!1);c=function(){if(30!=h.getItems().length)if(f.getString()&&""!==f.getString()){var b={};b.name=f.getString();var c=new ccui.Layout;c.setUserData(b);c.setContentSize(750,122);b=new cc.LabelTTF(b.name);b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(36);b.setFontFillColor(cc.color(111,
205,193,255));b.setScanPhixelRGB();b.setAnchorPoint(0,0.5);b.setPosition(30,c.getContentSize().height/2);c.addChild(b);b=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);b.setAnchorPoint(1,0.5);b.setPosition(c.getContentSize().width-30,c.getContentSize().height/2);b.addClickEventListener(function(){h.removeItem(h.getIndex(c));k.setString(""+h.getItems().length);3<=h.getItems().length&&30>=h.getItems().length?(m.loadTextureNormal(GlobalRes.color_6fcdc1),m.loadTexturePressed(GlobalRes.color_6fcdc1),
m.setTouchEnabled(!0)):(m.loadTextureNormal(GlobalRes.color_c8c8c8),m.loadTexturePressed(GlobalRes.color_c8c8c8),m.setTouchEnabled(!1))});c.addChild(b);b=new cc.Sprite(GlobalRes.line_8);b.setAnchorPoint(0,0);b.setScaleX(c.getContentSize().width);b.setScaleY(0.25);c.addChild(b);h.pushBackDefaultItem();h.pushBackCustomItem(c);k.setString(""+h.getItems().length);3<=h.getItems().length&&30>=h.getItems().length?(m.loadTextureNormal(GlobalRes.color_6fcdc1),m.loadTexturePressed(GlobalRes.color_6fcdc1),m.setTouchEnabled(!0)):
(m.loadTextureNormal(GlobalRes.color_c8c8c8),m.loadTexturePressed(GlobalRes.color_c8c8c8),m.setTouchEnabled(!1));f.removeFromParent();f=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-e.getContentSize().width,120),new cc.Scale9Sprite);f.setPlaceholderFontColor(cc.color.GRAY);f.setPlaceholderFontSize(36);f.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");f.setAdd(!0);f.setAnchorPoint(cc.p(0,0.5));f.setPosition(60,cc.winSize.height-100-60);f.setDelegate(a);
f.setFontName(GAME_FONT.PRO_W3);f.setFontColor(cc.color(111,205,193,255));f.setFontSize(36);f.setMaxLength(16);a.addChild(f);f.schedule(g,0,cc.REPEAT_FOREVER)}else alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044")};e.addClickEventListener(c);d=new ccui.Layout;d.setContentSize(145,120);d.setTouchEnabled(!0);d.addClickEventListener(c);d.setAnchorPoint(0.5,0.5);d.setPosition(e.getContentSize().width>>1,e.getContentSize().height>>1);e.addChild(d);this.addChild(e);var f=
new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-e.getContentSize().width,120),new cc.Scale9Sprite);f.setPlaceholderFontColor(cc.color.GRAY);f.setPlaceholderFontSize(36);f.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");f.setAdd(!0);f.setAnchorPoint(cc.p(0,0.5));f.setPosition(60,cc.winSize.height-100-60);f.setDelegate(this);f.setFontName(GAME_FONT.PRO_W3);f.setFontColor(cc.color(111,205,193,255));f.setFontSize(36);f.setMaxLength(16);this.addChild(f);
var g=function(){""===f.getString()?e.setVisible(!1):e.setVisible(!0)};f.schedule(g,0,cc.REPEAT_FOREVER);var h=new ccui.ListView;h.setDirection(ccui.ScrollView.DIR_VERTICAL);h.setTouchEnabled(!0);h.setBounceEnabled(!1);h.setContentSize(cc.size(750,cc.winSize.height-100-120-8-200-50));h.setAnchorPoint(0,1);h.setPosition(0,cc.winSize.height-100-120-50);this.addChild(h);d=new cc.Sprite(GlobalRes.line_8);d.setScaleX(cc.winSize.width);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100-120-h.getContentSize().height-
50);this.addChild(d);c=new cc.LabelTTF(" \u4eba\u304c\u53c2\u52a0\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,d.getPosition().y-8-30);this.addChild(c);var k=new cc.LabelTTF("0");k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(111,205,193,255));k.setAnchorPoint(1,1);k.setPosition(c.getPosition().x-c.getContentSize().width/
2,d.getPosition().y-8-30);this.addChild(k);c=new ccui.Layout;c.setContentSize(200,80);c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,k.getPosition().y-k.getContentSize().height-30);this.addChild(c);var m=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);m.setScale(200,80);m.setAnchorPoint(0,0);m.setTouchEnabled(!1);m.addClickEventListener(function(){for(var b=h.getItems(),c=0;c<b.length;c++)a.m_memberdata.add(b[c].getUserData());a.m_groupdata.add({icon:"01",name:"\u30d6\u30cb\u30e3"});
a.m_groupdata.add({icon:"02",name:"\u3070\u306b\u3089"});a.loadResult1View()});c.addChild(m);d=new cc.LabelTTF("\u767b\u9332\u5b8c\u4e86");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(26);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(c.getContentSize().width/2,c.getContentSize().height/2);c.addChild(d);var l=new cc.LabelTTF("\u53c2\u52a0\u8005\u5165\u529b\u5b8c\u4e86");l.setFontName(GAME_FONT.PRO_W3);l.setFontSize(36);l.setFontFillColor(cc.color.GRAY);
l.setAnchorPoint(0,1);l.setPosition(50,cc.winSize.height-100-40);this.addChild(l);30==h.getItems().length?(f.setVisible(!1),l.setVisible(!0)):(f.setVisible(!0),l.setVisible(!1));b.schedule(function(){30==h.getItems().length?(f.setVisible(!1),l.setVisible(!0)):(f.setVisible(!0),l.setVisible(!1))},0,cc.REPEAT_FOREVER)},loadGroupsSettingView:function(){this.m_state=this.STATE_GROUPSETTING;var a="\u30d6\u30cb\u30e3 \u3070\u306b\u3089 \u30b8\u30a7\u30b9\u30bf \u304b\u3071\u3071 \u304f\u3089\u306e\u3059\u3051 \u304f\u308d\u307e\u308b \u30b3\u30a2\u3089\u3093 \u30dc\u30b9 \u306e\u3076\u3053 \u3074\u3087\u3053 \u3068\u308a\u3056\u3048\u3082\u3093 \u3060\u3044\u306a\u305d\u30fc \u30b9\u30ad\u30e3\u30c3\u30c8 \u30ad\u30ce\u30b3\u306e\u5b50 \u3046\u3055\u307d\u3093 random".split(" ");
this.m_mode="normal";var b=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var c=new cc.Sprite(GlobalRes.color_6fcdc1);c.setScaleX(cc.winSize.width);c.setScaleY(100);c.setAnchorPoint(cc.p(0,1));c.setPosition(cc.p(0,cc.winSize.height));this.addChild(c);c=new cc.LabelTTF("\u30c1\u30fc\u30e0\u767b\u9332");c.setFontSize(36);c.setFontFillColor(new cc.Color(255,243,191,255));c.setScanPhixelRGB();c.setFontName(GAME_FONT.PRO_W3);c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(cc.winSize.width>>
1,cc.winSize.height-50));this.addChild(c);var d=new cc.Sprite(GlobalRes.line_50);d.setScaleX(cc.winSize.width);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height-280));this.addChild(d);c=new cc.LabelTTF("\u767b\u9332\u8005\u6570\u306b\u3088\u3063\u3066\u30c1\u30fc\u30e0\u6570\u306f\u5236\u9650\u304c\u3042\u308a\u307e\u3059");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,0.5);c.setPosition(cc.winSize.width/2,d.getPosition().y-
30);this.addChild(c);var e=new ccui.ListView;e.setDirection(ccui.ScrollView.DIR_VERTICAL);e.setTouchEnabled(!0);e.setBounceEnabled(!1);e.setContentSize(cc.size(750,cc.winSize.height-100-180-8-50-200));e.setAnchorPoint(0,1);e.setPosition(0,cc.winSize.height-100-180-50);this.addChild(e);var f=function(a,b){for(var c=[],d=0;d<a.getItems().length;d++)a.getItem(d).getUserData().index==b&&c.push(a.getItem(d));return c},b=this,c=function(){if(3==b.m_memberdata.size()){if(2==e.getItems().length)return}else if(e.getItems().length==
b.m_memberdata.size()-1)return;var c=l.isVisible();l.setVisible(!1);var d=new ccui.Layout;d.setTouchEnabled(!0);d.setContentSize(cc.winSize.width,cc.winSize.height);d.setAnchorPoint(0.5,0.5);d.setPosition(cc.winSize.width/2,cc.winSize.height/2);b.addChild(d,998);var k=new ccui.Layout;k.setTouchEnabled(!0);k.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);k.setBackGroundColor(cc.color(255,255,255,255));k.setContentSize(570,680);k.setAnchorPoint(0.5,0.5);k.setPosition(cc.winSize.width/2,cc.winSize.height/
2);b.addChild(k,999);d.addClickEventListener(function(){l.setVisible(c);k.removeFromParent();d.removeFromParent();b.getChildByTag(3).close()});for(var n={},p=0,u=0;16>u;u++){var x=f(e,u).length,v="res/Global/cha_pop/cha_pop_"+PAD(u+1,2)+"_off.png",v=new ccui.Button(v,v);v.setAnchorPoint(0,1);v.setPosition(55+(v.getContentSize().width+40)*parseInt(u%4),k.getContentSize().height-60-(v.getContentSize().height+40)*parseInt(u/4));v.setUserData({icon:""+PAD(u+1,2),name:a[u],index:u});var A=function(a){if(n.current){if(n.current.getUserData().icon===
a.getUserData().icon)return;n.current.loadTextureNormal("res/Global/cha_pop/cha_pop_"+n.current.getUserData().icon+"_off.png");n.current.loadTexturePressed("res/Global/cha_pop/cha_pop_"+n.current.getUserData().icon+"_off.png")}a.loadTextureNormal("res/Global/cha_pop/cha_pop_"+a.getUserData().icon+"_on.png");a.loadTexturePressed("res/Global/cha_pop/cha_pop_"+a.getUserData().icon+"_on.png");n.current=a;SoundManager.instance().playEffect(GroupingRes.sound_normal_1)};15==u&&15==p&&(x=2);2>x&&v.addClickEventListener(A);
k.addChild(v);2<=x&&(p++,x=new cc.Sprite(GroupingRes.cha_block),x.setAnchorPoint(0,1),x.setPosition(55+(v.getContentSize().width+40)*parseInt(u%4),k.getContentSize().height-60-(v.getContentSize().height+40)*parseInt(u/4)),k.addChild(x))}var B=new ccui.Layout;B.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);B.setBackGroundColor(cc.color(111,205,193,255));B.setContentSize(570,100);B.setTouchEnabled(!0);B.setAnchorPoint(0,0);k.addChild(B);p=new cc.LabelTTF("\u78ba\u8a8d");p.setFontName(GAME_FONT.PRO_W3);
p.setFontSize(36);p.setAnchorPoint(0.5,0.5);p.setPosition(B.getContentSize().width/2,B.getContentSize().height/2);B.addChild(p);B.addClickEventListener(function(){if(n.current){var p={};if("random"===n.current.getUserData().name){for(var u=Math.floor(15*Math.random());2==f(e,u).length;)u=Math.floor(15*Math.random());1==f(e,u).length?-1==f(e,u)[0].getUserData().icon.indexOf("_b")?p.icon=""+PAD(u+1,2)+"_b":p.icon=""+PAD(u+1,2):p.icon=0==f(e,u).length?""+PAD(u+1,2):""+PAD(u+1,2)+"_b";p.name=a[u];p.index=
u}else p.index=n.current.getUserData().index,1==f(e,p.index).length?-1==f(e,p.index)[0].getUserData().icon.indexOf("_b")?p.icon=""+PAD(p.index+1,2)+"_b":p.icon=""+PAD(p.index+1,2):p.icon=0==f(e,p.index).length?""+PAD(p.index+1,2):""+PAD(p.index+1,2)+"_b",p.name=n.current.getUserData().name;g.loadTextureNormal("res/Global/cha_pop/cha_thumb_"+p.icon+".png");g.loadTexturePressed("res/Global/cha_pop/cha_thumb_"+p.icon+".png");g.setUserData(p);g.setAnchorPoint(0,1);g.setPosition(30,cc.winSize.height-100-
(180-g.getContentSize().height)/2);h.setVisible(!0);l.removeFromParent();l=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-g.getContentSize().width-h.getContentSize().width,180),new cc.Scale9Sprite,null,null,!0);l.setBodyStyle(1);l.setPlaceholderFontSize(36);l.setPlaceHolder("");l.setAnchorPoint(cc.p(0,0.5));l.setPosition(g.getPosition().x+g.getContentSize().width+30,cc.winSize.height-100-90);l.setDelegate(b);l.setFontName(GAME_FONT.PRO_W3);l.setFontColor(cc.color(111,205,193,255));l.setFontSize(36);
l.setMaxLength(12);b.addChild(l);l.setTag(6);l.setDisFocusCallback(m);B=new ccui.Button;B.setTitleText("\u78ba\u8a8d");l.setString(p.name);l.setUserData(p.name)}else l.setVisible(c);k.removeFromParent();d.removeFromParent();b.getChildByTag(3).close()});b.getChildByTag(3).open()},g=new ccui.Button(GroupingRes.cha_thumb_random,GroupingRes.cha_thumb_random);g.setAnchorPoint(0,1);g.setPosition(30,cc.winSize.height-100-(180-g.getContentSize().height)/2);g.setUserData("");g.addClickEventListener(c);this.addChild(g);
var h=new ccui.Button(GlobalRes.addition_btn,GlobalRes.addition_btn);h.setAnchorPoint(1,0.5);h.setPosition(cc.winSize.width-30,cc.winSize.height-100-90);h.setVisible(!1);d=function(){if(3==b.m_memberdata.size()){if(2==e.getItems().length)return}else if(e.getItems().length==b.m_memberdata.size()-1)return;if(l.getString()&&""!==l.getString()){var a={};a.icon=g.getUserData().icon;a.index=g.getUserData().index;a.name=l.getString();var c=new ccui.Layout;c.setUserData(a);c.setContentSize(750,182);var d=
new cc.Sprite("res/Global/cha_pop/cha_thumb_"+a.icon+".png");d.setAnchorPoint(0,0.5);d.setPosition(30,c.getContentSize().height-90);c.addChild(d);a=new cc.LabelTTF(a.name);a.setFontName(GAME_FONT.PRO_W6);a.setFontSize(36);a.setFontFillColor(cc.color(111,205,193,255));a.setScanPhixelRGB();a.setAnchorPoint(0,0);a.setPosition(d.getPosition().x+d.getContentSize().width+30,d.getPosition().y+2);c.addChild(a);a=new cc.LabelTTF("\u30c1\u30fc\u30e0");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(22);a.setFontFillColor(cc.color(111,
205,193,255));a.setScanPhixelRGB();a.setAnchorPoint(0,1);a.setPosition(d.getPosition().x+d.getContentSize().width+30,d.getPosition().y-2);c.addChild(a);a=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(c.getContentSize().width-30,d.getPosition().y);a.addClickEventListener(function(){e.removeItem(e.getIndex(c));p.setString(""+e.getItems().length);3==b.m_memberdata.size()?2==e.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),
n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1)):3<b.m_memberdata.size()&&(e.getItems().length<=b.m_memberdata.size()-1&&2<=e.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1)))});c.addChild(a);d=new cc.Sprite(GlobalRes.line_8);
d.setAnchorPoint(0,0);d.setScaleX(c.getContentSize().width);d.setScaleY(0.25);c.addChild(d);e.pushBackDefaultItem();e.pushBackCustomItem(c);p.setString(""+e.getItems().length);3==b.m_memberdata.size()?2==e.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1)):3<b.m_memberdata.size()&&(e.getItems().length<=b.m_memberdata.size()-
1&&2<=e.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1)));l.setString("");l.setInputblur();h.setVisible(!1);g.loadTextureNormal(GroupingRes.cha_thumb_random);g.loadTexturePressed(GroupingRes.cha_thumb_random);g.setUserData("")}else alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044")};
h.addClickEventListener(d);var k=new ccui.Layout;k.setContentSize(145,120);k.setTouchEnabled(!0);k.addClickEventListener(d);k.setAnchorPoint(0.5,0.5);k.setPosition(h.getContentSize().width>>1,h.getContentSize().height>>1);h.addChild(k);this.addChild(h);h.setTag(7);var m=function(a){a&&""!==a?(b.getChildByTag(5).setVisible(!1),b.getChildByTag(6).setVisible(!0)):(b.getChildByTag(5).setVisible(!0),b.getChildByTag(6).setVisible(!1),b.getChildByTag(7).setVisible(!1))},l=new cc.EditBox(cc.size(cc.winSize.width-
30-30-30-30-g.getContentSize().width-h.getContentSize().width,180),new cc.Scale9Sprite);l.setPlaceholderFontSize(36);l.setPlaceHolder("");l.setAnchorPoint(cc.p(0,0.5));l.setPosition(g.getPosition().x+g.getContentSize().width+30,cc.winSize.height-100-90);l.setDelegate(this);l.setFontName(GAME_FONT.PRO_W3);l.setFontColor(cc.color(111,205,193,255));l.setFontSize(36);l.setMaxLength(12);this.addChild(l);l.setVisible(!1);l.setTag(6);l.setDisFocusCallback(m);d=new cc.LabelTTF("\u30c1\u30fc\u30e0\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");
d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(36);d.setFontFillColor(cc.color.GRAY);k=new ccui.Layout;k.setTouchEnabled(!0);k.setContentSize(d.getContentSize());k.setAnchorPoint(0,0.5);k.setPosition(g.getPosition().x+g.getContentSize().width+30,cc.winSize.height-100-90);this.addChild(k);d.setAnchorPoint(0,0.5);d.setPosition(0,k.getContentSize().height/2);k.addChild(d);k.setTag(5);k.addClickEventListener(c);d=new cc.Sprite(GlobalRes.line_8);d.setScaleX(cc.winSize.width);d.setAnchorPoint(0,1);d.setPosition(0,
cc.winSize.height-100-180-50-e.getContentSize().height);this.addChild(d);c=new cc.LabelTTF(" \u3064\u306e\u30c1\u30fc\u30e0\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,d.getPosition().y-8-30);this.addChild(c);var p=new cc.LabelTTF("0");p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(26);p.setFontFillColor(cc.color(111,205,193,255));p.setAnchorPoint(1,
1);p.setPosition(c.getPosition().x-c.getContentSize().width/2,d.getPosition().y-8-30);this.addChild(p);c=new ccui.Layout;c.setContentSize(200,80);c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,p.getPosition().y-p.getContentSize().height-30);this.addChild(c);var n=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);n.setScale(200,80);n.setAnchorPoint(0,0);n.setTouchEnabled(!1);n.addClickEventListener(function(){for(var a=e.getItems(),c=0;c<a.length;c++)b.m_groupdata.add(a[c].getUserData());
b.loadResult1View()});c.addChild(n);d=new cc.LabelTTF("\u767b\u9332\u5b8c\u4e86");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(26);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,0.5);d.setPosition(c.getContentSize().width/2,c.getContentSize().height/2);c.addChild(d);c=new Mask;c.setTag(3);c.close();this.addChild(c)},loadMemberSettingView:function(){this.m_state=this.STATE_MEMBERSETTING;var a=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,
255,255,255)));var b=new cc.Sprite(GlobalRes.color_6fcdc1);b.setScaleX(cc.winSize.width);b.setScaleY(100);b.setAnchorPoint(cc.p(0,1));b.setPosition(cc.p(0,cc.winSize.height));this.addChild(b);var c=new cc.LabelTTF("\u53c2\u52a0\u8005\u767b\u9304");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(new cc.Color(255,243,191,255));c.setScanPhixelRGB();c.setAnchorPoint(cc.p(0.5,0.5));c.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(c);var d=new cc.Sprite(GlobalRes.line_50);
d.setScaleX(cc.winSize.width);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height-100-120));this.addChild(d);c=new cc.LabelTTF("3\u4eba\u4ee5\u4e0a\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,0.5);c.setPosition(cc.winSize.width/2,d.getPosition().y-30);this.addChild(c);var e=function(a){var b={};b.name=a;var c=new ccui.Layout;c.setUserData(b);c.setContentSize(750,
122);a=new cc.LabelTTF(b.name);a.setFontName(GAME_FONT.PRO_W6);a.setFontSize(36);a.setFontFillColor(cc.color(111,205,193,255));a.setScanPhixelRGB();a.setAnchorPoint(0,0.5);a.setPosition(30,c.getContentSize().height/2);c.addChild(a);a=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(c.getContentSize().width-30,c.getContentSize().height/2);a.addClickEventListener(function(){k.removeItem(k.getIndex(c));m.setString(""+k.getItems().length);3<=k.getItems().length&&
30>=k.getItems().length?(l.loadTextureNormal(GlobalRes.color_6fcdc1),l.loadTexturePressed(GlobalRes.color_6fcdc1),l.setTouchEnabled(!0)):(l.loadTextureNormal(GlobalRes.color_c8c8c8),l.loadTexturePressed(GlobalRes.color_c8c8c8),l.setTouchEnabled(!1))});c.addChild(a);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(0,0);a.setScaleX(c.getContentSize().width);a.setScaleY(0.25);c.addChild(a);k.pushBackDefaultItem();k.pushBackCustomItem(c);m.setString(""+k.getItems().length);3<=k.getItems().length&&30>=
k.getItems().length?(l.loadTextureNormal(GlobalRes.color_6fcdc1),l.loadTexturePressed(GlobalRes.color_6fcdc1),l.setTouchEnabled(!0)):(l.loadTextureNormal(GlobalRes.color_c8c8c8),l.loadTexturePressed(GlobalRes.color_c8c8c8),l.setTouchEnabled(!1))},f=new ccui.Button(GlobalRes.addition_btn,GlobalRes.addition_btn);f.setAnchorPoint(1,0.5);f.setPosition(cc.winSize.width-30,cc.winSize.height-100-60);f.setVisible(!1);c=function(){30!=k.getItems().length&&(g.getString()&&""!==g.getString()?(e(g.getString()),
g.removeFromParent(),g=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-f.getContentSize().width,120),new cc.Scale9Sprite),g.setPlaceholderFontColor(cc.color.GRAY),g.setPlaceholderFontSize(36),g.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044"),g.setAdd(!0),g.setAnchorPoint(cc.p(0,0.5)),g.setPosition(60,cc.winSize.height-100-60),g.setDelegate(a),g.setFontName(GAME_FONT.PRO_W3),g.setFontColor(cc.color(111,205,193,255)),g.setFontSize(36),g.setMaxLength(16),
a.addChild(g),g.schedule(h,0,cc.REPEAT_FOREVER)):alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044"))};f.addClickEventListener(c);d=new ccui.Layout;d.setContentSize(145,120);d.setTouchEnabled(!0);d.addClickEventListener(c);d.setAnchorPoint(0.5,0.5);d.setPosition(f.getContentSize().width>>1,f.getContentSize().height>>1);f.addChild(d);this.addChild(f);var g=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-f.getContentSize().width,120),new cc.Scale9Sprite);g.setPlaceholderFontColor(cc.color.GRAY);
g.setPlaceholderFontSize(36);g.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");g.setAdd(!0);g.setAnchorPoint(cc.p(0,0.5));g.setPosition(60,cc.winSize.height-100-60);g.setDelegate(this);g.setFontName(GAME_FONT.PRO_W3);g.setFontColor(cc.color(111,205,193,255));g.setFontSize(36);g.setMaxLength(16);this.addChild(g);var h=function(){""===g.getString()?f.setVisible(!1):f.setVisible(!0)};g.schedule(h,0,cc.REPEAT_FOREVER);var k=new ccui.ListView;k.setDirection(ccui.ScrollView.DIR_VERTICAL);
k.setTouchEnabled(!0);k.setBounceEnabled(!1);k.setContentSize(cc.size(750,cc.winSize.height-100-120-8-50-200));k.setAnchorPoint(0,1);k.setPosition(0,cc.winSize.height-100-120-50);this.addChild(k);d=new cc.Sprite(GlobalRes.line_8);d.setScaleX(cc.winSize.width);d.setAnchorPoint(0,1);d.setPosition(0,cc.winSize.height-100-120-50-k.getContentSize().height);this.addChild(d);c=new cc.LabelTTF(" \u4eba\u304c\u53c2\u52a0\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(26);
c.setFontFillColor(cc.color(153,153,153,255));c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,d.getPosition().y-8-30);this.addChild(c);var m=new cc.LabelTTF("0");m.setFontName(GAME_FONT.PRO_W3);m.setFontSize(26);m.setFontFillColor(cc.color(111,205,193,255));m.setAnchorPoint(1,1);m.setPosition(c.getPosition().x-c.getContentSize().width/2,d.getPosition().y-8-30);this.addChild(m);c=new ccui.Layout;c.setContentSize(200,80);c.setAnchorPoint(0.5,1);c.setPosition(cc.winSize.width/2,m.getPosition().y-
m.getContentSize().height-30);this.addChild(c);var l=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);l.setScale(200,80);l.setAnchorPoint(0,0);l.setTouchEnabled(!1);l.addClickEventListener(function(){for(var b=k.getItems(),c=0;c<b.length;c++)a.m_memberdata.add(b[c].getUserData());a.loadGroupsSettingView()});c.addChild(l);d=new cc.LabelTTF("\u767b\u9332\u5b8c\u4e86");d.setFontName(GAME_FONT.PRO_W3);d.setFontSize(26);d.setFontFillColor(cc.color(255,255,255,255));d.setScanPhixelRGB();d.setAnchorPoint(0.5,
0.5);d.setPosition(c.getContentSize().width/2,c.getContentSize().height/2);c.addChild(d);if(!a.m_memberdata.isEmpty()){for(c=0;c<a.m_memberdata.size();c++)e(a.m_memberdata.get(c).name);a.m_memberdata.clear()}var p=new cc.LabelTTF("\u53c2\u52a0\u8005\u5165\u529b\u5b8c\u4e86");p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(36);p.setFontFillColor(cc.color.GRAY);p.setAnchorPoint(0,1);p.setPosition(50,cc.winSize.height-100-40);this.addChild(p);30==k.getItems().length?(g.setVisible(!1),p.setVisible(!0)):
(g.setVisible(!0),p.setVisible(!1));b.schedule(function(){30==k.getItems().length?(g.setVisible(!1),p.setVisible(!0)):(g.setVisible(!0),p.setVisible(!1))},0,cc.REPEAT_FOREVER)},loadReplayView:function(a,b){this.m_state=this.STATE_REPLAY;this.m_mode=b;var c=this;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var d=new cc.Sprite(GlobalRes.color_6fcdc1);d.setScaleX(cc.winSize.width);d.setScaleY(100);d.setAnchorPoint(cc.p(0,1));d.setPosition(cc.p(0,cc.winSize.height));
this.addChild(d);var e=new cc.LabelTTF("\u53c2\u52a0\u8005\u767b\u9304");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(36);e.setFontFillColor(new cc.Color(255,243,191,255));e.setScanPhixelRGB();e.setAnchorPoint(cc.p(0.5,0.5));e.setPosition(cc.p(cc.winSize.width>>1,cc.winSize.height-50));this.addChild(e);e=new cc.Sprite(GlobalRes.line_8);e.setScaleX(cc.winSize.width);e.setAnchorPoint(cc.p(0,1));e.setPosition(cc.p(0,cc.winSize.height-100-120));this.addChild(e);var f=new ccui.Button(GlobalRes.addition_btn,
GlobalRes.addition_btn);f.setAnchorPoint(1,0.5);f.setPosition(cc.winSize.width-30,cc.winSize.height-100-60);f.setVisible(!1);e=function(){if(30!=m.getItems().length)if(h.getString()&&""!==h.getString()){var a={};a.name=h.getString();var b=new ccui.Layout;b.setUserData(a);b.setContentSize(750,122);a=new cc.LabelTTF(a.name);a.setFontName(GAME_FONT.PRO_W6);a.setFontSize(36);a.setFontFillColor(cc.color(111,205,193,255));a.setScanPhixelRGB();a.setAnchorPoint(0,0.5);a.setPosition(30,b.getContentSize().height/
2);b.addChild(a);a=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png);a.setAnchorPoint(1,0.5);a.setPosition(b.getContentSize().width-30,b.getContentSize().height/2);a.addClickEventListener(function(){m.removeItem(m.getIndex(b));p.setString(""+m.getItems().length);3<=m.getItems().length&&30>=m.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),
n.setTouchEnabled(!1))});b.addChild(a);a=new cc.Sprite(GlobalRes.line_8);a.setAnchorPoint(0,0);a.setScaleX(b.getContentSize().width);a.setScaleY(0.25);b.addChild(a);m.pushBackDefaultItem();m.pushBackCustomItem(b);p.setString(""+m.getItems().length);3<=m.getItems().length&&30>=m.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1));
h.removeFromParent();h=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-f.getContentSize().width,120),new cc.Scale9Sprite);h.setPlaceholderFontColor(cc.color.GRAY);h.setPlaceholderFontSize(36);h.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");h.setAdd(!0);h.setAnchorPoint(cc.p(0,0.5));h.setPosition(60,cc.winSize.height-100-60);h.setDelegate(c);h.setFontName(GAME_FONT.PRO_W3);h.setFontColor(cc.color(111,205,193,255));h.setFontSize(36);h.setMaxLength(16);
c.addChild(h);h.schedule(k,0,cc.REPEAT_FOREVER)}else alert("\u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044")};f.addClickEventListener(e);var g=new ccui.Layout;g.setContentSize(145,120);g.setTouchEnabled(!0);g.addClickEventListener(e);g.setAnchorPoint(0.5,0.5);g.setPosition(f.getContentSize().width>>1,f.getContentSize().height>>1);f.addChild(g);this.addChild(f);var h=new cc.EditBox(cc.size(cc.winSize.width-30-30-30-30-f.getContentSize().width,120),new cc.Scale9Sprite);h.setPlaceholderFontColor(cc.color.GRAY);
h.setPlaceholderFontSize(36);h.setPlaceHolder("    \u53c2\u52a0\u8005\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044");h.setAdd(!0);h.setAnchorPoint(cc.p(0,0.5));h.setPosition(60,cc.winSize.height-100-60);h.setDelegate(this);h.setFontName(GAME_FONT.PRO_W3);h.setFontColor(cc.color(111,205,193,255));h.setFontSize(36);h.setMaxLength(16);this.addChild(h);var k=function(){""===h.getString()?f.setVisible(!1):f.setVisible(!0)};h.schedule(k,0,cc.REPEAT_FOREVER);var m=new ccui.ListView;m.setDirection(ccui.ScrollView.DIR_VERTICAL);
m.setTouchEnabled(!0);m.setBounceEnabled(!1);m.setContentSize(cc.size(750,cc.winSize.height-100-120-8-8-200));m.setAnchorPoint(0,1);m.setPosition(0,cc.winSize.height-100-120-8);this.addChild(m);var l=new cc.Sprite(GlobalRes.line_8);l.setScaleX(cc.winSize.width);l.setAnchorPoint(0,1);l.setPosition(0,cc.winSize.height-100-120-8-m.getContentSize().height);this.addChild(l);e=new cc.LabelTTF(" \u4eba\u304c\u53c2\u52a0\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059");e.setFontName(GAME_FONT.PRO_W3);e.setFontSize(26);
e.setFontFillColor(cc.color(153,153,153,255));e.setAnchorPoint(0.5,1);e.setPosition(cc.winSize.width/2,l.getPosition().y-8-30);this.addChild(e);var p=new cc.LabelTTF("0");p.setFontName(GAME_FONT.PRO_W3);p.setFontSize(26);p.setFontFillColor(cc.color(111,205,193,255));p.setAnchorPoint(1,1);p.setPosition(e.getPosition().x-e.getContentSize().width/2,l.getPosition().y-8-30);this.addChild(p);e=new ccui.Layout;e.setContentSize(200,80);e.setAnchorPoint(0.5,1);e.setPosition(cc.winSize.width/2,p.getPosition().y-
p.getContentSize().height-30);this.addChild(e);var n=new ccui.Button(GlobalRes.color_c8c8c8,GlobalRes.color_c8c8c8);n.setScale(200,80);n.setAnchorPoint(0,0);n.setTouchEnabled(!1);n.addClickEventListener(function(){for(var a=m.getItems(),d=0;d<a.length;d++)c.m_memberdata.add(a[d].getUserData());"quick"==b?(c.m_groupdata.add({icon:"01",name:"\u30d6\u30cb\u30e3"}),c.m_groupdata.add({icon:"02",name:"\u3070\u306b\u3089"}),c.loadResult1View()):c.loadGroupsSettingView()});e.addChild(n);g=new cc.LabelTTF("\u767b\u9332\u5b8c\u4e86");
g.setFontName(GAME_FONT.PRO_W3);g.setFontSize(26);g.setFontFillColor(cc.color(255,255,255,255));g.setScanPhixelRGB();g.setAnchorPoint(0.5,0.5);g.setPosition(e.getContentSize().width/2,e.getContentSize().height/2);e.addChild(g);for(e=0;e<a.length;e++)l={},l.name=a[e].name,g=new ccui.Layout,g.setUserData(l),g.setContentSize(750,122),l=new cc.LabelTTF(l.name),l.setFontName(GAME_FONT.PRO_W6),l.setFontSize(36),l.setFontFillColor(cc.color(111,205,193,255)),l.setScanPhixelRGB(),l.setAnchorPoint(0,0.5),l.setPosition(30,
g.getContentSize().height/2),g.addChild(l),l=new ccui.Button(GlobalRes.delete_png,GlobalRes.delete_png),l.setAnchorPoint(1,0.5),l.setPosition(g.getContentSize().width-30,g.getContentSize().height/2),l.addClickEventListener(function(){var a=m.getIndex(this.getParent());m.removeItem(a);p.setString(""+m.getItems().length);3<=m.getItems().length&&30>=m.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),
n.loadTexturePressed(GlobalRes.color_c8c8c8),n.setTouchEnabled(!1))}),g.addChild(l),l=new cc.Sprite(GlobalRes.line_8),l.setAnchorPoint(0,0),l.setScaleX(g.getContentSize().width),l.setScaleY(0.25),g.addChild(l),m.pushBackDefaultItem(),m.pushBackCustomItem(g),p.setString(""+m.getItems().length),3<=m.getItems().length&&30>=m.getItems().length?(n.loadTextureNormal(GlobalRes.color_6fcdc1),n.loadTexturePressed(GlobalRes.color_6fcdc1),n.setTouchEnabled(!0)):(n.loadTextureNormal(GlobalRes.color_c8c8c8),n.loadTexturePressed(GlobalRes.color_c8c8c8),
n.setTouchEnabled(!1));var r=new cc.LabelTTF("\u53c2\u52a0\u8005\u5165\u529b\u5b8c\u4e86");r.setFontName(GAME_FONT.PRO_W3);r.setFontSize(36);r.setFontFillColor(cc.color.GRAY);r.setAnchorPoint(0,1);r.setPosition(50,cc.winSize.height-100-40);this.addChild(r);30==m.getItems().length?(h.setVisible(!1),r.setVisible(!0)):(h.setVisible(!0),r.setVisible(!1));d.schedule(function(){30==m.getItems().length?(h.setVisible(!1),r.setVisible(!0)):(h.setVisible(!0),r.setVisible(!1))},0,cc.REPEAT_FOREVER)},loadResult1View:function(){SoundManager.instance().playEffect(GroupingRes.laughjingle);
this.scheduleOnce(function(){SoundManager.instance().playEffect(GroupingRes.laugh_1)},2);this.m_state=this.STATE_RESULT1;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var a=new cc.Sprite(GlobalRes.color_6fcdc1);a.setScaleX(cc.winSize.width);a.setScaleY(100);a.setAnchorPoint(0,0);a.setPosition(0,0);var b=new cc.LabelTTF("\u30c1\u30fc\u30e0\u5206\u3051\u306e\u7d50\u679c");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(36);b.setFontFillColor(new cc.Color(255,243,
191,255));b.setScanPhixelRGB();b.setAnchorPoint(cc.p(0.5,0.5));b.setPosition(cc.p(cc.winSize.width>>1,50));var c=new ccui.ListView;c.setDirection(ccui.ScrollView.DIR_VERTICAL);c.setTouchEnabled(!0);c.setBounceEnabled(!1);c.setContentSize(cc.size(750,cc.winSize.height-148));c.setAnchorPoint(0,1);c.setPosition(0,cc.winSize.height);this.addChild(c);var d=new ccui.Layout;d.setContentSize(cc.winSize.width,100);d.addChild(a);d.addChild(b);c.pushBackDefaultItem();c.pushBackCustomItem(d);for(var e=Math.floor(this.m_memberdata.size()/
this.m_groupdata.size()),f=new ArrayList,a=0;a<this.m_groupdata.size();a++){var g={};g.name=this.m_groupdata.get(a).name;g.icon=this.m_groupdata.get(a).icon;g.members=[];for(b=0;b<e;b++)d=Math.floor(Math.random()*this.m_memberdata.size()),g.members[b]=this.m_memberdata.removeIndex(d);f.add(g)}for(a=new ArrayList;!this.m_memberdata.isEmpty();)if(d=Math.floor(Math.random()*f.size()),a.isEmpty()||!a.contains(d))f.get(d).members.push(this.m_memberdata.removeIndex(0)),a.add(d);var h={};h.mode=this.m_mode;
h.groups=f.arr;for(a=0;a<f.size();a++){e=0;d=new ccui.Layout;g=new cc.LabelTTF(f.get(a).name);g.setFontName(GAME_FONT.PRO_W6);g.setFontSize(50);g.setFontFillColor(0==a%2?cc.color(255,255,255,255):cc.color(111,205,193,255));g.setScanPhixelRGB();for(var e=e+g.getContentSize().height,e=e+40,k=new ArrayList,b=0;b<f.get(a).members.length;b++){var m=new cc.LabelTTF(f.get(a).members[b].name);m.setFontName(GAME_FONT.PRO_W6);m.setFontSize(32);m.setFontFillColor(0==a%2?cc.color(255,255,255,255):cc.color(111,
205,193,255));m.setScanPhixelRGB();e=0==b?e+m.getContentSize().height:e+(m.getContentSize().height+35);k.add(m)}d.setContentSize(cc.winSize.width-216-60,e);g.setAnchorPoint(0.5,1);g.setPosition(d.getContentSize().width/2,d.getContentSize().height);d.addChild(g);for(b=e=0;b<k.size();b++)k.get(b).setAnchorPoint(0.5,1),k.get(b).setPosition(d.getContentSize().width/2,d.getContentSize().height-g.getContentSize().height-40-35*b-e),d.addChild(k.get(b)),e+=k.get(b).getContentSize().height;e=new ccui.Layout;
e.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);e.setBackGroundColor(0==a%2?cc.color(111,205,193,255):cc.color(255,251,224,255));540<d.getContentSize().height+40+35?(e.setContentSize(cc.winSize.width,d.getContentSize().height+40+35),d.setAnchorPoint(1,1),d.setPosition(e.getContentSize().width-60,e.getContentSize().height-40)):(e.setContentSize(cc.winSize.width,540),d.setAnchorPoint(1,0.5),d.setPosition(e.getContentSize().width-60,e.getContentSize().height/2));e.addChild(d);d=new cc.Sprite;d.setAnchorPoint(0,
0);g=[];for(b=0;3>b;b++)g.push(new cc.SpriteFrame("res/Global/motion/motion_"+f.get(a).icon+"_"+(b+1)+".png",new cc.Rect(0,0,216,480)));b=new cc.Animation(g,0.15);b=cc.animate(b);d.runAction((new cc.Sequence(b)).repeatForever());e.addChild(d);c.pushBackDefaultItem();c.pushBackCustomItem(e)}a=new cc.Sprite(GlobalRes.line_8);a.setScaleX(cc.winSize.width);a.setAnchorPoint(0,1);a.setPosition(0,cc.winSize.height-c.getContentSize().height);this.addChild(a);c=new ccui.Layout;c.setContentSize(200,80);c.setAnchorPoint(0.5,
1);c.setPosition(cc.winSize.width/2,a.getPosition().y-a.getContentSize().height-30);this.addChild(c);a=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);a.setScale(200,80);a.setAnchorPoint(0,0);var l=this,b=function(){p.open();var a=new RoundRect(570,300);a.setAnchorPoint(0.5,0.5);a.setPosition(cc.winSize.width>>1,cc.winSize.height>>1);l.addChild(a,999);var b=new cc.LabelTTF("\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f");b.setFontName(GAME_FONT.PRO_W3);b.setFontSize(30);
b.setFontFillColor(new cc.Color(111,205,193,255));b.setAnchorPoint(0,1);b.setPosition(35,a.getContentSize().height-40);a.addChild(b);var c=new cc.Sprite(GlobalRes.color_eeeeee);c.setAnchorPoint(0,0);c.setPosition(35,b.getPosition().y-b.getContentSize().height-30-58);c.setScale(498,1);a.addChild(c);for(var d=new cc.EditBox(cc.size(498,58),new cc.Scale9Sprite),c="",e=0;e<f.size();e++)c+=f.get(e).name,e!=f.size()-1&&(c+="\u3001");d.setFontSize(34);d.setFontColor(new cc.Color(111,205,193,255));d.setString(c);
d.setFontName(GAME_FONT.PRO_W3);d.setAnchorPoint(0,1);d.setPosition(36,b.getPosition().y-b.getContentSize().height-30-1);a.addChild(d);b=new ccui.Button(GlobalRes.color_b0e2cf,GlobalRes.color_b0e2cf);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(285,0);a.addChild(b);b.addClickEventListener(function(){""===d.getString()?alert("\u30bf\u30a4\u30c8\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):(h.title=d.getString(),DataManager.instance().createHistory(GAME_TYPE.Grouping,h),
l.loadMainView())});b=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);b.setScale(285,100);b.setAnchorPoint(0,0);b.setPosition(0,0);a.addChild(b);b.addClickEventListener(function(){l.loadMainView()});b=new cc.LabelTTF("\u4fdd\u5b58");b.setFontName(GAME_FONT.PRO_W6);b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(427.5,50);a.addChild(b);b=new cc.LabelTTF("\u30ad\u30e3\u30f3\u30bb\u30eb");b.setFontName(GAME_FONT.PRO_W6);
b.setFontSize(30);b.setFontFillColor(cc.color(255,255,255,255));b.setScanPhixelRGB();b.setAnchorPoint(0.5,0.5);b.setPosition(142.5,50);a.addChild(b)};a.addClickEventListener(b);this.m_func_isbacktomain=b;c.addChild(a);a=new cc.LabelTTF("\u30db\u30fc\u30e0");a.setFontName(GAME_FONT.PRO_W3);a.setFontSize(26);a.setFontFillColor(cc.color(255,255,255,255));a.setScanPhixelRGB();a.setAnchorPoint(0.5,0.5);a.setPosition(c.getContentSize().width/2,c.getContentSize().height/2);c.addChild(a);var p=new Mask;this.addChild(p,
99);p.close()},loadResult2View:function(a,b,c,d,e){this.m_state=this.STATE_RESULT2;this.removeAllChildren();this.addChild(new cc.LayerColor(cc.color(255,255,255,255)));var f=new cc.Sprite(GlobalRes.color_6fcdc1);f.setScaleX(cc.winSize.width);f.setScaleY(100);f.setAnchorPoint(0,0);f.setPosition(0,0);for(var g="",h=0;h<a.length;h++)for(var k=0;k<a[h].members.length;k++){if(h==a.length-1&&k==a[h].members.length-1){g+=a[h].members[k].name;break}g+=a[h].members[k].name+"\u3001"}k=new cc.LabelTTF(b+"."+
c+"."+d+"  "+g);k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(36);k.setFontFillColor(new cc.Color(255,243,191,255));k.setScanPhixelRGB();k.setTextWidth(2*(cc.winSize.width/3));k.setAnchorPoint(cc.p(0.5,0.5));k.setPosition(cc.p(cc.winSize.width>>1,50));b=new ccui.ListView;b.setDirection(ccui.ScrollView.DIR_VERTICAL);b.setTouchEnabled(!0);b.setBounceEnabled(!1);b.setContentSize(cc.size(750,cc.winSize.height-148));b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height);this.addChild(b);h=new ccui.Layout;
h.setContentSize(cc.winSize.width,100);h.addChild(f);h.addChild(k);b.pushBackDefaultItem();b.pushBackCustomItem(h);f=new ArrayList;f.arr=a;for(c=0;c<f.size();c++){g=0;d=new ccui.Layout;var m=new cc.LabelTTF(f.get(c).name+"\u30c1\u30fc\u30e0");m.setFontName(GAME_FONT.PRO_W6);m.setFontSize(50);m.setFontFillColor(0==c%2?cc.color(255,255,255,255):cc.color(111,205,193,255));m.setScanPhixelRGB();for(var g=g+m.getContentSize().height,g=g+40,l=new ArrayList,h=0;h<f.get(c).members.length;h++)k=new cc.LabelTTF(f.get(c).members[h].name),
k.setFontName(GAME_FONT.PRO_W6),k.setFontSize(32),k.setFontFillColor(0==c%2?cc.color(255,255,255,255):cc.color(111,205,193,255)),k.setScanPhixelRGB(),g=0==h?g+k.getContentSize().height:g+(k.getContentSize().height+35),l.add(k);d.setContentSize(cc.winSize.width-216-60,g);m.setAnchorPoint(0.5,1);m.setPosition(d.getContentSize().width/2,d.getContentSize().height);d.addChild(m);for(k=g=0;k<l.size();k++)l.get(k).setAnchorPoint(0.5,1),l.get(k).setPosition(d.getContentSize().width/2,d.getContentSize().height-
m.getContentSize().height-40-35*k-g),d.addChild(l.get(k)),g+=l.get(k).getContentSize().height;h=new ccui.Layout;h.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);h.setBackGroundColor(0==c%2?cc.color(111,205,193,255):cc.color(255,251,224,255));540<d.getContentSize().height+40+35?(h.setContentSize(cc.winSize.width,d.getContentSize().height+40+35),d.setAnchorPoint(1,1),d.setPosition(h.getContentSize().width-60,h.getContentSize().height-40)):(h.setContentSize(cc.winSize.width,540),d.setAnchorPoint(1,
0.5),d.setPosition(h.getContentSize().width-60,h.getContentSize().height/2));h.addChild(d);d=new cc.Sprite;d.setAnchorPoint(0,0);g=[];for(k=0;3>k;k++)g.push(new cc.SpriteFrame("res/Global/motion/motion_"+f.get(c).icon+"_"+(k+1)+".png",new cc.Rect(0,0,216,480)));k=new cc.Animation(g,0.15);k=cc.animate(k);d.runAction((new cc.Sequence(k)).repeatForever());h.addChild(d);b.pushBackDefaultItem();b.pushBackCustomItem(h)}k=new cc.Sprite(GlobalRes.line_8);k.setScaleX(cc.winSize.width);k.setAnchorPoint(0,1);
k.setPosition(0,cc.winSize.height-b.getContentSize().height);this.addChild(k);b=new ccui.Layout;b.setContentSize(300,80);b.setAnchorPoint(0.5,1);b.setPosition(cc.winSize.width/2,k.getPosition().y-k.getContentSize().height-30);this.addChild(b);k=new ccui.Button(GlobalRes.color_6fcdc1,GlobalRes.color_6fcdc1);k.setScale(300,80);k.setAnchorPoint(0,0);var p=this;k.addClickEventListener(function(){for(var b=[],c=0;c<a.length;c++)b=b.concat(a[c].members);p.loadReplayView(b,e)});b.addChild(k);k=new cc.LabelTTF("\u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f");
k.setFontName(GAME_FONT.PRO_W3);k.setFontSize(26);k.setFontFillColor(cc.color(255,255,255,255));k.setScanPhixelRGB();k.setAnchorPoint(0.5,0.5);k.setPosition(b.getContentSize().width/2,b.getContentSize().height/2);b.addChild(k)},modeBtnCallback:function(a){if(a.getParent().getChildByTag(1))d=a.getParent().getChildByTag(1),e=a.getParent().getChildByTag(2),d.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);
a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(4);a.getParent().getChildByTag(3).close()},this))),e.runAction(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)));else{var b=this;a.setTouchEnabled(!1);a.getParent().getChildByTag(3).open();var c=new ccui.Layout;c.setContentSize(cc.winSize.width,cc.winSize.height);c.setAnchorPoint(0,0);c.setTag(4);c.setTouchEnabled(!0);c.addTouchEventListener(function(){d=a.getParent().getChildByTag(1);e=a.getParent().getChildByTag(2);
d.runAction(new cc.Sequence(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)),new cc.callFunc(function(){a.getParent().removeChildByTag(1);a.getParent().removeChildByTag(2);a.getParent().removeChildByTag(4);a.getParent().getChildByTag(3).close()},this)));e.runAction(new cc.MoveTo(0.2,cc.p(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2)))});a.getParent().addChild(c);var d=new ccui.Button(GroupingRes.simple_play_btn,GroupingRes.simple_play_btn);
d.setTag(1);d.setAnchorPoint(cc.p(1,0));d.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);d.addClickEventListener(function(){b.loadQuickSettingView()});c=new cc.LabelTTF("\uff12\u30c1\u30fc\u30e0\u306b\u5206\u3051\u308b");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,d.getContentSize().height/2);d.addChild(c);c=new cc.LabelTTF("\u53c2\u52a0\u8005\u3092\uff12\u3064\u306e\u30c1\u30fc\u30e0\u306b\u5206\u3051\u308b");
c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(28);c.setFontFillColor(cc.color("#6fcdc1"));c.setScanPhixelRGB();c.setAnchorPoint(1,1);c.setPosition(-20,d.getContentSize().height/2);d.addChild(c);c=new cc.Sequence(new cc.MoveTo(0.2,cc.p(d.getPosition().x,a.y+a.getBoundingBox().height+22+15+d.getBoundingBox().height)),new cc.callFunc(function(){a.setTouchEnabled(!0)},this));d.runAction(c);a.getParent().addChild(d);var e=new ccui.Button(GroupingRes.setting_play_btn,GroupingRes.setting_play_btn);e.setTag(2);
e.setAnchorPoint(cc.p(1,0));e.setPosition(cc.winSize.width-50,a.getPosition().y+a.getBoundingBox().height/2);e.addClickEventListener(function(){b.loadMemberSettingView()});c=new cc.LabelTTF("\u30c1\u30fc\u30e0\u306e\u8a2d\u5b9a");c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(36);c.setFontFillColor(cc.color(255,243,191));c.setScanPhixelRGB();c.setAnchorPoint(1,0);c.setPosition(-20,e.getContentSize().height/2);e.addChild(c);c=new cc.LabelTTF("\u30c1\u30fc\u30e0\u6570\u3068\u540d\u524d\u3092\u81ea\u5206\u3067\u767b\u9332");
c.setFontName(GAME_FONT.PRO_W3);c.setFontSize(28);c.setFontFillColor(cc.color("#6fcdc1"));c.setScanPhixelRGB();c.setAnchorPoint(1,1);c.setPosition(-20,e.getContentSize().height/2);e.addChild(c);c=new cc.MoveTo(0.2,cc.p(e.getPosition().x,a.y+a.getBoundingBox().height+22));e.runAction(c);a.getParent().addChild(e)}},editBoxTextChanged:function(a,b){a.getMaxLength()&&a.getString().length>a.getMaxLength()&&a.setString(a.getString().substring(0,a.getMaxLength()))},stateBack:function(a){a.m_state==a.STATE_MAIN?
this.check||(this.check=!0,History.back(1),a.scheduleOnce(function(){location.reload()},0.1)):History.go(1);switch(a.m_state){case a.STATE_QUICKSETTING:case a.STATE_MEMBERSETTING:case a.STATE_REPLAY:case a.STATE_RESULT2:a.loadMainView();break;case a.STATE_GROUPSETTING:a.m_groupdata.clear();a.loadMemberSettingView();break;case a.STATE_RESULT1:a.m_func_isbacktomain()}}}),GroupingScene=cc.Scene.extend({onEnter:function(){this._super();var a=new GroupingLayer;this.addChild(a)}});var MainLayer=cc.LayerColor.extend({ctor:function(){this._super(cc.color(255,255,255,255));var a=new cc.FontDefinition;a.fontName=GAME_FONT.PRO_W6;a.fontSize="32";a.fillStyle=cc.color(0,0,0,255);var b=new cc.LabelTTF("LeftBottom",a);b.setAnchorPoint(cc.p(0,0));b.setPosition(5,5);this.addChild(b);b=new cc.LabelTTF("LeftTop",a);b.setAnchorPoint(cc.p(0,1));b.setPosition(5,cc.director.getWinSize().height-5);this.addChild(b);b=new cc.LabelTTF("RightBottom",a);b.setAnchorPoint(cc.p(1,0));b.setPosition(cc.director.getWinSize().width-
5,5);this.addChild(b);b=new cc.LabelTTF("RightTop",a);b.setAnchorPoint(cc.p(1,1));b.setPosition(cc.director.getWinSize().width-5,cc.director.getWinSize().height-5);this.addChild(b);b=new cc.LabelTTF("\ud300 \ub098\ub204\uae30(\u5206\u7ec4)",a);b=new cc.MenuItemLabel(b,this.gotoScene,this);b.setUserData(GAME_TYPE.Grouping);b.setPosition(0,0);var c=new cc.LabelTTF("\ub7ec\uc2dc\uc548 \ub8f0\ub81b(\u4fc4\u7f57\u65af\u8f6e\u76d8)",a),c=new cc.MenuItemLabel(c,this.gotoScene,this);c.setUserData(GAME_TYPE.RussianRoulette);
c.setPosition(0,b.getContentSize().height+20);var d=new cc.LabelTTF("\uc81c\ube44\ubf51\uae30(\u62bd\u7b7e)",a),d=new cc.MenuItemLabel(d,this.gotoScene,this);d.setUserData(GAME_TYPE.Sortilege);d.setPosition(0,2*(b.getContentSize().height+20));var e=new cc.LabelTTF("\ub2e4\uc218\uacb0(\u591a\u6570\u51b3)",a),e=new cc.MenuItemLabel(e,this.gotoScene,this);e.setUserData(GAME_TYPE.MajorityVote);e.setPosition(0,3*(b.getContentSize().height+20));var f=new cc.LabelTTF("\uc0ac\ub2e4\ub9ac\ud0c0\uae30(\u9636\u68af\u6e38\u620f)",
a),f=new cc.MenuItemLabel(f,this.gotoScene,this);f.setUserData(GAME_TYPE.GhostLeg);f.setPosition(0,4*(b.getContentSize().height+20));var g=new cc.LabelTTF("\uc0ac\ub791\uc758 \ubd89\uc740\uc2e4(\u7231\u60c5\u7ea2\u7ebf)",a),g=new cc.MenuItemLabel(g,this.gotoScene,this);g.setUserData(GAME_TYPE.LoveRedLine);g.setPosition(0,-1*(b.getContentSize().height+20));var h=new cc.LabelTTF("\uac70\uc9d3\ub9d0 \ud0d0\uc9c0\uae30(\u6d4b\u8c0e\u4eea)",a),h=new cc.MenuItemLabel(h,this.gotoScene,this);h.setUserData(GAME_TYPE.Polygraph);
h.setPosition(0,-2*(b.getContentSize().height+20));var k=new cc.LabelTTF("\ucc9c\uc0ac\uc640 \uc545\ub9c8\uc758 \ub354\uce58\ud398\uc774(\u5929\u4f7f\u4e0e\u6076\u9b54\u7684AA\u5236)",a),k=new cc.MenuItemLabel(k,this.gotoScene,this);k.setUserData(GAME_TYPE.ADDutchpay);k.setPosition(0,-3*(b.getContentSize().height+20));a=new cc.LabelTTF("Test For Common",a);a=new cc.MenuItemLabel(a,this.gotoScene,this);a.setUserData(GAME_TYPE.Test);a.setPosition(0,-4*(b.getContentSize().height+20));a=new cc.Menu(a,
b,c,d,e,f,g,h,k);this.addChild(a);a={Type:"image",time:"10",strength:"20"};b=0;"object"==typeof a&&b++;"[object object]"==Object.prototype.toString.call(a).toLowerCase()&&b++;a.length||b++;console.log(b);return!0},gotoScene:function(a){cc.director.getWinSize();cc.view.getFrameSize();cc.view.getFrameSize();SceneController.instance().gotoScene(a.getUserData())}}),MainScene=cc.Scene.extend({onEnter:function(){this._super();var a=new MainLayer;this.addChild(a)}});var TestLayer=cc.LayerColor.extend({ctor:function(){this._super(cc.color(0,0,255,255));var a=100,b=new cc.LabelTTF(""+a);b.setFontSize(30);b.setAnchorPoint(0,1);b.setPosition(0,cc.winSize.height);this.addChild(b);var c=new ScaleMotionNode;c.setContentSize(cc.winSize);c.setAnchorPoint(0,0);this.addChild(c);c.setZoomOut(function(){a++;b.setString(""+a)});c.setZoomIn(function(){a--;b.setString(""+a)})}}),TestScene=cc.Scene.extend({onEnter:function(){this._super();var a=new TestLayer;this.addChild(a)}});(function(){function a(){}a.prototype.rockCallbacks={};a.prototype.sensorValue={x:0,y:0,z:0};a.instance=function(){window.platforms||(window.platforms=new a);return window.platforms};a.prototype.vibrate=function(a){cc.sys.os==cc.sys.OS_ANDROID?window.bridge.vibrate(a):cc.sys.os==cc.sys.OS_IOS&&ios.instance().sendMessageToObjectC(DEFINE.VIBRATION,!1)};a.prototype.log=function(a){cc.sys.os==cc.sys.OS_ANDROID&&window.bridge.log(a)};a.prototype.rock=function(){for(var a in this.rockCallbacks){var c=this.rockCallbacks[a];
c&&c()}};a.prototype.sensor=function(a,c,d){this.sensorValue.x=a;this.sensorValue.y=c;this.sensorValue.z=d};a.prototype.openCamera=function(){cc.sys.os==cc.sys.OS_ANDROID?window.bridge.openCamera():cc.sys.os==cc.sys.OS_IOS&&ios.instance().sendMessageToObjectC(DEFINE.CAMERA,!1)};a.prototype.flashLight=function(a){cc.sys.os==cc.sys.OS_ANDROID?a?window.bridge.processOnFlash():window.bridge.processOffFlash():cc.sys.os==cc.sys.OS_IOS&&(a?ios.instance().sendMessageToObjectC(DEFINE.FIASHLIGHTON,!1):ios.instance().sendMessageToObjectC(DEFINE.FIASHLIGHTOFF,
!1))};a.prototype.addRockCallback=function(a,c){this.rockCallbacks[a]=c};a.prototype.removeRockCallback=function(a){this.rockCallbacks[a]=null};window.Platforms=a})();(function(){function a(){}a.instance=function(){window.sceneController||(window.sceneController=new a);return window.sceneController};a.prototype.replaceScene=function(a,c){cc.loader.releaseAll();if(c){var d=[],e;for(e in c)d.push(c[e]);for(e in GlobalRes)d.push(GlobalRes[e]);cc.LoaderScene.preload(d,function(){cc.director.runScene(a)},this)}else cc.director.runScene(a)};a.prototype.gotoScene=function(b){if(-1==b)a.instance().replaceScene(new MainScene,g_MainRes);else if(-2==b)a.instance().replaceScene(new TestScene,
[]);else if(b.enable)switch(b.name){case GAME_TYPE.Grouping.name:a.instance().replaceScene(new GroupingScene,g_GroupingRes);break;case GAME_TYPE.RussianRoulette.name:a.instance().replaceScene(new RussianRouletteScene,g_RussianRouletteRes);break;case GAME_TYPE.Sortilege.name:a.instance().replaceScene(new SortilegeScene,g_SortilegeRes);break;case GAME_TYPE.MajorityVote.name:a.instance().replaceScene(new MajorityVoteScene,g_MajorityVoteRes);break;case GAME_TYPE.GhostLeg.name:a.instance().replaceScene(new GhostLegScene,
g_GhostLegRes);break;case GAME_TYPE.LoveRedLine.name:a.instance().replaceScene(new LoveRedLineScene,g_LoveRedLineRes);break;case GAME_TYPE.Polygraph.name:a.instance().replaceScene(new PolygraphScene,g_PolygraphRes);break;case GAME_TYPE.ADDutchpay.name:a.instance().replaceScene(new ADDutchpayScene,g_ADDutchpayRes)}};window.SceneController=a})();var mainView,GAME_TYPE={MajorityVote:{name:"\u591a\u6570\u6c7a",enable:!0},Sortilege:{name:"\u304f\u3058\u5f15\u304d",enable:!0},GhostLeg:{name:"\u3042\u307f\u3060\u304f\u3058",enable:!0},RussianRoulette:{name:"\u30ed\u30b7\u30a2\u30f3\u30eb\u30fc\u30ec\u30c3\u30c8",enable:!0},ADDutchpay:{name:"\u304a\u52d8\u5b9a\u30fb\u5929\u56fd\u3068\u5730\u7344",enable:!0},LoveRedLine:{name:"\u904b\u547d\u306e\u8d64\u3044\u7cf8",enable:!0},Polygraph:{name:"\u3046\u305d\u767a\u898b\u5668",enable:!0},Grouping:{name:"\u30c1\u30fc\u30e0\u5206\u3051",
enable:!0}},ANAGLE=function(a,b,c,d){var e=180*Math.atan(Math.abs((d-b)/(c-a)))/3.1415926;return c>=a&&d>=b?-e:c>=a&&d<b?e:c<a&&d>=b?e-180:180-e},POINT_IN_RECT=function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height?!0:!1};function PAD(a,b){var c="00000000000000000000000000000"+a;return c.substr(c.length-b)}function getRandomInt(a,b){return Math.floor(Math.random()*(b-a)+a)}var GAME_FONT={PRO_W6:"HiraKakuProN-W6",PRO_W3:"HiraKakuProN-W3",AZUSA:"AzusaHyuga"};
function ADD_CHANGESTATE_CALLBACK(a,b){window.changeState_cb=a;window.changeState_context=b}function setPushState(){if(1!=window.sessionStorage.getItem("firstStart"))window.sessionStorage.setItem("firstStart",1),History.pushState({state:1},"\u4fbf\u5229\u5c4b","?state\x3dbenriya");else{var a=History.getPageUrl(),b=a.length;"/"===a.substr(b-1,1)&&(a=a.substr(0,b-1),b=a.length);"?state\x3dbenriya"!=a.substr(b-14,14)&&History.pushState({state:1},"\u4fbf\u5229\u5c4b","?state\x3dbenriya")}}
function setCallBackListener(a){var b=function(a){null==a.state&&(History.go(1),window.changeState_cb&&window.changeState_cb(window.changeState_context))};a?window.addEventListener("popstate",b,!1):window.removeEventListener("popstate",b,!1)}function ROCK_PHONE(){y=z=last_x=last_y=last_z=0};(function(){function a(){this.arr=[];this.size=function(){return this.arr.length};this.add=function(){1==arguments.length?this.arr.push(arguments[0]):2<=arguments.length&&this.arr.splice(arguments[0],1,arguments[1],this.arr[arguments[0]]);return this};this.get=function(a){return this.arr[a]};this.removeIndex=function(a){var b=this.arr[a];this.arr.splice(a,1);return b};this.removeObj=function(a){var b=this.indexOf(a);this.removeIndex(this.indexOf(a));return b};this.indexOf=function(a){for(var b=0;b<
this.arr.length;b++)if(this.arr[b]===a)return b;return-1};this.isEmpty=function(){return 0==this.arr.length};this.clear=function(){this.arr=[]};this.contains=function(a){return-1!=this.indexOf(a)};this.addRange=function(b){b.constructor==Array?this.arr=this.arr.concat(b):b.constructor==a&&(this.arr=this.arr.concat(b.arr))};if(1==arguments.length)for(var b=arguments[0],c=0;c<b.size();c++)this.add(b.get(c))}window.HashMap=function(){this.keys=[];this.data={};this.put=function(a,c){null==this.data[a]&&
this.keys.push(a);this.data[a]=c};this.get=function(a){return this.data[a]};this.remove=function(a){this.keys.remove(a);var c=this.data[a];this.data[a]=null;return c};this.entrySet=function(){for(var a=this.keys.length,c=Array(a),d=0;d<a;d++)c[d]={key:this.keys[d],value:this.data[this.keys[d]]};return c};this.keySet=function(){return this.keys};this.dataSet=function(){for(var a=this.keys.length,c=Array(a),d=0;d<a;d++)c[d]=this.data[this.keys[d]];return c};this.isEmpty=function(){return 0==this.keys.length};
this.size=function(){return this.keys.length};this.clear=function(){this.keys=[];this.data={}};this.toString=function(){for(var a="{",c=0;c<this.keys.length;c++,a+=",")a+=this.keys[c]+"\x3d"+this.data[this.keys[c]];return a+"}"}};window.ArrayList=a;window.Queue=function(){1==arguments.length?arguments[0].constructor==a&&(this.arrList=new a(arguments[0])):0==arguments.length&&(this.arrList=new a);this.clear=function(){this.arrList.clear()};this.contains=function(a){return this.arrList(a)};this.dequeue=
function(){return this.arrList.removeIndex(0)};this.enqueue=function(a){this.arrList.add(this.arrList.size(),a)};this.peek=function(){return this.arrList.get(0)};this.size=function(){return this.arrList.size()}}})();if("undefined"==typeof DEFINE)var DEFINE={CAMERA:"CAMERA",PHOTO_ALBUM:"PHOTO_ALBUM",VIBRATION:"VIBRATION",FIASHLIGHT:"FIASHLIGHT",FIASHLIGHTON:"FIASHLIGHTON",FIASHLIGHTOFF:"FIASHLIGHTOFF",PROXIMITY:"PROXIMITY"};var Get_responseData,Get_PhotoData,Get_PhotoMaxCount=-1,Get_PhotoCurrentCount;
(function(){function a(){}function b(a){window.WebViewJavascriptBridge?a(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){a(WebViewJavascriptBridge)},!1)}window.ios=a;a.instance=function(){window.ios||(window.ios=new a);return window.ios};a.sendMessageToObjectC=function(a,d){b(function(b){!1==d?b.send(a,function(a){Get_responseData=a}):b.callHandler(d,a,function(a){Get_responseData=a})})};b(function(a){a.init(function(a,b){"object"==typeof a&&Object.prototype.toString.call(a).toLowerCase();
var c=JSON.parse(a);"rock"==c.Type?(Get_responseData="time:"+c.time+"  strength:"+c.strength,Platforms.instance().rock()):"image"==c.Type&&(Get_PhotoMaxCount=c.data,Get_PhotoCurrentCount=0,Get_PhotoData=Array(Get_PhotoMaxCount));b("get Object C data Success::"+Get_PhotoMaxCount+"::"+Get_PhotoCurrentCount)});a.registerHandler("HandlerJSAndObject",function(a,b){cc.loader.loadImg(a,{isCrossOrigin:!1},function(a,b){-1==Get_PhotoMaxCount?(Get_PhotoData=Array(1),Get_PhotoData[0]=b,Get_PhotoMaxCount=Get_PhotoCurrentCount=
1):(Get_PhotoData[Get_PhotoCurrentCount]=b,Get_PhotoCurrentCount++)});b("send JS_HANDLER Success:")})})})();(function(){function a(){}var b=cc.sys.localStorage;a.instance=function(){window.dataManager||(window.dataManager=new a);return window.dataManager};a.prototype.saveData=function(a,d){b.setItem(a,d)};a.prototype.getData=function(a){return b.getItem(a)};a.prototype.removeData=function(a){b.removeItem(a)};a.prototype.deletePhotoHistory=function(b){a.instance().removeData(b)};a.prototype.getPhotoHistory=function(b,d){var e=a.instance().getData(b);return e?(e=JSON.parse(e),e.array[d]):null};a.prototype.createPhotoHistory=
function(b,d,e){var f=a.instance().getData("photoMaxNum");f?(f=parseInt(f),e&&(++f,a.instance().saveData("photoMaxNum",f)),b=b.name+"_photo"+f):(b=b.name+"_photo0",a.instance().saveData("photoMaxNum",0));(e=a.instance().getData(b))?(e=JSON.parse(e),e.array.push(d)):(e={},f=[],f.push(d),e.array=f);a.instance().saveData(b,JSON.stringify(e));return b};a.prototype.createHistory=function(b,d){var e={},f=new Date;e.year=f.getFullYear();e.month=10>f.getMonth()+1?"0"+(f.getMonth()+1):f.getMonth()+1;e.day=
10>f.getDate()?"0"+f.getDate():f.getDate();e.time=f.getTime();e.data=d;if(f=a.instance().getData(b.name+"_history")){var f=JSON.parse(f),g=f.array;if(5<=g.length){for(var h=0,k=g[0].time,m=1;5>m;m++)g[m].time<k&&(k=g[m].time,h=m);g[h]=e}else g.push(e)}else f={},g=[],g.push(e),f.array=g;a.instance().saveData(b.name+"_history",JSON.stringify(f))};a.prototype.deleteHistory=function(b,d){var e=a.instance().getData(b.name+"_history");if(e){for(var e=JSON.parse(e),f=e.array,g=new ArrayList,h=0;h<f.length;h++)d!=
f[h].time&&g.add(f[h]);g.isEmpty()?a.instance().removeData(b.name+"_history"):(e.array=g.arr,a.instance().saveData(b.name+"_history",JSON.stringify(e)))}};a.prototype.getHistory=function(b){if(b=a.instance().getData(b.name+"_history")){b=JSON.parse(b);b=b.array;for(var d=new ArrayList,e=0;e<b.length;e++){var f=!0;if(0==d.size())d.add(b[e]);else{for(var g=0;g<d.size();g++)if(b[e].time<d.get(g).time){d.add(g,b[e]);f=!1;break}f&&d.add(b[e])}}return d}return null};window.DataManager=a})();(function(){function a(){}var b=null,c=cc.audioEngine;window.SoundManager=a;a.instance=function(){window.soundManager||(window.soundManager=new a);return window.soundManager};a.prototype.playMusic=function(a,b){cc.log("play background music");c.playMusic(a,b)};a.prototype.stopMusic=function(a){cc.log("stop background music");c.stopMusic(a)};a.prototype.addMusicVolume=function(){cc.log("add bakcground music volume");c.setMusicVolume(c.getMusicVolume()+0.1)};a.prototype.subMusicVolume=function(){cc.log("sub backgroud music volume");
c.setMusicVolume(c.getMusicVolume()-0.1)};a.prototype.isMusicPlaying=function(){c.isMusicPlaying()?cc.log("background music is playing"):cc.log("background music is not playing")};a.prototype.playEffect=function(a){cc.log("play effect\x3d\x3d"+a);return b=c.playEffect(a)};a.prototype.stopEffect=function(a){cc.log("stop effect");a?c.stopEffect(a):(c.stopEffect(b),b=null)};a.prototype.stopAllEffects=function(){cc.log("stop all effects");c.stopAllEffects();b=null};a.prototype.addEffectsVolume=function(){cc.log("add effects volume");
c.setEffectsVolume(c.getEffectsVolume()+0.1)};a.prototype.subEffectsVolume=function(){cc.log("sub effects volume");c.setEffectsVolume(c.getEffectsVolume()-0.1)}})();